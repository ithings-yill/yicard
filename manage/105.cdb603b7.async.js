(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[105],{"m6+R":function(e,t,a){e.exports={card:"antd-pro\\pages\\-config\\-tenant-config\\index-card",heading:"antd-pro\\pages\\-config\\-tenant-config\\index-heading",steps:"antd-pro\\pages\\-config\\-tenant-config\\index-steps",errorIcon:"antd-pro\\pages\\-config\\-tenant-config\\index-errorIcon",errorPopover:"antd-pro\\pages\\-config\\-tenant-config\\index-errorPopover",errorListItem:"antd-pro\\pages\\-config\\-tenant-config\\index-errorListItem",errorField:"antd-pro\\pages\\-config\\-tenant-config\\index-errorField",editable:"antd-pro\\pages\\-config\\-tenant-config\\index-editable",advancedForm:"antd-pro\\pages\\-config\\-tenant-config\\index-advancedForm",optional:"antd-pro\\pages\\-config\\-tenant-config\\index-optional",formHeight:"antd-pro\\pages\\-config\\-tenant-config\\index-formHeight"}},qeNj:function(e,t,a){"use strict";var n=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("J+/v");var r=n(a("MoRW"));a("IzEo");var i=n(a("bx4M"));a("T2oS");var o=n(a("W9HT"));a("7Kak");var d=n(a("9yH6"));a("iQDF");var f=n(a("+eQT"));a("giR+");var u=n(a("fyUT"));a("/zsF");var c=n(a("PArb")),s=n(a("pVnL"));a("+L6B");var p=n(a("2/Rp"));a("miYZ");var g=n(a("tsqr")),m=n(a("lwsE")),y=n(a("W8MJ")),h=n(a("a1gu")),v=n(a("Nsbk")),E=n(a("7W2i")),C=n(a("MVZn"));a("OaEy");var D=n(a("2fM7"));a("y8nQ");var x=n(a("Vl3Y"));a("2qtc");var b,w,M,Y,T,H=n(a("kLXV")),k=l(a("q1tI")),S=a("MuoO"),O=n(a("wd/R")),V=n(a("zHco")),N=n(a("ufQ4")),F=n(a("HZnN")),q=n(a("m6+R")),A=H.default.confirm,L=x.default.Item,P=D.default.Option,U=(b=x.default.create(),w=(0,S.connect)(function(e){var t=e.tenantConfig,a=e.loading;return(0,C.default)({},t,{submitting:a.effects["tenantConfig/update"],loading:a.effects["tenantConfig/get"],tenantLoading:a.effects["tenantConfig/getTenant"]})}),M=F.default.Secured("/config/tenantconfig"),b(Y=(0,N.default)(Y=w(Y=M((T=function(e){function t(){var e,a;(0,m.default)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return a=(0,h.default)(this,(e=(0,v.default)(t)).call.apply(e,[this].concat(l))),a.state={enterprise:null},a.loadData=function(){var e=a.props.dispatch;e({type:"tenantConfig/getTenant"})},a.loadConfig=function(e){a.setState({enterprise:e});var t=a.props,n=t.dispatch,l=t.form;n({type:"tenantConfig/get",payload:{enterprise:e}}).then(function(){var e=a.props.data;l.setFieldsValue({capacity:e.capacity,beginDate:e.beginDate?(0,O.default)(e.beginDate,"YYYY-MM-DD"):null,endDate:e.beginDate?(0,O.default)(e.endDate,"YYYY-MM-DD"):null,expiryMonth:e.tenantConfig?e.tenantConfig.expiryMonth:0,expiryDay:e.tenantConfig?e.tenantConfig.expiryDay:0,expiryOrderTimeType:e.tenantConfig?e.tenantConfig.expiryOrderTimeType:0,version:e.tenantConfig?e.tenantConfig.version:2020})})},a.handleSubmit=function(e){var t=a.props,n=t.dispatch,l=t.form,r=t.data;e.preventDefault(),l.validateFields(function(e,t){if(!e){if(!r||!r.id)return void g.default.error("\u8bf7\u9009\u62e9\u5ba2\u6237");var a=t.beginDate?"".concat(t.beginDate.format("YYYY-MM-DD")," 00:00:00"):null,l=t.endDate?"".concat(t.endDate.format("YYYY-MM-DD")," 00:00:00"):null,i={expiryMonth:t.expiryMonth,expiryDay:t.expiryDay,expiryOrderTimeType:t.expiryOrderTimeType,showOriginalStatus:t.showOriginalStatus,showPackageUpgrade:t.showPackageUpgrade,version:t.version};A({okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",title:"\u786e\u5b9a\u63d0\u4ea4?",onOk:function(){n({type:"tenantConfig/update",payload:(0,C.default)({},r,t,{beginDate:a,endDate:l,tenantConfig:i})})}})}})},a}return(0,E.default)(t,e),(0,y.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.currentUser,t=e&&e.entCode&&e.entCode.length<4;t?this.loadData():this.loadConfig(e.enterprise)}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e({type:"tenantConfig/clear"})}},{key:"render",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.currentUser,l=t.tenants,g=t.submitting,m=t.data,y=t.tenantLoading,h=t.loading,v=n&&n.entCode&&n.entCode.length<=4,E=n&&n.entCode&&n.entCode.length<4,C=this.state.enterprise,b={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},w={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};return k.default.createElement(V.default,null,v?k.default.createElement(i.default,null,k.default.createElement(p.default,{style:{marginLeft:8},icon:"reload",shape:"circle",onClick:function(){return e.loadConfig(C)}}),k.default.createElement(x.default,{onSubmit:this.handleSubmit,style:{marginTop:8}},E?k.default.createElement(L,(0,s.default)({},b,{label:"\u5ba2\u6237",className:q.default.formHeight}),k.default.createElement(D.default,{loading:y,placeholder:"\u8bf7\u9009\u62e9\u5ba2\u6237",onSelect:this.loadConfig,showSearch:!0,allowClear:!0},l.map(function(e){return k.default.createElement(P,{key:e.id,value:e.id},e.name)}))):null,k.default.createElement(o.default,{spinning:C&&h,tip:"\u6b63\u5728\u52a0\u8f7d..."},E?k.default.createElement(k.Fragment,null,k.default.createElement(c.default,{orientation:"left",style:{fontSize:12,color:"green"}},"\u5361\u5bb9\u91cf\u4e0e\u670d\u52a1\u671f\uff1a"),k.default.createElement(L,(0,s.default)({},b,{label:"\u5361\u5bb9\u91cf",className:q.default.formHeight}),a("capacity",{initialValue:m.capacity||0,rules:[{required:!0,message:"\u5361\u5bb9\u91cf\u5fc5\u586b"}]})(k.default.createElement(u.default,{min:0,max:1e7,step:5e4,style:{width:180},placeholder:"\u8bf7\u8f93\u5165\u5361\u5bb9\u91cf",formatter:function(e){return"".concat(e," \u5f20")}}))),k.default.createElement(L,(0,s.default)({},b,{label:"\u51fa\u5e93\u5bb9\u91cf",className:q.default.formHeight}),a("deliveryCapacity",{initialValue:m.deliveryCapacity||0})(k.default.createElement(u.default,{style:{width:180},placeholder:"\u51fa\u5e93\u5bb9\u91cf",formatter:function(e){return"".concat(e," \u5f20")}}))),k.default.createElement(L,(0,s.default)({},b,{label:"\u8ba1\u8d39\u7248\u672c",className:q.default.formHeight}),a("version",{initialValue:m.version||2020,rules:[{required:!0,message:"\u8ba1\u8d39\u7248\u672c\u5fc5\u586b"}]})(k.default.createElement(D.default,{placeholder:"\u8bf7\u9009\u62e9\u8ba1\u8d39\u7248\u672c",style:{width:180},allowClear:!0},k.default.createElement(P,{key:2019,value:2019},"2019\u5e74"),k.default.createElement(P,{key:2020,value:2020},"2020\u5e74")))),k.default.createElement(L,(0,s.default)({},b,{label:"\u670d\u52a1\u5f00\u59cb",className:q.default.formHeight}),a("beginDate",{initialValue:m.beginDate?(0,O.default)(m.beginDate,"YYYY-MM-DD"):null,rules:[{required:!0,message:"\u670d\u52a1\u5f00\u59cb\u65e5\u671f\u5fc5\u586b"}]})(k.default.createElement(f.default,{placeholder:"\u8bf7\u9009\u62e9\u670d\u52a1\u5f00\u59cb\u65e5\u671f"}))),k.default.createElement(L,(0,s.default)({},b,{label:"\u670d\u52a1\u622a\u6b62",className:q.default.formHeight}),a("endDate",{initialValue:m.endDate?(0,O.default)(m.endDate,"YYYY-MM-DD"):null,rules:[{required:!0,message:"\u670d\u52a1\u622a\u6b62\u65e5\u671f\u5fc5\u586b"}]})(k.default.createElement(f.default,{placeholder:"\u8bf7\u9009\u62e9\u670d\u52a1\u622a\u6b62\u65e5\u671f"})))):null,k.default.createElement(c.default,{orientation:"left",style:{fontSize:12,color:"magenta"}},"\u5361\u7eed\u8d39\u622a\u6b62\u65e5\u671f=\u5361\u670d\u52a1\u622a\u6b62\u65e5\u671f + \u5ef6\u957f\u6708\u6570 + \u5ef6\u957f\u5929\u6570"),k.default.createElement(L,(0,s.default)({},b,{label:"\u5ef6\u957f\u6708\u6570",className:q.default.formHeight}),a("expiryMonth",{initialValue:m.tenantConfig?m.tenantConfig.expiryMonth:0})(k.default.createElement(u.default,{min:0,max:24,step:1,style:{width:180},placeholder:"\u8bf7\u8f93\u5165\u5ef6\u957f\u6708\u6570",formatter:function(e){return"".concat(e," \u4e2a\u6708")}}))),k.default.createElement(L,(0,s.default)({},b,{label:"\u5ef6\u957f\u5929\u6570",className:q.default.formHeight,extra:k.default.createElement("span",{style:{color:"red"}},"\u6ce8\u610f\uff1a\u3010\u5361\u5546\u7ba1\u7406\u5458\u3011\u64cd\u4f5c\u7eed\u8d39\u65e0\u7eed\u8d39\u622a\u6b62\u65e5\u671f\u9650\u5236")}),a("expiryDay",{initialValue:m.tenantConfig?m.tenantConfig.expiryDay:0})(k.default.createElement(u.default,{min:0,max:1e6,step:1,style:{width:180},placeholder:"\u8bf7\u8f93\u5165\u5ef6\u957f\u5929\u6570",formatter:function(e){return"".concat(e," \u5929")}}))),k.default.createElement(c.default,{orientation:"left",style:{fontSize:12,color:"blue"}},"\u5df2\u5931\u6548\u5361\u57fa\u7840\u5957\u9910\u7eed\u8d39\u540e\u670d\u52a1\u8d77\u59cb\u65e5\u671f\u8ba1\u65f6\u65b9\u5f0f"),k.default.createElement(L,(0,s.default)({},b,{label:"\u8ba1\u65f6\u65b9\u5f0f",className:q.default.formHeight}),a("expiryOrderTimeType",{initialValue:m.tenantConfig?m.tenantConfig.expiryOrderTimeType:0})(k.default.createElement(d.default.Group,null,k.default.createElement(d.default,{value:0},"\u6309\u5931\u6548\u65e5\u671f\u8ba1"),k.default.createElement(d.default,{value:1},"\u6309\u7eed\u8d39\u65e5\u671f\u8ba1"))),k.default.createElement("div",{style:{lineHeight:1,color:"red"}},k.default.createElement("p",null," "),k.default.createElement("p",{style:{lineHeight:1.5}},"(1)\u3001\u6309\u5931\u6548\u65e5\u671f\u8ba1\uff1a\u5df2\u5931\u6548\u5361\u57fa\u7840\u5957\u9910\u7eed\u8d39\u540e\u670d\u52a1\u8d77\u59cb\u65e5\u671f\u8ba1\u7b97\u65b9\u5f0f->\u4ece\u5931\u6548\u65e5\u671f\u7684\u4e0b\u4e2a\u65e5\u671f\u7b97\u8d77\u3002 \u4f8b\uff1a\u5361A\u57282020-10-31\u540e\u8fc7\u671f\uff0c2021-01-08\u7eed\u8d39\u57fa\u7840\u5957\u9910A\uff0c\u5219\u7eed\u8d39\u57fa\u7840\u5957\u9910A\u7684\u670d\u52a1\u8d77\u59cb\u65e5\u671f\u4ece2020-11-01\u8ba1\u7b97\u3002"),k.default.createElement("p",null,"(2)\u3001\u6309\u7eed\u8d39\u65e5\u671f\u8ba1\uff1a\u5df2\u5931\u6548\u5361\u57fa\u7840\u5957\u9910\u7eed\u8d39\u540e\u670d\u52a1\u8d77\u59cb\u65e5\u671f\u8ba1\u7b97\u65b9\u5f0f->\u4ece\u7eed\u8d39\u65e5\u671f\u7b97\u8d77\u3002 \u4f8b\uff1a\u5361A\u57282020-10-31\u540e\u8fc7\u671f\uff0c2021-01-08\u7eed\u8d39\u57fa\u7840\u5957\u9910A\uff0c\u5219\u7eed\u8d39\u57fa\u7840\u5957\u9910A\u7684\u670d\u52a1\u8d77\u59cb\u65e5\u671f\u4ece2021-01-08\u8ba1\u7b97\u3002"),k.default.createElement("p",null,"(3)\u3001\u6b64\u9600\u503c\u4fee\u6539\uff0c\u9884\u8ba11~10\u5206\u949f\u751f\u6548\uff0c\u4e14\u53ea\u5bf9\u4fee\u6539\u540e\u7684\u7eed\u8d39\u7ed3\u679c\u4ea7\u751f\u5f71\u54cd\u3002"))),k.default.createElement(c.default,{orientation:"left",style:{fontSize:12,color:"green"}},"\u5176\u4ed6"),k.default.createElement(L,(0,s.default)({},b,{label:"\u663e\u793a\u8fd0\u8425\u5546\u539f\u59cb\u3010\u5361\u72b6\u6001\u3011",className:q.default.formHeight}),a("showOriginalStatus",{initialValue:m.tenantConfig?m.tenantConfig.showOriginalStatus:0})(k.default.createElement(d.default.Group,null,k.default.createElement(d.default,{value:0},"\u5426"),k.default.createElement(d.default,{value:1},"\u662f")))),k.default.createElement(L,(0,s.default)({},b,{label:"\u5957\u9910\u5347\u7ea7",className:q.default.formHeight}),a("showPackageUpgrade",{initialValue:m.tenantConfig?m.tenantConfig.showPackageUpgrade:0})(k.default.createElement(d.default.Group,null,k.default.createElement(d.default,{value:0},"\u5173"),k.default.createElement(d.default,{value:1},"\u5f00")))),k.default.createElement(L,(0,s.default)({},w,{style:{marginTop:32}}),k.default.createElement(p.default,{type:"primary",htmlType:"submit",loading:g},"\u63d0\u4ea4"))))):k.default.createElement(r.default,{status:"403",title:"403",subTitle:"\u62b1\u6b49\uff0c\u975e\u5361\u5546\u7ba1\u7406\u5458\uff0c\u4f60\u65e0\u6743\u8bbf\u95ee\u8be5\u9875\u9762"}))}}]),t}(k.Component),Y=T))||Y)||Y)||Y)||Y),z=U;t.default=z}}]);