(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[55],{7259:function(e,t,a){e.exports={tableList:"antd-pro\\pages\\-config\\-operator-sync\\index-tableList",tableListOperator:"antd-pro\\pages\\-config\\-operator-sync\\index-tableListOperator",tableListForm:"antd-pro\\pages\\-config\\-operator-sync\\index-tableListForm",submitButtons:"antd-pro\\pages\\-config\\-operator-sync\\index-submitButtons"}},YfdR:function(e,t,a){"use strict";var n=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var l=n(a("bx4M"));a("14J3");var o=n(a("BMrR"));a("+L6B");var d=n(a("2/Rp"));a("7Kak");var u=n(a("9yH6"));a("jCWc");var c=n(a("kPKH"));a("iQDF");var s=n(a("+eQT"));a("2qtc");var f=n(a("kLXV"));a("/zsF");var i=n(a("PArb"));a("Awhp");var m=n(a("KrTs")),p=n(a("lwsE")),h=n(a("W8MJ")),v=n(a("a1gu")),Y=n(a("Nsbk")),y=n(a("7W2i")),E=n(a("MVZn"));a("y8nQ");var g,D,M,b=n(a("Vl3Y")),x=r(a("q1tI")),I=a("MuoO"),k=n(a("8WVO")),F=n(a("wd/R")),L=n(a("7259")),w=b.default.Item,C=(g=(0,I.connect)(function(e){var t=e.operatorsync,a=e.loading,n=e.user;return(0,E.default)({},t,{currentUser:n.currentUser,loading:a.effects["operatorsync/page"],syncLoing:a.effects["operatorsync/sync"]})}),D=b.default.create(),g(M=D(M=function(e){function t(e){var a;return(0,p.default)(this,t),a=(0,v.default)(this,(0,Y.default)(t).call(this,e)),a.columns=[{title:"\u65e5\u671f",dataIndex:"reportDate",render:function(e,t){return(0,F.default)(e).format(0===t.month?"YYYY-MM-DD":"YYYY-MM")}},{title:"\u6570\u636e\u65e5\u671f",dataIndex:"realDate",render:function(e,t){return(0,F.default)(e).format(0===t.month?"YYYY-MM-DD":"YYYY-MM")}},{title:"\u6b63\u786e",dataIndex:"id",render:function(e,t){var a=0===t.month?t.reportDate===t.realDate:(0,F.default)(t.reportDate).format("YYYY-MM")===(0,F.default)(t.realDate).format("YYYY-MM");return x.default.createElement("span",null,x.default.createElement(m.default,{status:a?"success":"error"}),a?"\u662f":"\u5426")}},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updateTime"},{title:"\u6570\u636e\u603b\u6570",dataIndex:"dataCount"},{title:"\u5904\u7406",dataIndex:"processing",render:function(e){return x.default.createElement("span",null,x.default.createElement(m.default,{status:0===e?"error":"success"}),0===e?"\u8fdb\u884c":"\u5b8c\u6210")}},{title:"\u5730\u65b9",dataIndex:"localplatform",render:function(e){return x.default.createElement("span",null,x.default.createElement(m.default,{status:0===e?"success":"error"}),0===e?"\u5426":"\u662f")}},{title:"\u7f16\u7801",dataIndex:"comId"},{title:"\u96c6\u56e2",dataIndex:"cName"},{title:"\u5ba2\u6237",dataIndex:"enterpriseName"},{title:"\u64cd\u4f5c",render:function(e,t){var n=a.state.month;return 0===n?x.default.createElement(x.Fragment,null,x.default.createElement("a",{onClick:function(){return a.syncData(0,t)}},"\u65e5\u5e38\u540c\u6b65"),x.default.createElement(i.default,{type:"vertical"}),x.default.createElement("a",{onClick:function(){return a.syncData(1,t)}},"\u6708\u62a5\u540c\u6b65")):null}}],a.loadData=function(e){var t=a.props.dispatch;t({type:"operatorsync/page",payload:e||{date:null,month:0}})},a.syncData=function(e,t){f.default.confirm({title:"\u540c\u6b65",content:"\u786e\u5b9a\u540c\u6b65".concat(t.cName).concat(0===e?"\u65e5\u5e38":"\u6708\u62a5","\u6570\u636e\u5417\uff1f"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){var n=a.props.dispatch;n({type:"operatorsync/sync",payload:{comId:t.comId,month:e}})}})},a.handleFormReset=function(){var e=a.props.form;e.resetFields(),a.loadData()},a.handleSearch=function(e){e.preventDefault();var t=a.props.form;t.validateFields(function(e,t){if(!e){var n=t.date?"".concat(t.date.format("YYYY-MM-DD HH:mm:ss")):null,r=(0,E.default)({},t,{date:n});a.loadData(r)}})},a.onChange=function(e){var t=a.props.form;a.setState({month:e.target.value}),t.validateFields(function(t,n){if(!t){var r={month:e.target.value,date:n.date?"".concat(n.date.format("YYYY-MM-DD HH:mm:ss")):null};a.loadData(r)}})},a.state={month:0},a}return(0,y.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"renderSearchForm",value:function(){var e=this.props.form.getFieldDecorator;return x.default.createElement(b.default,{onSubmit:this.handleSearch,layout:"inline"},x.default.createElement(o.default,{gutter:{md:8,lg:24,xl:48}},x.default.createElement(c.default,{md:8,sm:24},x.default.createElement(w,{label:"\u65f6\u95f4"},e("date")(x.default.createElement(s.default,{placeholder:"\u65f6\u95f4"})))),x.default.createElement(c.default,{md:8,sm:24},x.default.createElement(w,{label:"\u7c7b\u578b"},e("month",{initialValue:0})(x.default.createElement(u.default.Group,{onChange:this.onChange},x.default.createElement(u.default.Button,{value:0},"\u65e5\u5e38\u6570\u636e"),x.default.createElement(u.default.Button,{value:1},"\u6708\u62a5\u6570\u636e"))))),x.default.createElement(c.default,{md:8,sm:24},x.default.createElement("span",{className:L.default.submitButtons},x.default.createElement(d.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),x.default.createElement(d.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}},{key:"render",value:function(){var e=this.props,t=e.syncDatas,a=e.loading;return x.default.createElement(l.default,{bordered:!1},x.default.createElement("div",{className:L.default.tableList},x.default.createElement("div",{className:L.default.tableListOperator},this.renderSearchForm()),x.default.createElement(k.default,{scrollX:1e3,rowKey:"id",loading:a,data:t,columns:this.columns})))}}]),t}(x.PureComponent))||M)||M),B=C;t.default=B}}]);