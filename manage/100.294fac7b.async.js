(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[100],{"0KCU":function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=l(a("pVnL"));a("IzEo");var i=l(a("bx4M"));a("+BJd");var r=l(a("mr32"));a("+L6B");var o=l(a("2/Rp"));a("/zsF");var u=l(a("PArb")),c=l(a("lwsE")),s=l(a("W8MJ")),p=l(a("a1gu")),f=l(a("Nsbk")),m=l(a("7W2i")),g=l(a("PJYZ"));a("y8nQ");var h=l(a("Vl3Y")),v=l(a("MVZn"));a("2qtc");var S,b,y,M,V=l(a("kLXV")),k=n(a("q1tI")),x=a("MuoO"),I=l(a("8WVO")),z=l(a("HZnN")),E=l(a("zHco")),w=l(a("ufQ4")),C=l(a("nrVT")),T=V.default.confirm,D=(S=(0,x.connect)(function(e){var t=e.smtemplate,a=e.loading;return(0,v.default)({},t,{loading:a.effects["smtemplate/page"],delLoading:a.effects["smtemplate/del"]})}),b=z.default.Secured("/business/smtemplate"),y=h.default.create(),(0,w.default)(M=S(M=b(M=y(M=function(e){function t(){var e,a;(0,c.default)(this,t);for(var l=arguments.length,n=new Array(l),d=0;d<l;d++)n[d]=arguments[d];return a=(0,p.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(n))),a.state={data:{},formValues:{},pageIndex:1,pageSize:10,updateModalVisible:!1,edit:!1},a.columns=[{title:"\u7f16\u7801",dataIndex:"id",render:function(e){return k.default.createElement("span",null,e>0?"3".concat((Array(6).join(0)+e).slice(-6)):"--")}},{title:"\u540d\u79f0",dataIndex:"name"},{title:"\u5185\u5bb9",dataIndex:"template"},{title:"\u65f6\u95f4",dataIndex:"updateTime"},{title:"\u64cd\u4f5c",render:function(e,t){return k.default.createElement(k.Fragment,null,k.default.createElement("a",{onClick:function(){return a.handleUpdateModalVisible("edit",t)}},"\u7f16\u8f91"),k.default.createElement(u.default,{type:"vertical"}),k.default.createElement("a",{onClick:function(){return a.handleUpdateModalVisible("del",t)}},"\u5220\u9664"))}}],a.loadData=function(e){var t=a.props.dispatch;t({type:"smtemplate/page",payload:e})},a.deleteItem=function(e){var t=a.props,l=t.dispatch,n=t.pageData,d=a.state,i=d.pageSize,r=d.pageIndex,o=r,u=n.list.length;1===u&&r>1&&(o-=1),l({type:"smtemplate/del",payload:{id:e.id,pageIndex:o,pageSize:i}})},a.handleUpdateModalVisible=function(e,t){switch(e){case"del":V.default.confirm({title:"\u5220\u9664\u77ed\u4fe1\u6a21\u677f",content:"\u786e\u5b9a\u5220\u9664\u6b64\u77ed\u4fe1\u6a21\u677f\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){return a.deleteItem(t)}});break;case"edit":a.setState({data:t}),a.showModal(!0);break;default:break}},a.handleStandardTableChange=function(e,t,l){var n=a.props.dispatch,d=a.state.formValues;a.setState({pageIndex:e.current}),a.setState({pageSize:e.pageSize});var i=(0,v.default)({pageIndex:e.current,pageSize:e.pageSize},d);l.field&&(i.sorter="".concat(l.field,"_").concat(l.order)),n({type:"smtemplate/page",payload:i})},a.handleModalVisible=function(e){a.setState({updateModalVisible:!!e})},a.showModal=function(e){a.setState({updateModalVisible:!0,edit:e})},a.handleAdd=function(e){var t=(0,g.default)((0,g.default)(a)),l=a.state,n=l.pageSize,d=l.edit,i=l.data;if(e){var r=(0,v.default)({},i,e),o="".concat(d?"\u4fee\u6539\u77ed\u4fe1\u6a21\u677f":"\u65b0\u589e\u77ed\u4fe1\u6a21\u677f");T({okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",title:"\u786e\u5b9a".concat(o,"?"),onOk:function(){t.handleModalVisible();var a=t.props.dispatch;a({type:e.id?"smtemplate/update":"smtemplate/post",payload:r}).then(function(){t.setState({data:{}}),t.loadData({pageIndex:1,pageSize:n})})},onCancel:function(){t.setState({data:{}})}})}},a}return(0,m.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this.state,t=e.pageIndex,a=e.pageSize;this.loadData({pageIndex:t,pageSize:a})}},{key:"renderSimpleForm",value:function(){var e=this,t=this.state.pageSize;return k.default.createElement("div",{style:{marginLeft:10,paddingBottom:10}},k.default.createElement(o.default,{shape:"circle",icon:"reload",onClick:function(){return e.loadData({pageIndex:1,pageSize:t})}}),k.default.createElement(o.default,{style:{marginLeft:10},type:"primary",onClick:function(){return e.showModal(!1)}},"\u65b0\u589e\u6a21\u677f"),k.default.createElement(r.default,{style:{marginLeft:10},color:"magenta"},"\u77ed\u4fe1\u6a21\u677f\u6700\u591a\u652f\u6301100\u4e2a"))}},{key:"render",value:function(){var e=this.props,t=e.pageData,a=e.loading,l=this.state,n=l.updateModalVisible,r=l.edit,o=l.data,u={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible};return k.default.createElement(E.default,null,k.default.createElement(i.default,{bordered:!1},this.renderSimpleForm(),k.default.createElement(I.default,{scrollX:1e3,rowKey:"id",rowSelection:null,loading:a,data:t,columns:this.columns,onChange:this.handleStandardTableChange})),k.default.createElement(C.default,(0,d.default)({},u,{edit:r,data:o,modalVisible:n})))}}]),t}(k.PureComponent))||M)||M)||M)||M),L=D;t.default=L}}]);