(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[107],{DMax:function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("p0pE")),u=r(a("d6i3"));a("miYZ");var s=r(a("tsqr")),c=r(a("3a4m")),p=a("weDr"),l={namespace:"purchaseorders",state:{pageData:[],submitting:!1,purchaseInfo:{},expressRouts:[],loadUpdateOrder:!1,address:[]},effects:{updateOrder:u.default.mark(function e(t,a){var r,n,c,l,o,d;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,c=a.put,e.next=4,c({type:"setUpdateOrder",payload:!0});case 4:return e.next=6,n(p.updateOrder,r);case 6:return l=e.sent,l?(o=l.result,d=l.code,o&&s.default.success("\u63d0\u4ea4\u6210\u529f"),1===d&&s.default.error(l.message?l.message:"\u63d0\u4ea4\u5931\u8d25")):s.default.error("\u63d0\u4ea4\u5931\u8d25"),e.next=10,c({type:"setUpdateOrder",payload:!1});case 10:case"end":return e.stop()}},e)}),post:u.default.mark(function e(t,a){var r,n,l,o,d;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,l=a.put,e.next=4,l({type:"setSubmitting",payload:!0});case 4:return e.next=6,n(p.post,r);case 6:return o=e.sent,o?(d=o.result,d?(s.default.success("\u63d0\u4ea4\u6210\u529f"),c.default.push("./orders")):s.default.error(o.message?o.message:"\u63d0\u4ea4\u5931\u8d25")):s.default.error("\u63d0\u4ea4\u5931\u8d25"),e.next=10,l({type:"setSubmitting",payload:!1});case 10:case"end":return e.stop()}},e)}),toChange:u.default.mark(function e(t,a){var r,n,l,o,d,i,f,y;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,l=a.put,e.next=4,l({type:"setSubmitting",payload:!0});case 4:return o=r.option,d=r.order,e.next=7,n(p.toChange,r);case 7:return i=e.sent,i?(f=i.result,y=i.code,f&&(2===o?c.default.push({pathname:"../business/bizsales/add",state:{order:d}}):(s.default.success("\u63d0\u4ea4\u6210\u529f"),c.default.push("./orders"))),1===y&&s.default.error(i.message?i.message:"\u63d0\u4ea4\u5931\u8d25")):s.default.error("\u63d0\u4ea4\u5931\u8d25"),e.next=11,l({type:"setSubmitting",payload:!1});case 11:case"end":return e.stop()}},e)}),page:u.default.mark(function e(t,a){var r,c,l,o,d,i,f,y,h;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,c=a.call,l=a.put,o=r.pageSize,d=r.downTask,i=(0,n.default)({},r,{pageIndex:r.pageIndex}),e.next=6,c(p.page,i);case 6:if(f=e.sent,!f){e.next=17;break}if(y=f.result,!y){e.next=17;break}if(!d||!y){e.next=14;break}s.default.info("\u63d0\u4ea4\u6210\u529f,\u8bf7\u5728\u3010\u4e0b\u8f7d\u4efb\u52a1\u3011\u4e2d\u67e5\u770b"),e.next=17;break;case 14:return h={list:y.data,pagination:{total:y.totalCount,pageSize:o,current:r.pageIndex+1}},e.next=17,l({type:"setList",payload:h});case 17:case"end":return e.stop()}},e)}),get:u.default.mark(function e(t,a){var r,n,s,c,l;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,s=a.put,e.next=4,n(p.get,r);case 4:if(c=e.sent,!c){e.next=10;break}if(l=c.result,!l){e.next=10;break}return e.next=10,s({type:"setPurchaseInfo",payload:l});case 10:case"end":return e.stop()}},e)}),searchRouts:u.default.mark(function e(t,a){var r,n,s,c,l;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,s=a.put,e.next=4,n(p.searchRouts,r);case 4:if(c=e.sent,!c){e.next=10;break}if(l=c.result,!l){e.next=10;break}return e.next=10,s({type:"setExpressRouts",payload:l});case 10:case"end":return e.stop()}},e)}),queryWaybill:u.default.mark(function e(t,a){var r,n,s,c,l;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,s=a.put,e.next=4,n(p.queryWaybill,r);case 4:if(c=e.sent,!c){e.next=10;break}if(l=c.result,!l){e.next=10;break}return e.next=10,s({type:"setWaybill",payload:l});case 10:case"end":return e.stop()}},e)}),queryAddress:u.default.mark(function e(t,a){var r,n,s,c,l;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,s=a.put,e.next=4,n(p.queryAddress,r);case 4:if(c=e.sent,!c){e.next=10;break}if(l=c.result,!l){e.next=10;break}return e.next=10,s({type:"setAddress",payload:l});case 10:case"end":return e.stop()}},e)})},reducers:{setAddress:function(e,t){return(0,n.default)({},e,{address:t.payload})},setWaybill:function(e,t){var a=e.pageData,r=a.list,u=t.payload,s=u.waybill,c=u.waybillno,p=r.find(function(e){return e.waybillno===c});return p.purchaseExpress.cost=s,(0,n.default)({},e,{pageData:(0,n.default)({},a,{list:r})})},UpdateOrder:function(e,t){return(0,n.default)({},e,{loadUpdateOrder:t.payload})},setExpressRouts:function(e,t){return(0,n.default)({},e,{expressRouts:t.payload})},clearExpressRouts:function(e){return(0,n.default)({},e,{expressRouts:[]})},clear:function(e){return(0,n.default)({},e,{purchaseInfo:{}})},setPurchaseInfo:function(e,t){return(0,n.default)({},e,{purchaseInfo:t.payload})},setList:function(e,t){return(0,n.default)({},e,{pageData:t.payload})},setSubmitting:function(e,t){return(0,n.default)({},e,{submitting:t.payload})}}};t.default=l},weDr:function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.page=p,t.post=o,t.toChange=i,t.get=y,t.searchRouts=w,t.updateOrder=b,t.queryWaybill=v,t.queryAddress=k;var n=r(a("d6i3")),u=r(a("1l/V")),s=a("Qyje"),c=r(a("t3Un"));function p(e){return l.apply(this,arguments)}function l(){return l=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/purchaseorder/page?").concat((0,s.stringify)(t))));case 1:case"end":return e.stop()}},e)})),l.apply(this,arguments)}function o(e){return d.apply(this,arguments)}function d(){return d=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/purchaseorder"),{method:"POST",body:t},!1));case 1:case"end":return e.stop()}},e)})),d.apply(this,arguments)}function i(e){return f.apply(this,arguments)}function f(){return f=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/purchaseorder"),{method:"PUT",body:t},!1));case 1:case"end":return e.stop()}},e)})),f.apply(this,arguments)}function y(e){return h.apply(this,arguments)}function h(){return h=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/purchaseorder/").concat(t)));case 1:case"end":return e.stop()}},e)})),h.apply(this,arguments)}function w(e){return x.apply(this,arguments)}function x(){return x=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/express/").concat(t)));case 1:case"end":return e.stop()}},e)})),x.apply(this,arguments)}function b(e){return m.apply(this,arguments)}function m(){return m=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/express"),{method:"PUT",body:t},!1));case 1:case"end":return e.stop()}},e)})),m.apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return g=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/express/querywaybill/").concat(t)));case 1:case"end":return e.stop()}},e)})),g.apply(this,arguments)}function k(e){return O.apply(this,arguments)}function O(){return O=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/purchaseaddress/").concat(t)));case 1:case"end":return e.stop()}},e)})),O.apply(this,arguments)}}}]);