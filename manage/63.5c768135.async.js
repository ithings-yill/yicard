(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[63],{"3J4J":function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var n=l(a("bx4M"));a("DZo9");var d=l(a("8z0m"));a("giR+");var u=l(a("fyUT"));a("5NDa");var s=l(a("5rEg"));a("7Kak");var i=l(a("9yH6")),o=l(a("pVnL"));a("+L6B");var c=l(a("2/Rp"));a("Pwec");var f=l(a("CtXQ")),m=l(a("J4zp"));a("miYZ");var p=l(a("tsqr")),h=l(a("lwsE")),g=l(a("W8MJ")),E=l(a("a1gu")),v=l(a("Nsbk")),y=l(a("7W2i")),b=l(a("MVZn"));a("y8nQ");var x,w,S,C,k,T=l(a("Vl3Y")),D=r(a("q1tI")),N=a("MuoO"),R=l(a("HZnN")),V=l(a("ufQ4")),M=a("34ay"),F=l(a("t3Un")),H=T.default.Item,I=(x=T.default.create(),w=(0,N.connect)(function(e){var t=e.entConfig,a=e.user,l=e.platformorders;return(0,b.default)({entConfigData:t.entConfigData},l,{currentUser:a.currentUser})}),S=R.default.Secured("/myaccount/cash"),(0,V.default)(C=x(C=w(C=S((k=function(e){function t(e){var a;(0,h.default)(this,t),a=(0,E.default)(this,(0,v.default)(t).call(this,e)),a.handleSubmit=function(e){var t=a.props,l=t.submit,r=t.form,n=t.order;e.preventDefault(),r.validateFieldsAndScroll(function(e,t){if(!e){var r=a.state.filenames,d=null;if(!r||0===r.length)return void p.default.error("\u8bf7\u4e0a\u4f20\u652f\u4ed8\u51ed\u8bc1(\u56fe\u7247)");var u=(0,m.default)(r,1);d=u[0];var s={option:1,payFile:d,order:n.id,payment:t.payment,account:t.account,cashier:t.cashier};l&&l(s)}})},a.onRemove=function(){var e=a.state.filenames;e&&(0,F.default)("".concat(e),{method:"DELETE"}),a.setState({filenames:void 0})},a.onChange=function(e){var t=e.file,l=e.fileList;if("uploading"!==t.status&&l&&l.length>0&&l[0].response){var r=l[0].response.result?l[0].response.result:l[0].response.Result;a.setState({filenames:r})}},a.beforeUpload=function(e){var t=e.type.indexOf("jpg")>=0||e.name.toLowerCase().indexOf("png")>=0||e.name.toLowerCase().indexOf("jpeg")>=0;return!!t||(p.default.error("\u5fc5\u987b\u662fjpg\u3001png\u683c\u5f0f\u6587\u4ef6!"),!1)};var l=a.props.entConfigData;return a.state={action:"".concat(null===l||void 0===l?void 0:l.fileUrl,"/").concat("v1","/file/"),filenames:void 0},a}return(0,y.default)(t,e),(0,g.default)(t,[{key:"render",value:function(){var e,t=function(){var e=(0,M.GetToken)();return void 0!==e&&e?{"X-Token":e}:{}},a=this.props,l=a.form.getFieldDecorator,r=a.order,m=a.submitting,p={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},h={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}},g=this.state,E=g.action,v=g.filenames,y=D.default.createElement(c.default,null,D.default.createElement(f.default,{type:"upload"})," \u4e0a\u4f20");return D.default.createElement(n.default,{bordered:!1},D.default.createElement(T.default,{onSubmit:this.handleSubmit,style:{marginTop:8}},D.default.createElement(H,(0,o.default)({},p,{label:"\u6d41\u7a0b"}),D.default.createElement("span",{style:{color:"red"}},"1\u3001\u6309\u5e94\u4ed8\u91d1\u989d\u4ed8\u6b3e",D.default.createElement("br",null),"2\u3001\u4ed8\u6b3e\u540e\u4e0a\u4f20\u652f\u4ed8\u51ed\u8bc1",D.default.createElement("br",null),"3\u3001\u5ba2\u670d\u4f1a\u8fdb\u884c\u540e\u53f0\u5ba1\u6838\u5904\u7406")),D.default.createElement(H,(0,o.default)({},p,{label:"\u8d26\u53f7\u7c7b\u578b"}),l("account",{initialValue:0})(D.default.createElement(i.default.Group,null,D.default.createElement(i.default,{value:0},"\u4e2a\u4eba\u8d26\u53f7"),D.default.createElement(i.default,{value:1},"\u516c\u53f8\u8d26\u53f7")))),D.default.createElement(H,(0,o.default)({},p,{label:"\u6536\u6b3e\u4eba"}),l("cashier",{rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(D.default.createElement(s.default,{style:{width:180},placeholder:"\u8bf7\u8f93\u5165\u6536\u6b3e\u4eba"}))),D.default.createElement(H,(0,o.default)({},p,{label:"\u5e94\u4ed8"}),l("payment",{initialValue:null!==(e=null===r||void 0===r?void 0:r.unitPrice)&&void 0!==e?e:0})(D.default.createElement(u.default,{formatter:function(e){return"\uffe5 ".concat(e)},precision:2,disabled:!0,style:{width:180,color:"blue"}}))),D.default.createElement(H,(0,o.default)({},p,{label:"\u652f\u4ed8\u51ed\u8bc1(\u56fe\u7247)"}),D.default.createElement(d.default,{action:"".concat(E).concat("card","/purchaseorder?thumbnail=135*135"),headers:t(),onChange:this.onChange,onRemove:this.onRemove},v&&v.length>=1?null:y)),D.default.createElement(H,(0,o.default)({},h,{style:{marginTop:32}}),D.default.createElement(c.default,{type:"primary",loading:m,htmlType:"submit"},"\u63d0\u4ea4"))))}}]),t}(D.Component),C=k))||C)||C)||C)||C),q=I;t.default=q},"5pB9":function(e,t,a){e.exports={formHeight:"antd-pro\\pages\\-purchase\\-orders\\index-formHeight"}},Exmi:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var n=l(a("bx4M"));a("RC8p");var d=l(a("rgW5"));a("+BJd");var u=l(a("mr32"));a("+L6B");var s,i,o,c=l(a("2/Rp")),f=l(a("lwsE")),m=l(a("W8MJ")),p=l(a("a1gu")),h=l(a("Nsbk")),g=l(a("7W2i")),E=l(a("MVZn")),v=r(a("q1tI")),y=a("MuoO"),b=l(a("ufQ4")),x=(s=(0,y.connect)(function(e){var t=e.purchaseorders,a=e.loading;return(0,E.default)({},t,{loading:a.effects["purchaseorders/searchRouts"]})}),(0,b.default)(i=s((o=function(e){function t(){var e,a;(0,f.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,p.default)(this,(e=(0,h.default)(t)).call.apply(e,[this].concat(r))),a.loadData=function(){var e=a.props,t=e.order,l=e.dispatch;l({type:"purchaseorders/searchRouts",payload:t.waybillNo})},a}return(0,g.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e({type:"purchaseorders/clearExpressRouts"})}},{key:"render",value:function(){var e=this,t=this.props,a=t.loading,l=t.expressRouts;return v.default.createElement(n.default,{bordered:!1,loading:a},v.default.createElement(c.default,{type:"primary",htmlType:"submit",loading:a,onClick:function(){return e.loadData()}},"\u67e5\u8be2"),v.default.createElement(d.default,{style:{marginTop:50}},l&&l.map(function(e){return v.default.createElement(d.default.Item,{color:"green",key:e.remar},v.default.createElement("p",{style:{margin:0}},v.default.createElement(u.default,{color:"green"},e.remark)),v.default.createElement("p",{style:{margin:0}},e.acceptAddress),v.default.createElement("p",{style:{margin:0}},e.acceptTime))})))}}]),t}(v.PureComponent),i=o))||i)||i),w=x;t.default=w},Y1ZE:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("J+/v");var n=l(a("MoRW"));a("bbsP");var d=l(a("/wGt"));a("IzEo");var u=l(a("bx4M"));a("iQDF");var s=l(a("+eQT"));a("14J3");var i=l(a("BMrR"));a("jCWc");var o=l(a("kPKH"));a("5NDa");var c=l(a("5rEg"));a("+BJd");var f=l(a("mr32"));a("miYZ");var m=l(a("tsqr"));a("/zsF");var p=l(a("PArb"));a("Q9mQ");var h=l(a("diRs"));a("+L6B");var g=l(a("2/Rp")),E=l(a("lwsE")),v=l(a("W8MJ")),y=l(a("a1gu")),b=l(a("Nsbk")),x=l(a("7W2i")),w=l(a("PJYZ")),S=l(a("MVZn"));a("y8nQ");var C=l(a("Vl3Y"));a("2qtc");var k,T,D,N,R,V=l(a("kLXV")),M=r(a("q1tI")),F=a("MuoO"),H=l(a("ZhIB")),I=l(a("EUZL")),q=l(a("KLZ9")),Y=l(a("HZnN")),z=l(a("ufQ4")),P=l(a("onTy")),O=l(a("gJCs")),A=l(a("3J4J")),L=l(a("q1rJ")),B=l(a("Exmi")),J=l(a("5pB9")),Q=V.default.confirm,W=C.default.Item,U=(k=C.default.create(),T=(0,F.connect)(function(e){var t=e.purchaseorders,a=e.loading;return(0,S.default)({},t,{loading:a.effects["purchaseorders/page"]})}),D=Y.default.Secured("/purchase/orders"),(0,z.default)(N=k(N=T(N=D((R=function(e){function t(){var e,a;(0,E.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,y.default)(this,(e=(0,b.default)(t)).call.apply(e,[this].concat(r))),a.state={pageSize:10,selectedRows:[],outStockVisible:!1,deliveryVisible:!1,orderPayVisible:!1,orderVisible:!1,searchRoutsVisible:!1,order:null,formValues:null,entCode:null},a.columns=[{title:"\u5355\u53f7",dataIndex:"order",width:150},{title:"\u5ba2\u6237",dataIndex:"clientName",width:150},{title:"\u91c7\u8d2d\u5458",dataIndex:"userName",width:120},{title:"\u53f7\u6bb5",dataIndex:"segment",width:120,align:"center",render:function(e){return M.default.createElement(M.Fragment,null,e?M.default.createElement(h.default,{content:e,trigger:"hover"},M.default.createElement(g.default,{size:"small",type:"link"},"\u67e5\u770b")):"--")}},{title:"\u72b6\u6001",dataIndex:"state",width:80,render:function(e,t){var a="orange";return 1===e&&(a="blue"),2===e&&(a="green"),3===e&&(a="gray"),4===e&&(a="red"),M.default.createElement("span",{style:{color:a}},t.stateTxt)}},{title:"\u6570\u91cf",dataIndex:"quantity",width:80},{title:"\u5355\u4ef7",dataIndex:"price",width:80,render:function(e){return M.default.createElement("span",{style:{color:"red"}},"\xa5".concat((0,H.default)(e).format("0,0.00")))}},{title:"\u91d1\u989d",dataIndex:"unitPrice",width:100,render:function(e){return M.default.createElement("span",{style:{color:"green"}},"\xa5".concat((0,H.default)(e).format("0,0.00")))}},{title:"\u91c7\u8d2d\u65f6\u95f4",dataIndex:"createTime",width:150},{title:"\u5feb\u9012\u5355\u53f7",dataIndex:"waybillNo",width:300,render:function(e,t){return M.default.createElement(M.Fragment,null,e,e&&M.default.createElement(M.Fragment,null,M.default.createElement("a",{onClick:function(){return a.doDrawer("searchRouts",t,!0)}}," \u67e5\u8be2"),M.default.createElement(p.default,{type:"vertical"}),M.default.createElement("a",{onClick:function(){return a.toCancelExpress(t)}},"\u53d6\u6d88")))}},{title:"\u8fd0\u8d39",dataIndex:"purchaseExpress",width:120,render:function(e,t){var l,r=null===e||void 0===e?void 0:e.cost,n=null===e||void 0===e?void 0:null===(l=e.purchaseExpress)||void 0===l?void 0:l.payType,d=t.waybillNo;return M.default.createElement(M.Fragment,null,M.default.createElement("span",{style:{color:"red"}},r?"\xa5".concat((0,H.default)(r).format("0,0.00")):"--"),M.default.createElement("span",{style:{color:1===n?"green":"blue"}}," [",1===n?"\u73b0\u4ed8":"\u5230\u4ed8","]"),d&&!r?M.default.createElement("a",{onClick:function(){return a.queryWaybill(t)}}," \u67e5\u8be2"):null)}},{title:"\u6536\u6b3e\u8d26\u53f7",dataIndex:"account",width:100,render:function(e){return e?"\u516c\u53f8\u8d26\u53f7":"\u4e2a\u4eba\u8d26\u53f7"}},{title:"\u6536\u6b3e\u91d1\u989d",dataIndex:"payment",width:100,render:function(e){return M.default.createElement("span",{style:{color:"green"}},"\xa5 ".concat((0,H.default)(e).format("0,0.00")))}},{title:"\u6536\u6b3e\u4eba",dataIndex:"cashier",width:120},{title:"\u4ed3\u7ba1",dataIndex:"assistantName",width:120},{title:"\u51fa\u5e93\u65f6\u95f4",dataIndex:"deliveryTime",width:150},{title:"\u5907\u6ce8",dataIndex:"remarks",align:"center",width:100,render:function(e){return M.default.createElement(M.Fragment,null,e?M.default.createElement(h.default,{content:e,trigger:"hover"},M.default.createElement(g.default,{size:"small",type:"link"},"\u67e5\u770b")):"--")}},{title:"\u6587\u4ef6",align:"center",width:80,render:function(e,t){return M.default.createElement(M.Fragment,null,t.xlsFile?M.default.createElement("a",{target:"_blank",title:"\u91c7\u8d2d\u6e05\u5355",style:{marginRight:3,color:"green"},rel:"noopener noreferrer",href:"".concat("https://api-prod.yi-ll.com/card/").concat("v1","/downtask/").concat(t.xlsFile)},"\u6e05\u5355"):"-",t.docFile?M.default.createElement("a",{target:"_blank",title:"\u91c7\u8d2d\u5408\u540c",style:{marginLeft:3,color:"blue"},rel:"noopener noreferrer",href:"".concat("https://api-prod.yi-ll.com/card/").concat("v1","/downtask/").concat(t.docFile)},"\u5408\u540c"):"-")}},{title:"\u64cd\u4f5c",width:150,fixed:"right",align:"center",render:function(e,t){var l=a.props.currentUser,r=l&&l.entCode&&l.entCode.length<=4,n=null;return r&&(0===t.state&&l.entCode.length>=4&&(n=M.default.createElement(M.Fragment,null,t.payFile?null:M.default.createElement(M.Fragment,null,M.default.createElement("a",{onClick:function(){return a.doDrawer("orderPay",t,!0)}},"\u4ed8\u6b3e"),M.default.createElement(p.default,{type:"vertical"})),M.default.createElement("a",{onClick:function(){return a.toCancel(t)}},"\u53d6\u6d88"))),t.state<=1&&4===l.entCode.length&&(n=M.default.createElement(M.Fragment,null,t.payFile?null:M.default.createElement(M.Fragment,null,M.default.createElement("a",{onClick:function(){return a.doDrawer("orderPay",t,!0)}},"\u4ed8\u6b3e"),M.default.createElement(p.default,{type:"vertical"})),M.default.createElement("a",{onClick:function(){return a.doDrawer("outStock",t,!0)}},"\u51fa\u5e93"))),2===t.state&&4===l.entCode.length&&(n=M.default.createElement(M.Fragment,null,t.payFile?null:M.default.createElement(M.Fragment,null,M.default.createElement("a",{onClick:function(){return a.doDrawer("orderPay",t,!0)}},"\u4ed8\u6b3e"),M.default.createElement(p.default,{type:"vertical"})),M.default.createElement("a",{onClick:function(){return a.doDrawer("delivery",t,!0)}},"\u53d1\u8d27")))),n}}],a.loadData=function(e,t){var l=a.props.dispatch,r=a.state.pageSize;l({type:"purchaseorders/page",payload:e||{pageIndex:0,pageSize:r}}).then(function(){t&&t()})},a.handleStandardTableChange=function(e){var t=a.state,l=t.entCode,r=t.formValues,n=(0,S.default)({},r,{pageIndex:e.current-1,pageSize:e.pageSize,entCode:l,begin:(null===r||void 0===r?void 0:r.begin)?"".concat(r.begin.format("YYYY-MM-DD 00:00:00")):null,end:(null===r||void 0===r?void 0:r.end)?"".concat(r.end.format("YYYY-MM-DD 23:59:59")):null});a.loadData(n)},a.queryWaybill=function(e){var t=a.props.dispatch;t({type:"purchaseorders/queryWaybill",payload:e.waybillNo})},a.toCancelExpress=function(e){var t=a.props.dispatch;Q({okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",title:"\u53d6\u6d88\u5feb\u9012\u8ba2\u5355,\u53d6\u6d88\u540e\u5c06\u65e0\u6cd5\u518d\u6b21\u4e0b\u5355\uff08\u4ec5\u652f\u6301\u672a\u63fd\u6536\u60c5\u51b5\u4e0b\uff0c\u5177\u4f53\u4ee5\u5feb\u9012\u516c\u53f8\u4e3a\u51c6\uff09?",onOk:function(){t({type:"purchaseorders/updateOrder",payload:{waybillNo:e.waybillNo,order:e.order,confirm:!1}})}})},a.toCancel=function(e){var t=(0,w.default)((0,w.default)(a));Q({okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",title:"\u53d6\u6d88\u8ba2\u5355?",onOk:function(){t.onChange({order:e.id,option:4})}})},a.doDrawer=function(e,t,l){"outStock"===e&&a.setState({outStockVisible:l,order:t}),"delivery"===e&&a.setState({deliveryVisible:l,order:t}),"orderPay"===e&&a.setState({orderPayVisible:l,order:t}),"searchRouts"===e&&a.setState({searchRoutsVisible:l,order:t}),"order"===e&&a.setState({orderVisible:l})},a.onChange=function(e){var t=(0,w.default)((0,w.default)(a)),l=a.props.dispatch,r=a.state.pageSize;Q({okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",title:"\u786e\u8ba4\u63d0\u4ea4?",onOk:function(){l({type:"purchaseorders/toChange",payload:e}).then(function(){t.setState({outStockVisible:!1,deliveryVisible:!1,orderPayVisible:!1,order:null}),t.loadData({pageIndex:0,pageSize:r})})}})},a.handleAdd=function(){a.setState({orderVisible:!0})},a.onSubmit=function(e){var t=(0,w.default)((0,w.default)(a)),l=a.props.dispatch,r=a.state.pageSize;l({type:"purchaseorders/post",payload:e}).then(function(){t.doDrawer("order",null,!1),t.loadData({pageIndex:0,pageSize:r})})},a.onSelect=function(e){var t=a.state.pageSize,l=a.props.currentUser;a.setState({entCode:e[0]||l.entCode}),a.loadData({pageIndex:0,pageSize:t,entCode:e[0]||l.entCode})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.downLoad=function(){var e=a.state.selectedRows;0!==e.length?(a.setState({exporting:!0}),a.exportToFile(e),a.setState({exporting:!1})):m.default.warning("\u8bf7\u5148\u52fe\u9009\u5217\u8868\u6570\u636e!")},a.exportToFile=function(e){var t=[];t=e.map(function(e){return{"\u5355\u53f7":"".concat(e.order),"\u5ba2\u6237":e.clientName,"\u91c7\u8d2d\u5458":e.userName,"\u53f7\u6bb5":e.segment,"\u72b6\u6001":e.stateTxt,"\u6570\u91cf":e.quantity,"\u5355\u4ef7":e.price,"\u91d1\u989d":e.unitPrice,"\u91c7\u8d2d\u65f6\u95f4":e.createTime,"\u6536\u6b3e\u8d26\u53f7":1===e.account?"\u516c\u53f8\u8d26\u53f7":"\u4e2a\u4eba\u8d26\u53f7","\u6536\u6b3e\u91d1\u989d":e.payment,"\u6536\u6b3e\u4eba":e.cashier,"\u51fa\u5e93\u65f6\u95f4":e.deliveryTime,"\u5feb\u9012\u5355\u53f7":e.waybillno,"\u5907\u6ce8":e.remarks}});var a=I.default.utils.json_to_sheet(t),l=I.default.utils.book_new();I.default.utils.book_append_sheet(l,a,"list"),I.default.writeFile(l,"\u91c7\u8d2d\u8bb0\u5f55.xlsx")},a.handleSearch=function(e){e.preventDefault();var t=a.props,l=t.form,r=t.currentUser,n=a.state,d=n.pageSize,u=n.entCode;l.validateFields(function(e,t){if(!e){var l=(0,S.default)({},t,{pageIndex:0,pageSize:d,entCode:u||r.entCode,begin:t.begin?"".concat(t.begin.format("YYYY-MM-DD 00:00:00")):null,end:t.end?"".concat(t.end.format("YYYY-MM-DD 23:59:59")):null});a.setState({formValues:t}),a.loadData(l)}})},a.handleExport=function(e){e.preventDefault();var t=a.props,l=t.form,r=t.currentUser,n=a.state,d=n.pageSize,u=n.entCode;l.validateFields(function(e,t){if(!e){a.setState({exporting:!0});var l=(0,S.default)({},t,{pageIndex:0,pageSize:d,entCode:u||r.entCode,begin:t.begin?"".concat(t.begin.format("YYYY-MM-DD 00:00:00")):null,end:t.end?"".concat(t.end.format("YYYY-MM-DD 23:59:59")):null,downTask:!0});a.setState({formValues:t}),a.loadData(l,function(){a.setState({exporting:!1})})}})},a.handleFormReset=function(){var e=a.props,t=e.form,l=e.currentUser;t.resetFields(),a.setState({formValues:{}});var r=a.state,n=r.pageSize,d=r.entCode,u={pageIndex:0,pageSize:n,entCode:d||l.entCode};a.loadData(u)},a.renderOperator=function(){var e=a.props.currentUser,t=a.state.exporting,l=e&&e.entCode&&4===e.entCode.length;return M.default.createElement(M.Fragment,null,l&&M.default.createElement(g.default,{onClick:a.handleAdd,icon:"plus",type:"primary"},"\u65b0\u5efa"),M.default.createElement(g.default,{onClick:a.downLoad,icon:"download"},"\u6279\u91cf\u5bfc\u51fa"),M.default.createElement(g.default,{style:{marginLeft:8},type:"danger",ghost:!0,icon:"file-excel",loading:t,onClick:a.handleExport},"\u5bfc\u51fa\u5168\u90e8"),M.default.createElement(f.default,{color:"magenta"},"\u6d41\u7a0b\uff1a\u4e0b\u5355 --\x3e \u4ed8\u6b3e\uff08\u53ef\u9009\uff09 --\x3e \u51fa\u5e93 --\x3e \u53d1\u8d27(\u5feb\u9012\u4e0b\u5355\u3001\u751f\u6210\u91c7\u8d2d\u6e05\u5355\u53ca\u91c7\u8d2d\u5408\u540c)"))},a}return(0,x.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return M.default.createElement("div",{style:{marginLeft:10,paddingBottom:10}},M.default.createElement(C.default,{onSubmit:this.handleSearch,layout:"inline"},M.default.createElement(i.default,{gutter:{md:8,lg:24,xl:48},style:{marginBottom:10}},M.default.createElement(o.default,{md:8,sm:24},M.default.createElement(W,{label:"\u5ba2\u6237"},e("clientName")(M.default.createElement(c.default,{placeholder:"\u8bf7\u8f93\u5165\u5ba2\u6237",allowClear:!0})))),M.default.createElement(o.default,{md:8,sm:24},M.default.createElement(W,{label:"\u5feb\u9012\u5355\u53f7"},e("waybillno")(M.default.createElement(c.default,{placeholder:"\u8bf7\u8f93\u5165\u5feb\u9012\u5355\u53f7",allowClear:!0})))),M.default.createElement(o.default,{md:8,sm:24},M.default.createElement(W,{label:"\u91c7\u8d2d\u8ba2\u5355"},e("order")(M.default.createElement(c.default,{placeholder:"\u8bf7\u8f93\u5165\u91c7\u8d2d\u8ba2\u5355",allowClear:!0}))))),M.default.createElement(i.default,{gutter:{md:8,lg:24,xl:48},style:{marginBottom:10}},M.default.createElement(o.default,{md:8,sm:24},M.default.createElement(W,{label:"\u91c7\u8d2d\u5f00\u59cb"},e("begin")(M.default.createElement(s.default,{placeholder:"\u91c7\u8d2d\u5f00\u59cb"})))),M.default.createElement(o.default,{md:8,sm:24},M.default.createElement(W,{label:"\u91c7\u8d2d\u622a\u6b62"},e("end")(M.default.createElement(s.default,{placeholder:"\u91c7\u8d2d\u622a\u6b62"})))),M.default.createElement(o.default,{md:8,sm:24},M.default.createElement("span",{className:J.default.submitButtons},M.default.createElement(g.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),M.default.createElement(g.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"))))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.pageData,l=t.loading,r=t.currentUser,s=t.submitting,i=this.state,o=i.selectedRows,c=i.deliveryVisible,f=i.outStockVisible,m=i.orderPayVisible,p=i.order,h=i.orderVisible,g=i.searchRoutsVisible,E={};a&&(E=a);var v=r&&r.entCode&&r.entCode.length<=4,y={onSelect:this.onSelect,defaultSelectedKeys:[r.entCode]},b={scrollX:1e3,columns:this.columns,data:E,onChange:this.handleStandardTableChange,loading:l,size:"small",expandedRowRender:this.expandedRowRender,className:"components-table-demo-nested",onSelectRow:this.handleSelectRows,checkBox:!0,selectedRows:o};return M.default.createElement(M.Fragment,null,v?M.default.createElement(M.Fragment,null,M.default.createElement(u.default,null,M.default.createElement(q.default,{entpriseInit:y,tableInit:b,SearchForm:this.renderSimpleForm(),Operator:this.renderOperator()})),M.default.createElement(d.default,{title:"\u91c7\u8d2d",width:"70%",onClose:function(){return e.doDrawer("order",null,!1)},visible:h,destroyOnClose:!0,placement:"right"},M.default.createElement(L.default,{onSubmit:this.onSubmit,submitting:s})),M.default.createElement(d.default,{title:"\u51fa\u5e93",width:"70%",onClose:function(){return e.doDrawer("outStock",null,!1)},visible:f,destroyOnClose:!0,placement:"right"},M.default.createElement(P.default,{order:p,submit:this.onChange,submitting:s})),M.default.createElement(d.default,{title:"\u4ed8\u6b3e",width:"70%",onClose:function(){return e.doDrawer("orderPay",null,!1)},visible:m,destroyOnClose:!0,placement:"right"},M.default.createElement(A.default,{order:p,submit:this.onChange,submitting:s})),M.default.createElement(d.default,{title:"\u53d1\u8d27",width:"100%",onClose:function(){return e.doDrawer("delivery",null,!1)},visible:c,destroyOnClose:!0,placement:"right"},M.default.createElement(O.default,{order:p,submit:this.onChange,submitting:s})),M.default.createElement(d.default,{title:"\u5feb\u9012\u4fe1\u606f\u67e5\u8be2",width:"70%",onClose:function(){return e.doDrawer("searchRouts",null,!1)},visible:g,destroyOnClose:!0,placement:"right"},M.default.createElement(B.default,{order:p}))):M.default.createElement(n.default,{status:"403",title:"403",subTitle:"\u62b1\u6b49\uff0c\u975e\u5361\u5546\u7ba1\u7406\u5458\uff0c\u4f60\u65e0\u6743\u8bbf\u95ee\u8be5\u9875\u9762"}))}}]),t}(M.PureComponent),N=R))||N)||N)||N)||N),Z=U;t.default=Z},gJCs:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var n=l(a("bx4M"));a("bbsP");var d=l(a("/wGt"));a("g9YV");var u=l(a("wCAj"));a("5NDa");var s=l(a("5rEg"));a("+L6B");var i=l(a("2/Rp"));a("/zsF");var o=l(a("PArb"));a("iQDF");var c=l(a("+eQT"));a("7Kak");var f=l(a("9yH6"));a("OaEy");var m=l(a("2fM7")),p=l(a("pVnL"));a("sRBo");var h=l(a("kaz8")),g=l(a("J4zp")),E=l(a("lwsE")),v=l(a("W8MJ")),y=l(a("a1gu")),b=l(a("Nsbk")),x=l(a("7W2i")),w=l(a("PJYZ")),S=l(a("MVZn"));a("y8nQ");var C=l(a("Vl3Y"));a("2qtc");var k,T,D,N,R=l(a("kLXV")),V=r(a("q1tI")),M=a("MuoO"),F=l(a("ufQ4")),H=l(a("Ners")),I=l(a("5pB9")),q=R.default.confirm,Y=C.default.Item,z=(k=C.default.create(),T=(0,M.connect)(function(e){var t=e.purchaseorders,a=e.loading;return(0,S.default)({},t,{loading:a.effects["purchaseorders/queryAddress"]})}),(0,F.default)(D=k(D=T((N=function(e){function t(){var e,a;(0,E.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,y.default)(this,(e=(0,b.default)(t)).call.apply(e,[this].concat(r))),a.state={visible:!1,flag:null,callExpress:!1,saveSender:!0,saveReceiver:!0},a.columns=[{title:"\u8054\u7cfb\u4eba",dataIndex:"contact",width:120},{title:"\u516c\u53f8",dataIndex:"company",width:150},{title:"\u624b\u673a\u53f7",dataIndex:"mobile",width:120},{title:"\u533a\u57df",dataIndex:"province",width:120,render:function(e,t){return"".concat(e," / ").concat(t.city).concat(t.county?" / ".concat(t.county):"")}},{title:"\u5730\u5740",dataIndex:"address",width:200},{title:"",width:100,fixed:"right",align:"center",render:function(e,t){return V.default.createElement("a",{onClick:function(){return a.selectAddress(t)},style:{color:"red"}},"\u9009\u62e9")}}],a.loadAddress=function(e){if(a.setState({flag:e}),"sender"===e){var t=a.props.currentUser;a.loadData(t.enterprise,!0)}else{var l=a.props.order;a.loadData(l.client,!0)}},a.loadData=function(e,t){var l=a.props.dispatch,r=(0,w.default)((0,w.default)(a));l({type:"purchaseorders/queryAddress",payload:e}).then(function(){r.setState({visible:t})})},a.selectAddress=function(e){a.doCloseDrawer();var t=a.state.flag,l=a.props.form;"sender"===t?l.setFieldsValue({"purchaseExpress.sender.contact":e.contact,"purchaseExpress.sender.mobile":e.mobile,"purchaseExpress.sender.address":e.address,"purchaseExpress.sender.company":e.company,"purchaseExpress.sender.bank":e.bank,"purchaseExpress.sender.account":e.account,"purchaseExpress.sender.area":[e.province,e.city,e.county]}):l.setFieldsValue({"purchaseExpress.receiver.contact":e.contact,"purchaseExpress.receiver.mobile":e.mobile,"purchaseExpress.receiver.address":e.address,"purchaseExpress.receiver.company":e.company,"purchaseExpress.receiver.bank":e.bank,"purchaseExpress.receiver.account":e.account,"purchaseExpress.receiver.area":[e.province,e.city,e.county]})},a.doCloseDrawer=function(){a.setState({visible:!1})},a.handleSubmit=function(e){var t=a.props,l=t.form,r=t.submit,n=t.order;e.preventDefault(),l.validateFieldsAndScroll(function(e,t){if(!e){var l=t,d=(0,g.default)(l.purchaseExpress.receiver.area,3),u=d[0],s=d[1],i=d[2];l.purchaseExpress.receiver.province=u,l.purchaseExpress.receiver.city=s,l.purchaseExpress.receiver.county=i;var o=(0,g.default)(l.purchaseExpress.sender.area,3),c=o[0],f=o[1],m=o[2];l.purchaseExpress.sender.province=c,l.purchaseExpress.sender.city=f,l.purchaseExpress.sender.county=m,l.purchaseExpress.sendStartTm=l.purchaseExpress.sendStartTm?"".concat(l.purchaseExpress.sendStartTm.format("YYYY-MM-DD HH:mm:ss")):null,delete l.purchaseExpress.receiver.area,delete l.purchaseExpress.sender.area;var p=a.state,h=p.saveSender,E=p.saveReceiver,v=(0,S.default)({option:3},l,{order:n.id,saveSender:h,saveReceiver:E});if(r){var y=a.state.callExpress;y?q({okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",title:"\u786e\u5b9a\u76f4\u63a5\u4e0b\u5355\u81f3\u987a\u4e30\u5feb\u9012\u516c\u53f8?",onOk:function(){r(v)}}):r(v)}}})},a.onChange=function(){var e=a.state.callExpress;a.setState({callExpress:!e})},a.onSaveSenderChange=function(){var e=a.state.saveSender;a.setState({saveSender:!e})},a.onSaveReceiverChange=function(){var e=a.state.saveReceiver;a.setState({saveReceiver:!e})},a}return(0,x.default)(t,e),(0,v.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,l=t.submitting,r=t.address,g=t.loading,E=this.state,v=E.visible,y=E.callExpress,b=E.saveSender,x=E.saveReceiver,w={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},S={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};return V.default.createElement(n.default,{bordered:!1},V.default.createElement(C.default,{onSubmit:this.handleSubmit},V.default.createElement(Y,(0,p.default)({},w,{label:"\u5feb\u9012\u4e0b\u5355",className:I.default.formHeight,extra:V.default.createElement("span",{style:{color:"red"}},"\u9009\u62e9\u6b64\u9879\uff0c\u5219\u4f1a\u76f4\u63a5\u4e0b\u5355\u81f3\u987a\u4e30\u5feb\u9012\u516c\u53f8\uff0c\u4e0b\u5355\u6210\u529f\u540e\u8bf7\u7b49\u5f85\u63fd\u6536")}),a("callExpress")(V.default.createElement(h.default,{onChange:this.onChange,checked:y},"\u662f"))),y&&V.default.createElement(V.Fragment,null,V.default.createElement(Y,(0,p.default)({},w,{label:"\u5feb\u9012\u516c\u53f8",className:I.default.formHeight}),a("purchaseExpress.shipperCode",{initialValue:1})(V.default.createElement(m.default,{buttonStyle:"solid",style:{width:180}},V.default.createElement(m.default.Option,{value:1},"\u987a\u4e30")))),V.default.createElement(Y,(0,p.default)({},w,{label:"\u8fd0\u8d39\u652f\u4ed8\u65b9\u5f0f",className:I.default.formHeight}),a("purchaseExpress.payType",{initialValue:1})(V.default.createElement(f.default.Group,{buttonStyle:"solid"},V.default.createElement(f.default,{value:1},"\u73b0\u4ed8"),V.default.createElement(f.default,{value:2},"\u5230\u4ed8")))),V.default.createElement(Y,(0,p.default)({},w,{label:"\u4e0a\u95e8\u53d6\u4ef6\u65f6\u95f4",className:I.default.formHeight}),a("purchaseExpress.sendStartTm",{})(V.default.createElement(c.default,{showTime:!0,placeholder:"\u8bf7\u9009\u62e9\u4e0a\u95e8\u53d6\u4ef6\u65f6\u95f4"})))),V.default.createElement(o.default,{orientation:"left",style:{fontSize:12,color:"magenta"}},"\u5bc4\u8d27"),V.default.createElement(Y,(0,p.default)({},w,{label:"\u5730\u5740\u7c3f",className:I.default.formHeight}),V.default.createElement(i.default,{type:"link",size:"small",icon:"contacts",onClick:function(){return e.loadAddress("sender")}},"\u9009\u62e9")),V.default.createElement(Y,(0,p.default)({},w,{label:"\u59d3\u540d",className:I.default.formHeight}),a("purchaseExpress.sender.contact",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"},{max:30,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc730\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{style:{width:180},placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),V.default.createElement(Y,(0,p.default)({},w,{label:"\u624b\u673a\u53f7",className:I.default.formHeight}),a("purchaseExpress.sender.mobile",{rules:[{pattern:/^(?:(?:\+|00)86)?1\d{10}$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"},{required:!0,message:"\u8bf7\u8f93\u5165\u7535\u8bdd"},{min:9,message:"\u7535\u8bdd\u4e0d\u80fd\u5c11\u4e8e9\u4e2a\u5b57\u6bb5"},{max:20,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc720\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{style:{width:180},placeholder:"\u8bf7\u8f93\u5165\u7535\u8bdd"}))),V.default.createElement(Y,(0,p.default)({},w,{label:"\u533a\u57df",className:I.default.formHeight}),a("purchaseExpress.sender.area",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u533a\u57df"}]})(V.default.createElement(H.default,{width:250,placeholder:"\u8bf7\u8f93\u5165\u533a\u57df"}))),V.default.createElement(Y,(0,p.default)({},w,{label:"\u8be6\u7ec6\u5730\u5740",className:I.default.formHeight}),a("purchaseExpress.sender.address",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740"},{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{style:{width:400},placeholder:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740"}))),V.default.createElement(Y,(0,p.default)({},w,{label:"\u516c\u53f8",className:I.default.formHeight}),a("purchaseExpress.sender.company",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u516c\u53f8"},{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{style:{width:400},placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8"}))),V.default.createElement(Y,(0,p.default)({},w,{label:"\u5f00\u6237\u884c",className:I.default.formHeight}),a("purchaseExpress.sender.bank",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5f00\u6237\u884c"},{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{style:{width:400},placeholder:"\u8bf7\u8f93\u5165\u5f00\u6237\u884c"}))),V.default.createElement(Y,(0,p.default)({},w,{label:"\u8d26\u53f7",className:I.default.formHeight}),a("purchaseExpress.sender.account",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u53f7"},{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{style:{width:400},placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7"}))),V.default.createElement(Y,(0,p.default)({},w,{label:"\u4fdd\u5b58\u5730\u5740\u7c3f",className:I.default.formHeight}),a("saveSender")(V.default.createElement(h.default,{onChange:this.onSaveSenderChange,checked:b},"\u662f"))),V.default.createElement(o.default,{orientation:"left",style:{fontSize:12,color:"green"}},"\u6536\u8d27"),V.default.createElement(Y,(0,p.default)({},w,{label:"\u5730\u5740\u7c3f",className:I.default.formHeight}),V.default.createElement(i.default,{type:"link",size:"small",icon:"contacts",onClick:function(){return e.loadAddress("receiver")}},"\u9009\u62e9")),V.default.createElement(Y,(0,p.default)({},w,{label:"\u59d3\u540d",className:I.default.formHeight}),a("purchaseExpress.receiver.contact",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"},{max:30,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc730\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{style:{width:180},placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),V.default.createElement(Y,(0,p.default)({},w,{label:"\u624b\u673a\u53f7",className:I.default.formHeight}),a("purchaseExpress.receiver.mobile",{rules:[{pattern:/^(?:(?:\+|00)86)?1\d{10}$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"},{required:!0,message:"\u8bf7\u8f93\u5165\u7535\u8bdd"},{min:9,message:"\u7535\u8bdd\u4e0d\u80fd\u5c11\u4e8e9\u4e2a\u5b57\u6bb5"},{max:20,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc720\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{style:{width:180},placeholder:"\u8bf7\u8f93\u5165\u7535\u8bdd"}))),V.default.createElement(Y,(0,p.default)({},w,{label:"\u533a\u57df",className:I.default.formHeight}),a("purchaseExpress.receiver.area",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u533a\u57df"}]})(V.default.createElement(H.default,{width:250,placeholder:"\u8bf7\u8f93\u5165\u533a\u57df"}))),V.default.createElement(Y,(0,p.default)({},w,{label:"\u8be6\u7ec6\u5730\u5740",className:I.default.formHeight}),a("purchaseExpress.receiver.address",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740"},{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{style:{width:400},placeholder:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740"}))),V.default.createElement(Y,(0,p.default)({},w,{label:"\u516c\u53f8",className:I.default.formHeight}),a("purchaseExpress.receiver.company",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u516c\u53f8"},{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{style:{width:400},placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8"}))),V.default.createElement(Y,(0,p.default)({},w,{label:"\u5f00\u6237\u884c",className:I.default.formHeight}),a("purchaseExpress.receiver.bank",{rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{style:{width:400},placeholder:"\u8bf7\u8f93\u5165\u5f00\u6237\u884c(\u9009\u586b)"}))),V.default.createElement(Y,(0,p.default)({},w,{label:"\u8d26\u53f7",className:I.default.formHeight}),a("purchaseExpress.receiver.account",{rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{style:{width:400},placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7(\u9009\u586b)"}))),V.default.createElement(Y,(0,p.default)({},w,{label:"\u4fdd\u5b58\u5730\u5740\u7c3f",className:I.default.formHeight}),a("saveReceiver")(V.default.createElement(h.default,{onChange:this.onSaveReceiverChange,checked:x},"\u662f"))),V.default.createElement(Y,(0,p.default)({},S,{extra:V.default.createElement("span",{style:{color:"red"}},"\u751f\u6210\u91c7\u8d2d\u6e05\u5355\u53ca\u91c7\u8d2d\u5408\u540c")}),V.default.createElement(i.default,{type:"primary",htmlType:"submit",loading:l},"\u63d0\u4ea4"))),V.default.createElement(d.default,{height:"50%",closable:!1,onClose:function(){return e.doCloseDrawer()},destroyOnClose:!0,placement:"bottom",visible:v},V.default.createElement(u.default,{scroll:{x:1e3},rowKey:"id",loading:g,dataSource:r,columns:this.columns,size:"small",onSelectRow:this.handleSelectRows})))}}]),t}(V.PureComponent),D=N))||D)||D)||D),P=z;t.default=P},onTy:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var n=l(a("bx4M"));a("+L6B");var d=l(a("2/Rp")),u=l(a("pVnL"));a("5Dmo");var s=l(a("3S7+"));a("Pwec");var i=l(a("CtXQ"));a("miYZ");var o=l(a("tsqr")),c=l(a("lwsE")),f=l(a("W8MJ")),m=l(a("a1gu")),p=l(a("Nsbk")),h=l(a("7W2i")),g=l(a("MVZn"));a("5NDa");var E=l(a("5rEg"));a("y8nQ");var v,y,b,x,w=l(a("Vl3Y")),S=r(a("q1tI")),C=a("MuoO"),k=l(a("ufQ4")),T=l(a("5pB9")),D=w.default.Item,N=E.default.TextArea,R=(v=w.default.create(),y=(0,C.connect)(function(e){var t=e.purchaseorders;return(0,g.default)({},t)}),(0,k.default)(b=v(b=y((x=function(e){function t(){var e,a;(0,c.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,m.default)(this,(e=(0,p.default)(t)).call.apply(e,[this].concat(r))),a.stringTrim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},a.handleSubmit=function(e){var t=a.props,l=t.submit,r=t.order,n=t.form;e.preventDefault(),n.validateFieldsAndScroll(function(e,t){var n=t.segment,d=new RegExp("\n","g");if(n){var u=n.replace(d,"|").split("|");if(u&&u.length>0)for(var s=0;s<u.length;s+=1){var i=a.stringTrim(u[s]),c=i.split("-");if(c&&c.length>1){if(a.stringTrim(c[0]).length!==a.stringTrim(c[1]).length)return void o.default.error("\u53f7\u6bb5\u3010".concat(i,"\u3011\u957f\u5ea6\u4e0d\u4e00\u81f4"));for(var f=a.stringTrim(c[0]).split(""),m=a.stringTrim(c[1]).split(""),p=f.length,h=0,E=0;E<p;E+=1)if(f[E]!==m[E]){h=E;break}if(p-h>5)return void o.default.error("\u53f7\u6bb5\u3010".concat(i,"\u3011\u76f8\u540c\u90e8\u5206\u53ea\u6709\u3010").concat(h,"\u3011\u4f4d"))}}}if(!e){var v=(0,g.default)({option:2},t,{order:r.id});l&&l(v)}})},a}return(0,h.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.order,l=e.submitting,r={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},o={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};return S.default.createElement(n.default,{bordered:!1},S.default.createElement(w.default,{onSubmit:this.handleSubmit,style:{marginTop:8}},S.default.createElement(D,(0,u.default)({},r,{label:S.default.createElement("span",null,"\u53f7\u6bb5",S.default.createElement("em",{className:T.default.optional},S.default.createElement(s.default,{title:"1\u3001\u53f7\u6bb5\u7528\u534a\u89d2-\u7b26\u53f7\u5206\u9694\uff1b2\u3001\u591a\u4e2a\u53f7\u6bb5\u4f7f\u7528\u6362\u884c"},S.default.createElement(i.default,{type:"info-circle-o",style:{marginLeft:4,marginRight:4}}))))}),t("segment",{initialValue:null===a||void 0===a?void 0:a.segment,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53f7\u6bb5"}]})(S.default.createElement(N,{style:{minHeight:200},placeholder:"\u8bf7\u8f93\u5165\u53f7\u6bb5,\u4f8b\u5b50\uff1a100000001001-100000001100",rows:4}))),S.default.createElement(D,(0,u.default)({},o,{style:{marginTop:32}}),S.default.createElement(d.default,{type:"primary",htmlType:"submit",loading:l},"\u63d0\u4ea4"))))}}]),t}(S.PureComponent),b=x))||b)||b)||b),V=R;t.default=V},q1rJ:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var n=l(a("bx4M"));a("+L6B");var d=l(a("2/Rp"));a("iQDF");var u=l(a("+eQT"));a("5Dmo");var s=l(a("3S7+"));a("Pwec");var i=l(a("CtXQ"));a("giR+");var o=l(a("fyUT"));a("7Kak");var c=l(a("9yH6")),f=l(a("pVnL"));a("miYZ");var m=l(a("tsqr")),p=l(a("lwsE")),h=l(a("W8MJ")),g=l(a("a1gu")),E=l(a("Nsbk")),v=l(a("7W2i")),y=l(a("MVZn"));a("5NDa");var b=l(a("5rEg"));a("y8nQ");var x=l(a("Vl3Y"));a("OaEy");var w=l(a("2fM7"));a("2qtc");var S,C,k,T,D=l(a("kLXV")),N=r(a("q1tI")),R=a("MuoO"),V=l(a("ufQ4")),M=l(a("WmlG")),F=l(a("5pB9")),H=D.default.confirm,I=w.default.Option,q=x.default.Item,Y=b.default.TextArea,z=(S=x.default.create(),C=(0,R.connect)(function(e){var t=e.bizpackagemodel,a=e.bizbindpkgModel,l=e.purchaseorders,r=e.loading;return(0,y.default)({},t,a,l,{loadingCardType:r.effects["bizbindpkgModel/fetchcardtype"]})}),(0,V.default)(k=S(k=C((T=function(e){function t(){var e,a;(0,p.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,g.default)(this,(e=(0,E.default)(t)).call.apply(e,[this].concat(r))),a.stringTrim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},a.handleSubmit=function(e){var t=a.props,l=t.onSubmit,r=t.form;e.preventDefault(),r.validateFieldsAndScroll(function(e,t){var r=t.segment,n=new RegExp("\n","g");if(r){var d=r.replace(n,"|").split("|");if(d&&d.length>0)for(var u=0;u<d.length;u+=1){var s=a.stringTrim(d[u]),i=s.split("-");if(i&&i.length>1){if(a.stringTrim(i[0]).length!==a.stringTrim(i[1]).length)return void m.default.error("\u53f7\u6bb5\u3010".concat(s,"\u3011\u957f\u5ea6\u4e0d\u4e00\u81f4"));for(var o=a.stringTrim(i[0]).split(""),c=a.stringTrim(i[1]).split(""),f=o.length,p=0,h=0;h<f;h+=1)if(o[h]!==c[h]){p=h;break}if(f-p>5)return void m.default.error("\u53f7\u6bb5\u3010".concat(s,"\u3011\u76f8\u540c\u90e8\u5206\u53ea\u6709\u3010").concat(p,"\u3011\u4f4d"))}}}if(!e){var g=t.purchaseSpecifications,E=g.openDate,v=(0,y.default)({},g,{openDate:E?"".concat(E.format("YYYY-MM-DD")," 00:00:00"):null});H({okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",title:"\u786e\u5b9a\u63d0\u4ea4?",onOk:function(){var e=(0,y.default)({},t,{purchaseSpecifications:v});l&&l(e)}})}})},a.loadPackage=function(){var e=a.props,t=e.dispatch,l=e.currentUser;t({type:"bizpackagemodel/fetchPackage",payload:{entCode:l.entCode,pType:1,pageIndex:0,uType:1,toBind:1,pageSize:1e6}})},a.onChange=function(e,t){var l=a.props.form;l.setFieldsValue({"purchaseSpecifications.package":t.props.children})},a}return(0,v.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"bizbindpkgModel/fetchcardtype"}),this.loadPackage()}},{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.submitting,l=e.loadingCardType,r=e.cardtypes,m=e.datas,p={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},h={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};return N.default.createElement(n.default,{bordered:!1},N.default.createElement(x.default,{onSubmit:this.handleSubmit,style:{marginTop:8}},N.default.createElement(q,(0,f.default)({},p,{label:"\u5ba2\u6237",className:F.default.formHeight}),t("client",{rules:[{required:!0,message:"\u5ba2\u6237\u5fc5\u586b"}]})(N.default.createElement(M.default,null))),N.default.createElement(q,(0,f.default)({},p,{label:"\u8fd0\u8425\u5546",className:F.default.formHeight}),t("purchaseSpecifications.operator",{initialValue:1})(N.default.createElement(c.default.Group,{buttonStyle:"solid"},N.default.createElement(c.default,{value:1},"\u79fb\u52a8"),N.default.createElement(c.default,{value:2},"\u8054\u901a"),N.default.createElement(c.default,{value:3},"\u7535\u4fe1")))),N.default.createElement(q,(0,f.default)({},p,{label:"\u5957\u9910\u7c7b\u578b",className:F.default.formHeight}),t("purchaseSpecifications.purchasePackageType",{initialValue:0})(N.default.createElement(c.default.Group,{buttonStyle:"solid"},N.default.createElement(c.default,{value:0},"\u6708\u5957\u9910"),N.default.createElement(c.default,{value:1},"\u957f\u5468\u671f"),N.default.createElement(c.default,{value:2},"NB")))),N.default.createElement(q,(0,f.default)({},p,{label:"\u5957\u9910",className:F.default.formHeight}),t("purchaseSpecifications.pkgNo",{rules:[{required:!1,message:"\u5957\u9910\u5fc5\u9009"}]})(N.default.createElement(w.default,{showSearch:!0,optionFilterProp:"children",placeholder:"\u8bf7\u9009\u62e9\u5957\u9910",onChange:this.onChange},m&&m.length>0?m.map(function(e){return 1===e.bType?N.default.createElement(I,{key:e.id,value:e.pkgNo},e.pName):null}):null))),N.default.createElement(q,(0,f.default)({},p,{label:"\u5957\u9910",className:F.default.formHeight}),t("purchaseSpecifications.package",{rules:[{required:!0,message:"\u5957\u9910\u5fc5\u586b"},{max:50,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"}]})(N.default.createElement(b.default,{style:{width:330},placeholder:"\u8bf7\u8f93\u5165\u5957\u9910"}))),N.default.createElement(q,(0,f.default)({},p,{label:"\u5355\u4ef7(\uffe5)",className:F.default.formHeight}),t("price",{rules:[{required:!0,message:"\u5355\u4ef7\u5fc5\u586b"}]})(N.default.createElement(o.default,{precision:2,min:1,style:{width:180}}))),N.default.createElement(q,(0,f.default)({},p,{label:"\u6570\u91cf(\u5f20)",className:F.default.formHeight}),t("quantity",{rules:[{required:!0,message:"\u6570\u91cf\u5fc5\u586b"}]})(N.default.createElement(o.default,{precision:0,min:1,max:1e7,step:100,style:{width:180}}))),N.default.createElement(q,(0,f.default)({},p,{label:"\u5361\u4f53\u89c4\u683c",className:F.default.formHeight}),t("purchaseSpecifications.cardType",{})(N.default.createElement(w.default,{loading:l,placeholder:"\u8bf7\u9009\u62e9\u5361\u4f53\u89c4\u683c",showSearch:!0,optionFilterProp:"children",style:{width:180}},r.map(function(e){return N.default.createElement(I,{key:e.value,value:e.value,label:e.title},e.title)})))),N.default.createElement(q,(0,f.default)({},p,{label:N.default.createElement("span",null,"\u6fc0\u6d3b\u65b9\u5f0f\xa0",N.default.createElement(s.default,{title:"\u5361\u6e90\u6fc0\u6d3b->\u4ee5\u5361\u6e90\u6fc0\u6d3b\u65e5\u671f\u4e3a\u51c6\uff0c\u5f00\u59cb\u8ba1\u8d39; \u5e73\u53f0\u6fc0\u6d3b->\u4ee5\u5e73\u53f0\u6fc0\u6d3b\u65e5\u671f\u4e3a\u51c6[\r A\u3001\u5982\u679c\u6d4b\u8bd5\u671f\u5185\u6240\u7528\u7684\u6d41\u91cf\u3010\u5927\u4e8e\u6216\u7b49\u4e8e\u3011\u8d60\u9001\u7684\u53ef\u7528\u6d41\u91cf\uff0c\u5219\u4f1a\u6fc0\u6d3b\uff0c\u5e76\u5f00\u59cb\u8ba1\u8d39\uff1b\r B\u3001\u5982\u679c\u6c89\u9ed8\u671f\u5185\u4ea7\u751f\u6d41\u91cf\uff0c\u5219\u4f1a\u6fc0\u6d3b\uff0c\u5e76\u5f00\u59cb\u8ba1\u8d39\uff1b\r C\u3001\u5982\u679c\u6c89\u9ed8\u671f\u8d85\u8fc7\u671f\u9650\uff0c\u5219\u4f1a\u5f3a\u5236\u6027\u6fc0\u6d3b\uff0c\u5e76\u5f00\u59cb\u8ba1\u8d39]"},N.default.createElement(i.default,{type:"question-circle-o"}))),className:F.default.formHeight}),t("purchaseSpecifications.activationMode",{initialValue:1,rules:[{required:!0,message:"\u6fc0\u6d3b\u65b9\u5f0f\u5fc5\u9009"}]})(N.default.createElement(c.default.Group,null,N.default.createElement(c.default,{value:0},"\u5361\u6e90\u6fc0\u6d3b"),N.default.createElement(c.default,{value:1},N.default.createElement("span",{style:{color:"red",fontWeight:"bold"}},"\u5e73\u53f0\u6fc0\u6d3b"))))),N.default.createElement(q,(0,f.default)({},p,{label:N.default.createElement("span",null,"\u5f00\u6237\u65e5\u671f\xa0",N.default.createElement(s.default,{title:"\u5f00\u6237\u65e5\u671f\uff1a1\u3001\u6fc0\u6d3b\u65b9\u5f0f\u4e3a\u5e73\u53f0\u6fc0\u6d3b\u65f6\u6709\u6548\uff1b2\u3001\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u9ed8\u8ba4\u4e3a\u5f53\u524d\u65e5\u671f"},N.default.createElement(i.default,{type:"question-circle-o"}))),className:F.default.formHeight}),t("purchaseSpecifications.openDate",{})(N.default.createElement(u.default,{placeholder:"\u8bf7\u9009\u62e9\u5f00\u6237\u65e5\u671f"}))),N.default.createElement(q,(0,f.default)({},p,{label:"\u6d4b\u8bd5\u671f/\u6c89\u9ed8\u671f\u65f6\u957f\u5355\u4f4d",className:F.default.formHeight}),t("purchaseSpecifications.periodUnit",{initialValue:0})(N.default.createElement(c.default.Group,null,N.default.createElement(c.default,{value:0},"\u81ea\u7136\u6708"),N.default.createElement(c.default,{value:1},"\u65e5")))),N.default.createElement(q,(0,f.default)({},p,{label:"\u6d4b\u8bd5\u671f\u65f6\u957f",className:F.default.formHeight}),t("purchaseSpecifications.testPeriod",{})(N.default.createElement(o.default,{min:0,max:360,step:1,style:{width:180},onChange:this.onTestPeriodChange,placeholder:"\u8bf7\u8f93\u5165\u6d4b\u8bd5\u671f\u65f6\u957f"}))),N.default.createElement(q,(0,f.default)({},p,{label:"\u6d4b\u8bd5\u671f\u53ef\u7528\u6d41\u91cf(M)",className:F.default.formHeight}),t("purchaseSpecifications.testFlow",{})(N.default.createElement(o.default,{min:0,max:1e6,step:1,style:{width:180},placeholder:"\u8bf7\u8f93\u5165\u6d4b\u8bd5\u671f\u53ef\u7528\u6d41\u91cf"}))),N.default.createElement(q,(0,f.default)({},p,{label:"\u6c89\u9ed8\u671f\u65f6\u957f",className:F.default.formHeight}),t("purchaseSpecifications.silencePeriod",{})(N.default.createElement(o.default,{min:0,max:180,step:1,style:{width:180},placeholder:"\u8bf7\u8f93\u5165\u6c89\u9ed8\u671f\u65f6\u957f"}))),N.default.createElement(q,(0,f.default)({},p,{label:"\u8d60\u9001\u77ed\u4fe1",className:F.default.formHeight}),t("purchaseSpecifications.sms",{initialValue:0})(N.default.createElement(c.default.Group,null,N.default.createElement(c.default,{value:0},"\u5426"),N.default.createElement(c.default,{value:1},"\u662f")))),N.default.createElement(q,(0,f.default)({},p,{label:"\u7acb\u5373\u6fc0\u6d3b",className:F.default.formHeight}),t("purchaseSpecifications.activate",{initialValue:0})(N.default.createElement(c.default.Group,null,N.default.createElement(c.default,{value:0},"\u5426"),N.default.createElement(c.default,{value:1},"\u662f")))),N.default.createElement(q,(0,f.default)({},p,{label:"\u5165\u6d41\u91cf\u6c60",className:F.default.formHeight}),t("purchaseSpecifications.flowpool",{initialValue:0})(N.default.createElement(c.default.Group,null,N.default.createElement(c.default,{value:0},"\u5426"),N.default.createElement(c.default,{value:1},"\u662f")))),N.default.createElement(q,(0,f.default)({},p,{label:"\u5b9a\u5411APN",className:F.default.formHeight}),t("purchaseSpecifications.apn",{initialValue:0})(N.default.createElement(c.default.Group,null,N.default.createElement(c.default,{value:0},"\u5426"),N.default.createElement(c.default,{value:1},"\u662f")))),N.default.createElement(q,(0,f.default)({},p,{label:"\u53cb\u5546\u8c03\u62e8",className:F.default.formHeight}),t("purchaseSpecifications.transferring",{initialValue:0})(N.default.createElement(c.default.Group,null,N.default.createElement(c.default,{value:0},"\u5426"),N.default.createElement(c.default,{value:1},"\u662f")))),N.default.createElement(q,(0,f.default)({},p,{label:"\u5907\u6ce8"}),t("remarks",{rules:[{max:200,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7200\u4e2a\u5b57\u7b26"}]})(N.default.createElement(Y,{style:{minHeight:16},placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8",rows:4}))),N.default.createElement(q,(0,f.default)({},h,{style:{marginTop:32}}),N.default.createElement(d.default,{type:"primary",htmlType:"submit",loading:a},"\u63d0\u4ea4"))))}}]),t}(N.PureComponent),k=T))||k)||k)||k),P=z;t.default=P}}]);