(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[135],{dHKC:function(e,t,r){"use strict";var n=r("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("bbsP");var a=n(r("/wGt"));r("14J3");var l=n(r("BMrR"));r("+L6B");var i=n(r("2/Rp"));r("jCWc");var d=n(r("kPKH"));r("+BJd");var o=n(r("mr32"));r("2qtc");var u=n(r("kLXV"));r("/zsF");var s=n(r("PArb")),c=n(r("2Taf")),f=n(r("vZ4D")),p=n(r("rlhR")),m=n(r("MhPg")),g=n(r("l4Ni")),v=n(r("ujKo")),h=n(r("p0pE"));r("y8nQ");var C,y,E,S,b=n(r("Vl3Y")),w=F(r("q1tI")),I=n(r("KLZ9")),x=n(r("HZnN")),D=r("MuoO"),k=n(r("ufQ4")),U=n(r("WSHz")),z=n(r("iso1"));function N(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(N=function(e){return e?r:t})(e)}function F(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=N(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=a?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}function R(e){var t=O();return function(){var r,n=(0,v.default)(e);if(t){var a=(0,v.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,g.default)(this,r)}}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var P=b.default.Item,B=(C=b.default.create(),y=(0,D.connect)(function(e){var t=e.user,r=e.enterpriseConfig,n=e.loading;return(0,h.default)({currentUser:t.currentUser},r,{loading:n.effects["enterpriseConfig/page"]})}),E=x.default.Secured("/config/enterpriseconfig"),(0,k.default)(S=C(S=y(S=E(S=function(e){(0,m.default)(r,e);var t=R(r);function r(e){var n;return(0,c.default)(this,r),n=t.call(this,e),n.columns=[{title:"\u5ba2\u6237",dataIndex:"enterpriseName",width:200},{title:"WEB\u5730\u5740",dataIndex:"createTime",width:200,render:function(e,t){return t&&t.enterpriseConfigs&&t.enterpriseConfigs.webUrl?t.enterpriseConfigs.webUrl:"--"}},{title:"API\u5730\u5740",dataIndex:"enterprise",width:200,render:function(e,t){return t&&t.enterpriseConfigs&&t.enterpriseConfigs.apiUrl?t.enterpriseConfigs.apiUrl:"--"}},{title:"\u516c\u4f17\u53f7\u5730\u5740",dataIndex:"enterpriseConfigs",width:200,render:function(e){return e&&e.mobileUrl?e.mobileUrl:"--"}},{title:"\u5176\u4ed6\u5730\u5740",width:200,render:function(e,t){var r,n;return w.default.createElement(w.Fragment,null,t&&t.enterpriseConfigs?w.default.createElement("span",null,w.default.createElement("p",null,"\u6587\u4ef6\uff1a",null===(r=t.enterpriseConfigs)||void 0===r?void 0:r.fileUrl),w.default.createElement("p",null,"\u8d44\u6e90\uff1a",null===(n=t.enterpriseConfigs)||void 0===n?void 0:n.resUrl)):"--")}},{title:"\u65f6\u95f4",width:200,dataIndex:"updateTime"},{title:"\u64cd\u4f5c",dataIndex:"id",width:150,render:function(e,t){return w.default.createElement(w.Fragment,null,w.default.createElement("a",{onClick:function(){return n.doDrawer(t,!0)}},"\u7f16\u8f91"),w.default.createElement(s.default,{type:"vertical"}),w.default.createElement("a",{onClick:function(){return n.handleDel(t)}},"\u5220\u9664"))}}],n.loadData=function(e){var t=n.props.dispatch;t({type:"enterpriseConfig/page",payload:e})},n.handleDel=function(e){u.default.confirm({title:"\u5220\u9664\u914d\u7f6e",content:"\u786e\u5b9a\u5220\u9664\u3010".concat(e.enterpriseName,"\u3011\u914d\u7f6e\u5417\uff1f"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){return n.deleteItem(e)}})},n.deleteItem=function(e){var t=n.props.dispatch,r=n.state,a=r.pageSize,l=r.pageIndex,i=r.entCode;t({type:"enterpriseConfig/del",payload:{id:e.id,pageIndex:l,pageSize:a,entCode:i}})},n.handleStandardTableChange=function(e){var t=n.props.currentUser,r=n.state,a=r.formValues,l=r.entCode;n.setState({pageSize:e.pageSize,pageIndex:e.current});var i=(0,h.default)({pageIndex:e.current-1,pageSize:e.pageSize,entCode:l||t.entCode},a);n.loadData(i)},n.onSelect=function(e,t){t&&t.selectedNodes&&t.selectedNodes.length>0&&n.setState({selectEnterpriseName:t.selectedNodes[0].props.title,enterprise:t.selectedNodes[0].props.dataRef.id}),n.setState({entCode:e[0]});var r=n.state.pageSize,a=n.props.currentUser;n.loadData({pageIndex:0,pageSize:r,entCode:e[0]||a.entCode})},n.handleFormReset=function(){var e=n.props,t=e.form,r=e.currentUser;t.resetFields(),n.setState({formValues:{}});var a=n.state.pageSize;n.loadData({pageIndex:0,pageSize:a,entCode:r.entCode})},n.handleSearch=function(e){e.preventDefault();var t=n.props,r=t.form,a=t.currentUser,l=n.state.pageSize;r.validateFields(function(e,t){if(!e){var r=(0,h.default)({},t,{pageIndex:0,pageSize:l,entCode:a.entCode});n.setState({formValues:t}),n.loadData(r)}})},n.doDrawer=function(e,t){n.setState({record:e,updateVisible:!!t})},n.doAdd=function(){var e=n.state.enterprise,t=n.props.pageData,r=(0,p.default)(n),a=null;t&&t.list&&(a=t.list.find(function(t){return t.enterprise===e})),a||(a={enterprise:e}),r.doDrawer(a,!0)},n.state={selectedRows:[],formValues:{},pageSize:10,entCode:void 0,selectEnterpriseName:void 0,updateVisible:!1,enterprise:void 0,record:null,pageIndex:1},n}return(0,f.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.currentUser;this.setState({entCode:e.entCode,selectEnterpriseName:e.enterpriseName,enterprise:e.enterprise})}},{key:"renderSimpleForm",value:function(){var e=this,t=this.props.currentUser,r=t&&t.entCode&&t.entCode.length<=4,n=this.state.selectEnterpriseName;return w.default.createElement("div",{style:{marginLeft:10,paddingBottom:10}},r?w.default.createElement("div",{style:{marginBottom:10,paddingTop:20,backgroundColor:"#FFFBE5",border:"1px solid",borderColor:"#FDCC9B"}},w.default.createElement("div",null,w.default.createElement("p",null,w.default.createElement(o.default,{style:{marginLeft:30},color:"magenta"},"\u65b0\u589e\u6d41\u7a0b\uff1a\u8bf7\u5728\u5de6\u8fb9\u3010\u5ba2\u6237\u6811\u5217\u3011\u4e2d\u3010\u9009\u4e2d\u3011\u8981\u64cd\u4f5c\u7684\u3010\u76ee\u6807\u5ba2\u6237\u3011,\u70b9\u51fb\u3010\u65b0\u589e\u3011\u6309\u94ae"))),w.default.createElement(l.default,{gutter:{md:8,lg:24,xl:48},style:{marginLeft:5}},w.default.createElement(d.default,{md:6,sm:24},w.default.createElement(P,{label:"\u76ee\u6807\u5ba2\u6237"},n)),w.default.createElement(d.default,{md:6,sm:24},w.default.createElement(i.default,{type:"primary",onClick:function(){return e.doAdd()}},"\u65b0\u589e")))):null,w.default.createElement(b.default,{onSubmit:this.handleSearch,layout:"inline"},w.default.createElement(l.default,{gutter:{md:8,lg:24,xl:48}},w.default.createElement(d.default,{md:8,sm:24},w.default.createElement("span",{className:z.default.submitButtons},w.default.createElement(i.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),w.default.createElement(i.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"))))))}},{key:"render",value:function(){var e=this,t=this.props,r=t.pageData,n=t.loading,l=t.currentUser,i=this.state,d=i.selectedRows,o=i.selectEnterpriseName,u=i.record,s=i.updateVisible,c=i.enterprise,f=l&&l.entCode&&l.entCode.length<=4,p={onSelect:this.onSelect,defaultSelectedKeys:[l.entCode]},m={scrollX:1e3,columns:this.columns,selectedRows:d,data:r,onChange:this.handleStandardTableChange,loading:n,size:"small"};return w.default.createElement("div",null,w.default.createElement(I.default,{entpriseInit:p,SearchForm:this.renderSimpleForm(),tableInit:m}),f?w.default.createElement(a.default,{title:"\u5ba2\u6237\u914d\u7f6e",width:"70%",onClose:function(){return e.doDrawer(null,!1)},visible:s,destroyOnClose:!0,placement:"right"},w.default.createElement(U.default,{data:u,enterpriseName:o,enterprise:c,onClose:function(){return e.doDrawer(null,!1)}})):null)}}]),r}(w.Component))||S)||S)||S)||S),j=B;t.default=j}}]);