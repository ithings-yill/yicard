(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[70],{MjRw:function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var u=l(a("bx4M"));a("+L6B");var r=l(a("2/Rp")),d=l(a("pVnL"));a("7Kak");var s=l(a("9yH6")),f=l(a("lwsE")),o=l(a("W8MJ")),i=l(a("a1gu")),m=l(a("Nsbk")),c=l(a("7W2i")),p=l(a("MVZn"));a("OaEy");var h=l(a("2fM7"));a("5NDa");var g=l(a("5rEg"));a("y8nQ");var y=l(a("Vl3Y"));a("2qtc");var E,v,b,C,T,w=l(a("kLXV")),k=n(a("q1tI")),x=a("MuoO"),V=l(a("usdK")),M=l(a("HZnN")),q=l(a("zHco")),S=l(a("ufQ4")),O=w.default.confirm,D=y.default.Item,H=g.default.TextArea,L=h.default.Option,F=(E=y.default.create(),v=(0,x.connect)(function(e){var t=e.user,a=e.msgmodel,l=e.loading;return(0,p.default)({currentUser:t.currentUser},a,{loading:l.effects["msgmodel/add"]})}),b=M.default.Secured("/other/message"),(0,S.default)(C=E(C=v(C=b((T=function(e){function t(e){var a;return(0,f.default)(this,t),a=(0,i.default)(this,(0,m.default)(t).call(this,e)),a.componentDidMount=function(){var e=a.props,t=e.dispatch,l=e.currentUser;t({type:"msgmodel/fetchCustomer",payload:{entCode:l.entCode}})},a.handleSubmit=function(e){var t=a.props,l=t.dispatch,n=t.form;e.preventDefault(),n.validateFieldsAndScroll(function(e,t){e||O({okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",title:"\u786e\u5b9a\u63d0\u4ea4?",onOk:function(){l({type:"msgmodel/add",payload:t})}})})},a.onCancel=function(){V.default.push("/other/message")},a.onChange=function(e){a.setState({type:e.target.value})},a.state={type:1},a}return(0,c.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.datas,l=this.state.type,n={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},f={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}},o={messageType:1,destType:1};return k.default.createElement(q.default,null,k.default.createElement(u.default,{bordered:!1},k.default.createElement(y.default,{onSubmit:this.handleSubmit,style:{marginTop:8}},k.default.createElement(D,(0,d.default)({},n,{label:"\u7c7b\u578b"}),t("messageType",{initialValue:o.messageType,rules:[{required:!0,message:"\u7c7b\u578b\u5fc5\u9009"}]})(k.default.createElement(s.default.Group,null,k.default.createElement(s.default,{value:1},"\u516c\u544a")))),k.default.createElement(D,(0,d.default)({},n,{label:"\u6807\u9898"}),t("title",{initialValue:o.title,rules:[{required:!0,message:"\u6807\u9898\u5fc5\u586b"},{max:50,message:"\u957f\u5ea6\u5fc5\u987b\u5c0f\u4e8e50"}]})(k.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u6d88\u606f\u6807\u9898"}))),k.default.createElement(D,(0,d.default)({},n,{label:"\u76ee\u6807"}),t("destType",{initialValue:o.destType})(k.default.createElement(s.default.Group,{onChange:this.onChange},k.default.createElement(s.default,{value:1},"\u6240\u6709\u5ba2\u6237"),k.default.createElement(s.default,{value:2},"\u4e0b\u7ea7\u5ba2\u6237"),k.default.createElement(s.default,{value:3},"\u7279\u5b9a\u5ba2\u6237")))),k.default.createElement(D,(0,d.default)({style:{display:3!==l?"none":""}},n,{label:"\u7279\u5b9a\u5ba2\u6237"}),t("enterprises",{initialValue:o.enterprises,rules:[{required:3===l,message:"\u7279\u5b9a\u5ba2\u6237\u5fc5\u9009"}]})(k.default.createElement(h.default,{mode:"multiple",showSearch:!0,optionFilterProp:"children",placeholder:"\u8bf7\u9009\u62e9\u7279\u5b9a\u5ba2\u6237"},a?a.map(function(e){return k.default.createElement(L,{key:e.id,value:e.id,title:e.name},e.name)}):null))),k.default.createElement(D,(0,d.default)({},n,{label:"\u6d88\u606f\u5185\u5bb9"}),t("content",{initialValue:o.content,rules:[{required:!0,message:"\u6d88\u606f\u5185\u5bb9\u5fc5\u586b"},{max:1500,message:"\u957f\u5ea6\u5fc5\u987b\u5c0f\u4e8e1500"}]})(k.default.createElement(H,{style:{minHeight:32},placeholder:"\u8bf7\u8f93\u5165\u6d88\u606f\u5185\u5bb9",rows:4}))),k.default.createElement(D,(0,d.default)({},f,{style:{marginTop:32}}),k.default.createElement(r.default,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4"),k.default.createElement(r.default,{style:{marginLeft:8},onClick:this.onCancel},"\u8fd4\u56de")))))}}]),t}(k.Component),C=T))||C)||C)||C)||C),I=F;t.default=I}}]);