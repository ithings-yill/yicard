(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[117],{nFY1:function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var l=n(a("bx4M"));a("+L6B");var r=n(a("2/Rp"));a("BoS7");var o=n(a("Sdc0"));a("5NDa");var i=n(a("5rEg")),s=n(a("jehZ")),f=n(a("p0pE")),u=n(a("2Taf")),d=n(a("vZ4D")),c=n(a("MhPg")),p=n(a("l4Ni")),m=n(a("ujKo"));a("y8nQ");var g,h,M,b,v=n(a("Vl3Y")),y=S(a("q1tI")),I=a("LLXN"),z=n(a("HZnN")),E=a("MuoO"),O=n(a("3a4m")),D=n(a("6v3/")),w=n(a("ufQ4")),C=n(a("zHco")),k=n(a("YBnh"));function P(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(P=function(e){return e?a:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=P(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}function j(e){var t=L();return function(){var a,n=(0,m.default)(e);if(t){var l=(0,m.default)(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return(0,p.default)(this,a)}}function L(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var R=v.default.Item,B=(g=(0,E.connect)(function(e){var t=e.entManager,a=e.loading;return{roles:t.roles,entInfo:t.entInfo,submitting:a.effects["entManager/put"],entLoading:a.effects["entManager/get"]}}),h=z.default.Secured("/baseManager/entmanager/edit/:id"),M=v.default.create(),g(b=(0,w.default)(b=h(b=M(b=function(e){(0,c.default)(a,e);var t=j(a);function a(){var e;(0,u.default)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l)),e.state={locationData:{},isOpen:!0},e.handleSubmit=function(t){var a=e.props,n=a.form,l=a.dispatch,r=a.entInfo;t.preventDefault(),n.validateFieldsAndScroll(function(t,a){if(!t){var n=e.state.locationData;a.lon=n.position?n.position.lng:0,a.lat=n.position?n.position.lat:0,delete a.isOpenPostion;var o=(0,f.default)({},r,a);l({type:"entManager/put",payload:o})}})},e.onCancel=function(){O.default.goBack()},e.getLocationData=function(t){e.setState({locationData:t})},e.isOpenChange=function(t){e.setState({isOpen:t,locationData:{}})},e}return(0,d.default)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.match,l=n.params.id;l&&a({type:"entManager/get",payload:l}).then(function(){var t=e.props.entInfo;e.setState({isOpen:t.lon>0&&t.lat>0,locationData:{lng:t.lon,lat:t.lat,address:t.address}})})}},{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.submitting,n=e.entInfo,f=e.entLoading,u=this.state,d=u.isOpen,c=u.locationData,p={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},m={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};return y.default.createElement(C.default,null,y.default.createElement(l.default,{bordered:!1,loading:f},y.default.createElement(v.default,{onSubmit:this.handleSubmit,style:{marginTop:8}},1!==n.enterpriseType?y.default.createElement(R,(0,s.default)({},p,{label:(0,I.formatMessage)({id:"organization.edit.formItem.label.parentOrganization",defaultMessage:"\u4e0a\u7ea7\u7ec4\u7ec7"})}),t("parentID",{initialValue:n.parentID,rules:[{required:!0,message:(0,I.formatMessage)({id:"organization.edit.formItem.label.parentOrganizationRequired",defaultMessage:"\u4e0a\u7ea7\u7ec4\u7ec7\u5fc5\u9009"})}]})(n?y.default.createElement(D.default,{filter:n.code}):null)):null,y.default.createElement(R,(0,s.default)({},p,{label:(0,I.formatMessage)({id:"organization.edit.formItem.label.organizationName",defaultMessage:"\u7ec4\u7ec7\u540d\u79f0"})}),t("name",{initialValue:n.name,rules:[{required:!0,message:(0,I.formatMessage)({id:"organization.edit.formItem.label.organizationNameRequired",defaultMessage:"\u7ec4\u7ec7\u540d\u79f0\u5fc5\u586b"})}]})(y.default.createElement(i.default,{placeholder:(0,I.formatMessage)({id:"organization.edit.formItem.input.pleaseinput",defaultMessage:"\u8bf7\u8f93\u5165"})}))),y.default.createElement(R,(0,s.default)({},p,{label:(0,I.formatMessage)({id:"organization.edit.formItem.label.contacts",defaultMessage:"\u8054\u7cfb\u4eba"})}),t("contacts",{initialValue:n.contacts})(y.default.createElement(i.default,{placeholder:(0,I.formatMessage)({id:"organization.edit.formItem.input.pleaseinput",defaultMessage:"\u8bf7\u8f93\u5165"})}))),y.default.createElement(R,(0,s.default)({},p,{label:(0,I.formatMessage)({id:"organization.edit.formItem.label.tel",defaultMessage:"\u8054\u7cfb\u7535\u8bdd"})}),t("tel",{initialValue:n.tel})(y.default.createElement(i.default,{placeholder:(0,I.formatMessage)({id:"organization.edit.formItem.input.pleaseinput",defaultMessage:"\u8bf7\u8f93\u5165"})}))),y.default.createElement(R,(0,s.default)({},p,{label:(0,I.formatMessage)({id:"organization.formItem.label.address",defaultMessage:"\u5730\u5740"})}),t("address",{initialValue:n.address})(y.default.createElement(i.default,{placeholder:(0,I.formatMessage)({id:"organization.create.formItem.input.pleaseinput",defaultMessage:"\u8bf7\u8f93\u5165"})}))),y.default.createElement(R,(0,s.default)({},p,{label:(0,I.formatMessage)({id:"organization.edit.formItem.label.location",defaultMessage:"\u5730\u56fe"}),extra:d?c.address:""}),t("isOpenPostion",{initialValue:!(!n.lon||!n.lat),valuePropName:"checked"})(y.default.createElement(o.default,{checkedChildren:(0,I.formatMessage)({id:"organization.edit.formItem.switch.checkedChildren",defaultMessage:"\u5f00"}),unCheckedChildren:(0,I.formatMessage)({id:"organization.edit.formItem.switch.unCheckedChildren",defaultMessage:"\u5173"}),onChange:this.isOpenChange})),d?y.default.createElement(k.default,{locationData:this.getLocationData,lnglat:[c.lng,c.lat]}):null),y.default.createElement(R,(0,s.default)({},m,{style:{marginTop:32}}),y.default.createElement(r.default,{type:"primary",htmlType:"submit",loading:a},(0,I.formatMessage)({id:"organization.edit.formItem.button.sumbit",defaultMessage:"\u63d0\u4ea4"})),y.default.createElement(r.default,{style:{marginLeft:8},onClick:this.onCancel},(0,I.formatMessage)({id:"organization.edit.formItem.button.goBack",defaultMessage:"\u8fd4\u56de"}))))))}}]),a}(y.Component))||b)||b)||b)||b),N=B;t.default=N}}]);