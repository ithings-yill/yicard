(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[125],{dHKC:function(e,t,n){"use strict";var r=n("TqRt"),a=n("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("bbsP");var l=r(n("/wGt"));n("14J3");var d=r(n("BMrR"));n("+L6B");var i=r(n("2/Rp"));n("jCWc");var o=r(n("kPKH"));n("+BJd");var s=r(n("mr32"));n("2qtc");var u=r(n("kLXV"));n("/zsF");var c=r(n("PArb")),f=r(n("lwsE")),p=r(n("W8MJ")),m=r(n("a1gu")),g=r(n("Nsbk")),C=r(n("7W2i")),h=r(n("PJYZ")),v=r(n("MVZn"));n("y8nQ");var E,S,w,b,y,I=r(n("Vl3Y")),x=a(n("q1tI")),D=r(n("KLZ9")),U=r(n("HZnN")),z=n("MuoO"),N=r(n("ufQ4")),k=r(n("WSHz")),F=r(n("iso1")),V=I.default.Item,B=(E=I.default.create(),S=(0,z.connect)(function(e){var t=e.user,n=e.enterpriseConfig,r=e.loading;return(0,v.default)({currentUser:t.currentUser},n,{loading:r.effects["enterpriseConfig/page"]})}),w=U.default.Secured("/config/enterpriseconfig"),(0,N.default)(b=E(b=S(b=w((y=function(e){function t(e){var n;return(0,f.default)(this,t),n=(0,m.default)(this,(0,g.default)(t).call(this,e)),n.columns=[{title:"\u5ba2\u6237",dataIndex:"enterpriseName",width:200},{title:"WEB\u5730\u5740",dataIndex:"createTime",width:200,render:function(e,t){return t&&t.enterpriseConfigs&&t.enterpriseConfigs.webUrl?t.enterpriseConfigs.webUrl:"--"}},{title:"API\u5730\u5740",dataIndex:"enterprise",width:200,render:function(e,t){return t&&t.enterpriseConfigs&&t.enterpriseConfigs.apiUrl?t.enterpriseConfigs.apiUrl:"--"}},{title:"\u516c\u4f17\u53f7\u5730\u5740",dataIndex:"enterpriseConfigs",width:200,render:function(e){return e&&e.mobileUrl?e.mobileUrl:"--"}},{title:"\u5176\u4ed6\u5730\u5740",width:200,render:function(e,t){var n,r;return x.default.createElement(x.Fragment,null,t&&t.enterpriseConfigs?x.default.createElement("span",null,x.default.createElement("p",null,"\u6587\u4ef6\uff1a",null===(n=t.enterpriseConfigs)||void 0===n?void 0:n.fileUrl),x.default.createElement("p",null,"\u8d44\u6e90\uff1a",null===(r=t.enterpriseConfigs)||void 0===r?void 0:r.resUrl)):"--")}},{title:"\u65f6\u95f4",width:200,dataIndex:"updateTime"},{title:"\u64cd\u4f5c",dataIndex:"id",width:150,render:function(e,t){return x.default.createElement(x.Fragment,null,x.default.createElement("a",{onClick:function(){return n.doDrawer(t,!0)}},"\u7f16\u8f91"),x.default.createElement(c.default,{type:"vertical"}),x.default.createElement("a",{onClick:function(){return n.handleDel(t)}},"\u5220\u9664"))}}],n.loadData=function(e){var t=n.props.dispatch;t({type:"enterpriseConfig/page",payload:e})},n.handleDel=function(e){u.default.confirm({title:"\u5220\u9664\u914d\u7f6e",content:"\u786e\u5b9a\u5220\u9664\u3010".concat(e.enterpriseName,"\u3011\u914d\u7f6e\u5417\uff1f"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){return n.deleteItem(e)}})},n.deleteItem=function(e){var t=n.props.dispatch,r=n.state,a=r.pageSize,l=r.pageIndex,d=r.entCode;t({type:"enterpriseConfig/del",payload:{id:e.id,pageIndex:l,pageSize:a,entCode:d}})},n.handleStandardTableChange=function(e){var t=n.props.currentUser,r=n.state,a=r.formValues,l=r.entCode;n.setState({pageSize:e.pageSize,pageIndex:e.current});var d=(0,v.default)({pageIndex:e.current-1,pageSize:e.pageSize,entCode:l||t.entCode},a);n.loadData(d)},n.onSelect=function(e,t){t&&t.selectedNodes&&t.selectedNodes.length>0&&n.setState({selectEnterpriseName:t.selectedNodes[0].props.title,enterprise:t.selectedNodes[0].props.dataRef.id}),n.setState({entCode:e[0]});var r=n.state.pageSize,a=n.props.currentUser;n.loadData({pageIndex:0,pageSize:r,entCode:e[0]||a.entCode})},n.handleFormReset=function(){var e=n.props,t=e.form,r=e.currentUser;t.resetFields(),n.setState({formValues:{}});var a=n.state.pageSize;n.loadData({pageIndex:0,pageSize:a,entCode:r.entCode})},n.handleSearch=function(e){e.preventDefault();var t=n.props,r=t.form,a=t.currentUser,l=n.state.pageSize;r.validateFields(function(e,t){if(!e){var r=(0,v.default)({},t,{pageIndex:0,pageSize:l,entCode:a.entCode});n.setState({formValues:t}),n.loadData(r)}})},n.doDrawer=function(e,t){n.setState({record:e,updateVisible:!!t})},n.doAdd=function(){var e=n.state.enterprise,t=n.props.pageData,r=(0,h.default)((0,h.default)(n)),a=null;t&&t.list&&(a=t.list.find(function(t){return t.enterprise===e})),a||(a={enterprise:e}),r.doDrawer(a,!0)},n.state={selectedRows:[],formValues:{},pageSize:10,entCode:void 0,selectEnterpriseName:void 0,updateVisible:!1,enterprise:void 0,record:null,pageIndex:1},n}return(0,C.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.currentUser;this.setState({entCode:e.entCode,selectEnterpriseName:e.enterpriseName,enterprise:e.enterprise})}},{key:"renderSimpleForm",value:function(){var e=this,t=this.props.currentUser,n=t&&t.entCode&&t.entCode.length<=4,r=this.state.selectEnterpriseName;return x.default.createElement("div",{style:{marginLeft:10,paddingBottom:10}},n?x.default.createElement("div",{style:{marginBottom:10,paddingTop:20,backgroundColor:"#FFFBE5",border:"1px solid",borderColor:"#FDCC9B"}},x.default.createElement("div",null,x.default.createElement("p",null,x.default.createElement(s.default,{style:{marginLeft:30},color:"magenta"},"\u65b0\u589e\u6d41\u7a0b\uff1a\u8bf7\u5728\u5de6\u8fb9\u3010\u5ba2\u6237\u6811\u5217\u3011\u4e2d\u3010\u9009\u4e2d\u3011\u8981\u64cd\u4f5c\u7684\u3010\u76ee\u6807\u5ba2\u6237\u3011,\u70b9\u51fb\u3010\u65b0\u589e\u3011\u6309\u94ae"))),x.default.createElement(d.default,{gutter:{md:8,lg:24,xl:48},style:{marginLeft:5}},x.default.createElement(o.default,{md:6,sm:24},x.default.createElement(V,{label:"\u76ee\u6807\u5ba2\u6237"},r)),x.default.createElement(o.default,{md:6,sm:24},x.default.createElement(i.default,{type:"primary",onClick:function(){return e.doAdd()}},"\u65b0\u589e")))):null,x.default.createElement(I.default,{onSubmit:this.handleSearch,layout:"inline"},x.default.createElement(d.default,{gutter:{md:8,lg:24,xl:48}},x.default.createElement(o.default,{md:8,sm:24},x.default.createElement("span",{className:F.default.submitButtons},x.default.createElement(i.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),x.default.createElement(i.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"))))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.pageData,r=t.loading,a=t.currentUser,d=this.state,i=d.selectedRows,o=d.selectEnterpriseName,s=d.record,u=d.updateVisible,c=d.enterprise,f=a&&a.entCode&&a.entCode.length<=4,p={onSelect:this.onSelect,defaultSelectedKeys:[a.entCode]},m={scrollX:1e3,columns:this.columns,selectedRows:i,data:n,onChange:this.handleStandardTableChange,loading:r,size:"small"};return x.default.createElement("div",null,x.default.createElement(D.default,{entpriseInit:p,SearchForm:this.renderSimpleForm(),tableInit:m}),f?x.default.createElement(l.default,{title:"\u5ba2\u6237\u914d\u7f6e",width:"70%",onClose:function(){return e.doDrawer(null,!1)},visible:u,destroyOnClose:!0,placement:"right"},x.default.createElement(k.default,{data:s,enterpriseName:o,enterprise:c,onClose:function(){return e.doDrawer(null,!1)}})):null)}}]),t}(x.Component),b=y))||b)||b)||b)||b),R=B;t.default=R}}]);