(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[135],{X3HE:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("J+/v");var r=l(a("MoRW"));a("IzEo");var n=l(a("bx4M"));a("+L6B");var u=l(a("2/Rp"));a("7Kak");var o=l(a("9yH6")),i=l(a("jehZ"));a("5NDa");var f=l(a("5rEg")),d=l(a("p0pE")),s=l(a("2Taf")),c=l(a("vZ4D")),p=l(a("MhPg")),m=l(a("l4Ni")),v=l(a("ujKo"));a("y8nQ");var g=l(a("Vl3Y"));a("OaEy");var h,E,y,C=l(a("2fM7")),b=S(a("q1tI")),P=a("MuoO"),w=l(a("3a4m")),D=l(a("ufQ4")),x=l(a("zHco"));function V(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(V=function(e){return e?a:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=V(t);if(a&&a.has(e))return a.get(e);var l={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var u=r?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(l,n,u):l[n]=e[n]}return l.default=e,a&&a.set(e,l),l}function O(e){var t=k();return function(){var a,l=(0,v.default)(e);if(t){var r=(0,v.default)(this).constructor;a=Reflect.construct(l,arguments,r)}else a=l.apply(this,arguments);return(0,m.default)(this,a)}}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var I=[[{title:"EC",value:1,operatorPlatform:1},{title:"(\u65b0)EC",value:2,operatorPlatform:2}],[{title:"Jasper",value:1,operatorPlatform:3},{title:"NB\u5e73\u53f0",value:2,operatorPlatform:4}],[{title:"DCP",value:1,operatorPlatform:5},{title:"CMP",value:2,operatorPlatform:6}]],M=C.default.Option,T=g.default.Item,U=(h=g.default.create(),E=(0,P.connect)(function(e){var t=e.customermodel,a=e.ecconfig,l=e.loading;return{datas:t.datas,oldData:a.oldData,getConfigLoading:l.effects["ecconfig/getConfig"],postConfigLoading:l.effects["ecconfig/postConfig"]}}),(0,D.default)(y=h(y=E(y=function(e){(0,p.default)(a,e);var t=O(a);function a(){var e;(0,s.default)(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r)),e.state={versions:I[0],operator:1,version:1},e.handleSubmit=function(t){var a=e.props.form;t.preventDefault(),a.validateFieldsAndScroll(function(t,a){t||e.onSubmit(a)})},e.onCancel=function(){w.default.push("/config/ecconfig")},e.operatorChange=function(t){var a=t.target.value-1;e.setState({versions:I[a],operator:t.target.value,version:1});var l=e.props.form;l.setFieldsValue({version:1})},e.versionChange=function(t){e.setState({version:t.target.value})},e.onSubmit=function(t){var a=e.props,l=a.dispatch,r=a.match,n=e.state.versions,u=t.version,o=n[u-1].operatorPlatform;if(t){var i=(0,d.default)({},t,{id:r.params.id,operatorPlatform:o});l({type:"ecconfig/postConfig",payload:i})}},e.onCancel=function(){w.default.push("/config/ecconfig")},e}return(0,c.default)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.dispatch,l=t.match,r=t.currentUser,n=l.params.id;r&&r.entCode&&1===r.entCode.length&&a({type:"customermodel/fetchPackage",payload:{entCode:3}}),n&&a({type:"ecconfig/getConfig",payload:{id:n}}).then(function(){var t=e.props.oldData;if(t&&(t.oType&&e.setState({operator:t.oType,versions:I[t.oType-1]}),t.version)){e.setState({version:t.version});var a=e.props.form;a.setFieldsValue({version:t.version})}})}},{key:"render",value:function(){var e=this.state,t=e.version,a=e.versions,l=e.operator,d=this.props,s=d.submitting,c=d.datas,p=d.oldData,m=d.currentUser,v=m&&m.entCode&&m.entCode.length<=4,h=this.props.form.getFieldDecorator,E={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},y={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}},P={};p&&(P=p);var w="ApiId",D="",V="AppKey";return 1===l&&2===t?(w="\u63a5\u53e3\u8d26\u6237",D="\u63a5\u53e3\u5bc6\u7801"):3===l&&(w=1===t?"B2C\u8d26\u6237":"\u63a5\u53e3\u8d26\u53f7(32\u4f4d)",D=1===t?"B2C\u5bc6\u7801":"\u63a5\u53e3\u5bc6\u7801",2===t&&(V="\u63a5\u53e3\u5bc6\u94a5(9\u4f4d)")),2===l&&(V="ApiKey",2===t&&(D="AppSecret")),b.default.createElement(x.default,null,v?b.default.createElement(n.default,{bordered:!1},b.default.createElement(g.default,{onSubmit:this.handleSubmit,style:{marginTop:8}},b.default.createElement(T,(0,i.default)({},E,{label:"\u96c6\u56e2\u540d\u79f0"}),h("cName",{initialValue:P.cName,rules:[{required:!0,message:"\u96c6\u56e2\u540d\u79f0\u5fc5\u586b"},{max:30,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc730\u4e2a\u5b57\u7b26"}]})(b.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165\u96c6\u56e2\u540d\u79f0(\u533a\u5206\u4e0d\u540c\u8d26\u6237)"}))),b.default.createElement(T,(0,i.default)({},E,{label:"\u8fd0\u8425\u5546"}),h("oType",{initialValue:P.oType,rules:[{required:!0,message:"\u8fd0\u8425\u5546\u5fc5\u9009"}]})(b.default.createElement(o.default.Group,{onChange:this.operatorChange},b.default.createElement(o.default,{value:1},"\u79fb\u52a8"),b.default.createElement(o.default,{value:2},"\u8054\u901a"),b.default.createElement(o.default,{value:3},"\u7535\u4fe1")))),b.default.createElement(T,(0,i.default)({},E,{label:"\u7248\u672c"}),h("version",{initialValue:P.version,rules:[{required:!0,message:"\u7248\u672c\u5fc5\u9009"}]})(b.default.createElement(o.default.Group,{onChange:this.versionChange},a?a.map(function(e){return b.default.createElement(o.default,{key:e.value,value:e.value},e.title)}):null))),m&&m.entCode&&1===m.entCode.length?b.default.createElement(T,(0,i.default)({},E,{label:b.default.createElement("span",{style:{color:"red"}},"\u5f52\u5c5e\u5ba2\u6237")}),h("bNo",{initialValue:P.bNo,rules:[{required:!0,message:"\u5f52\u5c5e\u5ba2\u6237\u5fc5\u586b"}]})(b.default.createElement(C.default,{placeholder:"\u8bf7\u9009\u62e9\u5ba2\u6237"},c.map(function(e){return b.default.createElement(M,{key:e.id,value:e.id},e.name)})))):null,b.default.createElement(T,(0,i.default)({},E,{label:"\u5e73\u53f0\u8d26\u53f7"}),h("uId",{initialValue:P.uId,rules:[{required:!0,message:"\u5e73\u53f0\u8d26\u53f7\u5fc5\u586b"},{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(b.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165\u5e73\u53f0\u8d26\u53f7"}))),b.default.createElement(T,(0,i.default)({},E,{label:"\u5e73\u53f0\u5bc6\u7801"}),h("pwd",{initialValue:P.pwd,rules:[{required:!0,message:"\u5e73\u53f0\u5bc6\u7801\u5fc5\u586b"},{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(b.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165\u5e73\u53f0\u5bc6\u7801"}))),b.default.createElement(T,(0,i.default)({},E,{label:"\u5e73\u53f0\u5730\u5740"}),h("webUrl",{initialValue:P.webUrl,rules:[{required:!0,message:"\u5e73\u53f0\u5730\u5740\u5fc5\u586b"},{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(b.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165\u5e73\u53f0\u5730\u5740"}))),1===l&&1!==P.oType||l>1?b.default.createElement(T,(0,i.default)({},E,{label:"\u63a5\u53e3\u5730\u5740"}),h("apiUrl",{initialValue:P.apiUrl,rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(b.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3\u5730\u5740"}))):null,l>2&&1===t?b.default.createElement(T,(0,i.default)({},E,{label:"DCP\u7684SYSID"}),h("sysId",{initialValue:P.sysId,rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(b.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165DCP\u7684SYSID"}))):null,3===l||1===l&&2===t||2===l&&2===t?b.default.createElement(T,(0,i.default)({},E,{label:w}),h("apiId",{initialValue:P.apiId,rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(b.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165".concat(w)}))):null,3===l||1===l&&2===t||2===l&&2===t?b.default.createElement(T,(0,i.default)({},E,{label:D}),h("apiPwd",{initialValue:P.apiPwd,rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(b.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165".concat(D)}))):null,3===l||2===l&&1===t?b.default.createElement(T,(0,i.default)({},E,{label:V}),h("apiKey",{initialValue:P.apiKey,rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(b.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165".concat(V)}))):null,l>2&&1===t?b.default.createElement(T,(0,i.default)({},E,{label:"DCP\u7684\u589e\u503c\u63a5\u53e3\u5730\u5740"}),h("extUrl",{initialValue:P.extUrl,rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(b.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165DCP\u7684\u589e\u503c\u63a5\u53e3\u5730\u5740"}))):null,l>2&&1===t?b.default.createElement(T,(0,i.default)({},E,{label:"DCP\u7684B2C\u63a5\u53e3\u5730\u5740"}),h("siApiUrl",{initialValue:P.siApiUrl,rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(b.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165DCP\u7684B2C\u63a5\u53e3\u5730\u5740"}))):null,b.default.createElement(T,(0,i.default)({},E,{label:"\u72b6\u6001"}),h("state",{initialValue:P.state})(b.default.createElement(o.default.Group,null,b.default.createElement(o.default,{value:1},"\u542f\u7528"),b.default.createElement(o.default,{value:2},"\u7981\u7528")))),b.default.createElement(T,(0,i.default)({},y,{style:{marginTop:32}}),b.default.createElement(u.default,{type:"primary",htmlType:"submit",loading:s},"\u63d0\u4ea4"),b.default.createElement(u.default,{style:{marginLeft:8},onClick:this.onCancel},"\u53d6\u6d88")))):b.default.createElement(r.default,{status:"403",title:"403",subTitle:"\u62b1\u6b49\uff0c\u975e\u5361\u5546\u7ba1\u7406\u5458\uff0c\u4f60\u65e0\u6743\u8bbf\u95ee\u8be5\u9875\u9762"}))}}]),a}(b.Component))||y)||y)||y),j=U;t.default=j}}]);