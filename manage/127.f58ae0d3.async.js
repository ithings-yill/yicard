(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[127],{X3HE:function(e,a,t){"use strict";var l=t("TqRt"),r=t("284h");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("J+/v");var u=l(t("MoRW"));t("IzEo");var n=l(t("bx4M"));t("+L6B");var o=l(t("2/Rp"));t("7Kak");var d=l(t("9yH6")),i=l(t("pVnL"));t("5NDa");var s=l(t("5rEg")),f=l(t("MVZn")),c=l(t("lwsE")),m=l(t("W8MJ")),p=l(t("a1gu")),v=l(t("Nsbk")),g=l(t("7W2i"));t("y8nQ");var E=l(t("Vl3Y"));t("OaEy");var h,C,y,b,P=l(t("2fM7")),V=r(t("q1tI")),x=t("MuoO"),D=l(t("usdK")),w=l(t("ufQ4")),S=l(t("zHco")),I=[[{title:"EC",value:1,operatorPlatform:1},{title:"(\u65b0)EC",value:2,operatorPlatform:2}],[{title:"Jasper",value:1,operatorPlatform:3},{title:"NB\u5e73\u53f0",value:2,operatorPlatform:4}],[{title:"DCP",value:1,operatorPlatform:5},{title:"CMP",value:2,operatorPlatform:6}]],T=P.default.Option,k=E.default.Item,U=(h=E.default.create(),C=(0,x.connect)(function(e){var a=e.customermodel,t=e.ecconfig,l=e.loading;return{datas:a.datas,oldData:t.oldData,getConfigLoading:l.effects["ecconfig/getConfig"],postConfigLoading:l.effects["ecconfig/postConfig"]}}),(0,w.default)(y=h(y=C((b=function(e){function a(){var e,t;(0,c.default)(this,a);for(var l=arguments.length,r=new Array(l),u=0;u<l;u++)r[u]=arguments[u];return t=(0,p.default)(this,(e=(0,v.default)(a)).call.apply(e,[this].concat(r))),t.state={versions:I[0],operator:1,version:1},t.handleSubmit=function(e){var a=t.props.form;e.preventDefault(),a.validateFieldsAndScroll(function(e,a){e||t.onSubmit(a)})},t.onCancel=function(){D.default.push("/config/ecconfig")},t.operatorChange=function(e){var a=e.target.value-1;t.setState({versions:I[a],operator:e.target.value,version:1});var l=t.props.form;l.setFieldsValue({version:1})},t.versionChange=function(e){t.setState({version:e.target.value})},t.onSubmit=function(e){var a=t.props,l=a.dispatch,r=a.match,u=t.state.versions,n=e.version,o=u[n-1].operatorPlatform;if(e){var d=(0,f.default)({},e,{id:r.params.id,operatorPlatform:o});l({type:"ecconfig/postConfig",payload:d})}},t.onCancel=function(){D.default.push("/config/ecconfig")},t}return(0,g.default)(a,e),(0,m.default)(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props,t=a.dispatch,l=a.match,r=a.currentUser,u=l.params.id;r&&r.entCode&&1===r.entCode.length&&t({type:"customermodel/fetchPackage",payload:{entCode:3}}),u&&t({type:"ecconfig/getConfig",payload:{id:u}}).then(function(){var a=e.props.oldData;if(a&&(a.oType&&e.setState({operator:a.oType,versions:I[a.oType-1]}),a.version)){e.setState({version:a.version});var t=e.props.form;t.setFieldsValue({version:a.version})}})}},{key:"render",value:function(){var e=this.state,a=e.version,t=e.versions,l=e.operator,r=this.props,f=r.submitting,c=r.datas,m=r.oldData,p=r.currentUser,v=p&&p.entCode&&p.entCode.length<=4,g=this.props.form.getFieldDecorator,h={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},C={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}},y={};m&&(y=m);var b="ApiId",x="",D="AppKey";return 1===l&&2===a?(b="\u63a5\u53e3\u8d26\u6237",x="\u63a5\u53e3\u5bc6\u7801"):3===l&&(b=1===a?"B2C\u8d26\u6237":"\u63a5\u53e3\u8d26\u53f7(32\u4f4d)",x=1===a?"B2C\u5bc6\u7801":"\u63a5\u53e3\u5bc6\u7801",2===a&&(D="\u63a5\u53e3\u5bc6\u94a5(9\u4f4d)")),2===l&&(D="ApiKey",2===a&&(x="AppSecret")),V.default.createElement(S.default,null,v?V.default.createElement(n.default,{bordered:!1},V.default.createElement(E.default,{onSubmit:this.handleSubmit,style:{marginTop:8}},V.default.createElement(k,(0,i.default)({},h,{label:"\u96c6\u56e2\u540d\u79f0"}),g("cName",{initialValue:y.cName,rules:[{required:!0,message:"\u96c6\u56e2\u540d\u79f0\u5fc5\u586b"},{max:30,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc730\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165\u96c6\u56e2\u540d\u79f0(\u533a\u5206\u4e0d\u540c\u8d26\u6237)"}))),V.default.createElement(k,(0,i.default)({},h,{label:"\u8fd0\u8425\u5546"}),g("oType",{initialValue:y.oType,rules:[{required:!0,message:"\u8fd0\u8425\u5546\u5fc5\u9009"}]})(V.default.createElement(d.default.Group,{onChange:this.operatorChange},V.default.createElement(d.default,{value:1},"\u79fb\u52a8"),V.default.createElement(d.default,{value:2},"\u8054\u901a"),V.default.createElement(d.default,{value:3},"\u7535\u4fe1")))),V.default.createElement(k,(0,i.default)({},h,{label:"\u7248\u672c"}),g("version",{initialValue:y.version,rules:[{required:!0,message:"\u7248\u672c\u5fc5\u9009"}]})(V.default.createElement(d.default.Group,{onChange:this.versionChange},t?t.map(function(e){return V.default.createElement(d.default,{key:e.value,value:e.value},e.title)}):null))),p&&p.entCode&&1===p.entCode.length?V.default.createElement(k,(0,i.default)({},h,{label:V.default.createElement("span",{style:{color:"red"}},"\u5f52\u5c5e\u5ba2\u6237")}),g("bNo",{initialValue:y.bNo,rules:[{required:!0,message:"\u5f52\u5c5e\u5ba2\u6237\u5fc5\u586b"}]})(V.default.createElement(P.default,{placeholder:"\u8bf7\u9009\u62e9\u5ba2\u6237"},c.map(function(e){return V.default.createElement(T,{key:e.id,value:e.id},e.name)})))):null,V.default.createElement(k,(0,i.default)({},h,{label:"\u5e73\u53f0\u8d26\u53f7"}),g("uId",{initialValue:y.uId,rules:[{required:!0,message:"\u5e73\u53f0\u8d26\u53f7\u5fc5\u586b"},{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165\u5e73\u53f0\u8d26\u53f7"}))),V.default.createElement(k,(0,i.default)({},h,{label:"\u5e73\u53f0\u5bc6\u7801"}),g("pwd",{initialValue:y.pwd,rules:[{required:!0,message:"\u5e73\u53f0\u5bc6\u7801\u5fc5\u586b"},{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165\u5e73\u53f0\u5bc6\u7801"}))),V.default.createElement(k,(0,i.default)({},h,{label:"\u5e73\u53f0\u5730\u5740"}),g("webUrl",{initialValue:y.webUrl,rules:[{required:!0,message:"\u5e73\u53f0\u5730\u5740\u5fc5\u586b"},{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165\u5e73\u53f0\u5730\u5740"}))),1===l&&1!==y.oType||l>1?V.default.createElement(k,(0,i.default)({},h,{label:"\u63a5\u53e3\u5730\u5740"}),g("apiUrl",{initialValue:y.apiUrl,rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3\u5730\u5740"}))):null,l>2&&1===a?V.default.createElement(k,(0,i.default)({},h,{label:"DCP\u7684SYSID"}),g("sysId",{initialValue:y.sysId,rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165DCP\u7684SYSID"}))):null,3===l||1===l&&2===a||2===l&&2===a?V.default.createElement(k,(0,i.default)({},h,{label:b}),g("apiId",{initialValue:y.apiId,rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165".concat(b)}))):null,3===l||1===l&&2===a||2===l&&2===a?V.default.createElement(k,(0,i.default)({},h,{label:x}),g("apiPwd",{initialValue:y.apiPwd,rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165".concat(x)}))):null,3===l||2===l&&1===a?V.default.createElement(k,(0,i.default)({},h,{label:D}),g("apiKey",{initialValue:y.apiKey,rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165".concat(D)}))):null,l>2&&1===a?V.default.createElement(k,(0,i.default)({},h,{label:"DCP\u7684\u589e\u503c\u63a5\u53e3\u5730\u5740"}),g("extUrl",{initialValue:y.extUrl,rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165DCP\u7684\u589e\u503c\u63a5\u53e3\u5730\u5740"}))):null,l>2&&1===a?V.default.createElement(k,(0,i.default)({},h,{label:"DCP\u7684B2C\u63a5\u53e3\u5730\u5740"}),g("siApiUrl",{initialValue:y.siApiUrl,rules:[{max:100,message:"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}]})(V.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165DCP\u7684B2C\u63a5\u53e3\u5730\u5740"}))):null,V.default.createElement(k,(0,i.default)({},h,{label:"\u72b6\u6001"}),g("state",{initialValue:y.state})(V.default.createElement(d.default.Group,null,V.default.createElement(d.default,{value:1},"\u542f\u7528"),V.default.createElement(d.default,{value:2},"\u7981\u7528")))),V.default.createElement(k,(0,i.default)({},C,{style:{marginTop:32}}),V.default.createElement(o.default,{type:"primary",htmlType:"submit",loading:f},"\u63d0\u4ea4"),V.default.createElement(o.default,{style:{marginLeft:8},onClick:this.onCancel},"\u53d6\u6d88")))):V.default.createElement(u.default,{status:"403",title:"403",subTitle:"\u62b1\u6b49\uff0c\u975e\u5361\u5546\u7ba1\u7406\u5458\uff0c\u4f60\u65e0\u6743\u8bbf\u95ee\u8be5\u9875\u9762"}))}}]),a}(V.Component),y=b))||y)||y)||y),q=U;a.default=q}}]);