(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{"4GNL":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.page=i,t.batchpost=p,t.getdetails=d,t.getbatch=h;var r=n(a("o0o1")),u=n(a("yXPU")),c=a("Qyje"),s=n(a("t3Un"));function i(e){return l.apply(this,arguments)}function l(){return l=(0,u.default)(r.default.mark(function e(t){return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/batch/").concat(t.entCode,"/").concat(t.pageIndex,"/").concat(t.pageSize,"?").concat((0,c.stringify)(t))));case 1:case"end":return e.stop()}},e,this)})),l.apply(this,arguments)}function p(e){return o.apply(this,arguments)}function o(){return o=(0,u.default)(r.default.mark(function e(t){return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/batch"),{method:"POST",body:t}));case 1:case"end":return e.stop()}},e,this)})),o.apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return f=(0,u.default)(r.default.mark(function e(t){return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/batch/detail/").concat(t.id,"?").concat((0,c.stringify)(t))));case 1:case"end":return e.stop()}},e,this)})),f.apply(this,arguments)}function h(e){return b.apply(this,arguments)}function b(){return b=(0,u.default)(r.default.mark(function e(t){return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/batch/").concat(t)));case 1:case"end":return e.stop()}},e,this)})),b.apply(this,arguments)}},hvwn:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("MVZn")),u=n(a("o0o1"));a("miYZ");var c=n(a("tsqr")),s=n(a("usdK")),i=a("4GNL"),l={namespace:"batch",state:{pageData:{},details:{},renewData:null,batchId:null,batch:null,renewDetials:[],renewViews:[]},effects:{send:u.default.mark(function e(t,a){var n,r,l,p,o;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,r=a.call,l=a.put,e.next=4,r(i.batchpost,n);case 4:if(p=e.sent,!p){e.next=36;break}if(o=p.result,!o){e.next=33;break}if(24!==n.bType){e.next=12;break}c.default.info("\u63d0\u4ea4\u6210\u529f,\u8bf7\u5728\u3010\u4e0b\u8f7d\u4efb\u52a1\u3011\u4e2d\u67e5\u770b"),e.next=31;break;case 12:if(19!==n.bType){e.next=17;break}return e.next=15,l({type:"setRenewDetial",payload:o});case 15:e.next=31;break;case 17:if(4!==n.bType){e.next=29;break}if(c.default.info("\u63d0\u4ea4\u6210\u529f"),0!==o.indexOf("http")){e.next=24;break}return e.next=22,l({type:"setRenew",payload:o});case 22:e.next=27;break;case 24:return e.next=26,l({type:"setBatch",payload:parseInt(p.message,10)});case 26:s.default.push("/business/batch");case 27:e.next=31;break;case 29:c.default.info("\u63d0\u4ea4\u6210\u529f"),s.default.push("/business/batch");case 31:e.next=34;break;case 33:19!==n.bType||0!==p.code||p.message?c.default.error(p.message?p.message:"\u63d0\u4ea4\u5931\u8d25"):c.default.error("\u65e0\u6ee1\u8db3\u6761\u4ef6\u7eed\u8d39\u6570\u636e");case 34:e.next=37;break;case 36:c.default.error("\u63d0\u4ea4\u5931\u8d25");case 37:case"end":return e.stop()}},e,this)}),page:u.default.mark(function e(t,a){var n,c,s,l,p,o,d,f;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,c=a.call,s=a.put,l=n.pageSize,p=(0,r.default)({},n,{pageIndex:n.pageIndex}),e.next=6,c(i.page,p);case 6:if(o=e.sent,!o){e.next=13;break}if(d=o.result,!d){e.next=13;break}return f={list:d.data,pagination:{total:d.totalCount,pageSize:l,current:n.pageIndex+1}},e.next=13,s({type:"pageSet",payload:f});case 13:case"end":return e.stop()}},e,this)}),detail:u.default.mark(function e(t,a){var n,s,l,p,o,d,f,h,b,w;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,s=a.call,l=a.put,p=n.pageIndex,o=n.pageSize,d=n.downTask,f=(0,r.default)({},n,{pageIndex:p-1}),e.next=7,s(i.getdetails,f);case 7:if(h=e.sent,!h){e.next=18;break}if(b=h.result,!b){e.next=18;break}if(!d||!b){e.next=15;break}c.default.info("\u63d0\u4ea4\u6210\u529f,\u8bf7\u5728\u3010\u4e0b\u8f7d\u4efb\u52a1\u3011\u4e2d\u67e5\u770b"),e.next=18;break;case 15:return w={list:b.data,pagination:{total:b.totalCount,pageSize:o,current:p}},e.next=18,l({type:"detailSet",payload:w});case 18:case"end":return e.stop()}},e,this)}),readbatch:u.default.mark(function e(t,a){var n,r,c,s,l;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,r=a.call,c=a.put,e.next=4,r(i.getbatch,n);case 4:if(s=e.sent,l=s.result,!l){e.next=9;break}return e.next=9,c({type:"setBatchInfo",payload:l});case 9:case"end":return e.stop()}},e,this)})},reducers:{setBatchInfo:function(e,t){return(0,r.default)({},e,{batch:t.payload})},setBatch:function(e,t){return(0,r.default)({},e,{batchId:t.payload})},setRenew:function(e,t){return(0,r.default)({},e,{renewData:t.payload})},setRenewDetial:function(e,t){return(0,r.default)({},e,{renewViews:t.payload})},pageSet:function(e,t){return(0,r.default)({},e,{pageData:t.payload})},detailSet:function(e,t){return(0,r.default)({},e,{details:t.payload})},clearRenew:function(e){return(0,r.default)({},e,{renewData:null,batchId:null,batch:null,details:{},renewDetials:[],renewViews:[]})},updateRenewDetail:function(e,t){var a=t.payload.data;return(0,r.default)({},e,{renewViews:a})}}};t.default=l}}]);