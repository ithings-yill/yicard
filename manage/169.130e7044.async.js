(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[169],{nFY1:function(e,a,t){"use strict";var n=t("TqRt"),l=t("284h");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("IzEo");var i=n(t("bx4M"));t("+L6B");var o=n(t("2/Rp"));t("BoS7");var r=n(t("Sdc0"));t("5NDa");var s=n(t("5rEg")),d=n(t("pVnL")),u=n(t("MVZn")),f=n(t("lwsE")),m=n(t("W8MJ")),c=n(t("a1gu")),g=n(t("Nsbk")),p=n(t("7W2i"));t("y8nQ");var M,h,b,I,v,z=n(t("Vl3Y")),E=l(t("q1tI")),y=t("LLXN"),C=n(t("HZnN")),D=t("MuoO"),k=n(t("usdK")),w=n(t("6v3/")),O=n(t("ufQ4")),S=n(t("zHco")),L=n(t("YBnh")),V=z.default.Item,N=(M=(0,D.connect)(function(e){var a=e.entManager,t=e.loading;return{roles:a.roles,entInfo:a.entInfo,submitting:t.effects["entManager/put"],entLoading:t.effects["entManager/get"]}}),h=C.default.Secured("/baseManager/entmanager/edit/:id"),b=z.default.create(),M(I=(0,O.default)(I=h(I=b((v=function(e){function a(){var e,t;(0,f.default)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return t=(0,c.default)(this,(e=(0,g.default)(a)).call.apply(e,[this].concat(l))),t.state={locationData:{},isOpen:!0},t.handleSubmit=function(e){var a=t.props,n=a.form,l=a.dispatch,i=a.entInfo;e.preventDefault(),n.validateFieldsAndScroll(function(e,a){if(!e){var n=t.state.locationData;a.lon=n.position?n.position.lng:0,a.lat=n.position?n.position.lat:0,delete a.isOpenPostion;var o=(0,u.default)({},i,a);l({type:"entManager/put",payload:o})}})},t.onCancel=function(){k.default.goBack()},t.getLocationData=function(e){t.setState({locationData:e})},t.isOpenChange=function(e){t.setState({isOpen:e,locationData:{}})},t}return(0,p.default)(a,e),(0,m.default)(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props,t=a.dispatch,n=a.match,l=n.params.id;l&&t({type:"entManager/get",payload:l}).then(function(){var a=e.props.entInfo;e.setState({isOpen:a.lon>0&&a.lat>0,locationData:{lng:a.lon,lat:a.lat,address:a.address}})})}},{key:"render",value:function(){var e=this.props,a=e.form.getFieldDecorator,t=e.submitting,n=e.entInfo,l=e.entLoading,u=this.state,f=u.isOpen,m=u.locationData,c={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},g={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};return E.default.createElement(S.default,null,E.default.createElement(i.default,{bordered:!1,loading:l},E.default.createElement(z.default,{onSubmit:this.handleSubmit,style:{marginTop:8}},1!==n.enterpriseType?E.default.createElement(V,(0,d.default)({},c,{label:(0,y.formatMessage)({id:"organization.edit.formItem.label.parentOrganization",defaultMessage:"\u4e0a\u7ea7\u7ec4\u7ec7"})}),a("parentID",{initialValue:n.parentID,rules:[{required:!0,message:(0,y.formatMessage)({id:"organization.edit.formItem.label.parentOrganizationRequired",defaultMessage:"\u4e0a\u7ea7\u7ec4\u7ec7\u5fc5\u9009"})}]})(n?E.default.createElement(w.default,{filter:n.code}):null)):null,E.default.createElement(V,(0,d.default)({},c,{label:(0,y.formatMessage)({id:"organization.edit.formItem.label.organizationName",defaultMessage:"\u7ec4\u7ec7\u540d\u79f0"})}),a("name",{initialValue:n.name,rules:[{required:!0,message:(0,y.formatMessage)({id:"organization.edit.formItem.label.organizationNameRequired",defaultMessage:"\u7ec4\u7ec7\u540d\u79f0\u5fc5\u586b"})}]})(E.default.createElement(s.default,{placeholder:(0,y.formatMessage)({id:"organization.edit.formItem.input.pleaseinput",defaultMessage:"\u8bf7\u8f93\u5165"})}))),E.default.createElement(V,(0,d.default)({},c,{label:(0,y.formatMessage)({id:"organization.edit.formItem.label.contacts",defaultMessage:"\u8054\u7cfb\u4eba"})}),a("contacts",{initialValue:n.contacts})(E.default.createElement(s.default,{placeholder:(0,y.formatMessage)({id:"organization.edit.formItem.input.pleaseinput",defaultMessage:"\u8bf7\u8f93\u5165"})}))),E.default.createElement(V,(0,d.default)({},c,{label:(0,y.formatMessage)({id:"organization.edit.formItem.label.tel",defaultMessage:"\u8054\u7cfb\u7535\u8bdd"})}),a("tel",{initialValue:n.tel})(E.default.createElement(s.default,{placeholder:(0,y.formatMessage)({id:"organization.edit.formItem.input.pleaseinput",defaultMessage:"\u8bf7\u8f93\u5165"})}))),E.default.createElement(V,(0,d.default)({},c,{label:(0,y.formatMessage)({id:"organization.formItem.label.address",defaultMessage:"\u5730\u5740"})}),a("address",{initialValue:n.address})(E.default.createElement(s.default,{placeholder:(0,y.formatMessage)({id:"organization.create.formItem.input.pleaseinput",defaultMessage:"\u8bf7\u8f93\u5165"})}))),E.default.createElement(V,(0,d.default)({},c,{label:(0,y.formatMessage)({id:"organization.edit.formItem.label.location",defaultMessage:"\u5730\u56fe"}),extra:f?m.address:""}),a("isOpenPostion",{initialValue:!(!n.lon||!n.lat),valuePropName:"checked"})(E.default.createElement(r.default,{checkedChildren:(0,y.formatMessage)({id:"organization.edit.formItem.switch.checkedChildren",defaultMessage:"\u5f00"}),unCheckedChildren:(0,y.formatMessage)({id:"organization.edit.formItem.switch.unCheckedChildren",defaultMessage:"\u5173"}),onChange:this.isOpenChange})),f?E.default.createElement(L.default,{locationData:this.getLocationData,lnglat:[m.lng,m.lat]}):null),E.default.createElement(V,(0,d.default)({},g,{style:{marginTop:32}}),E.default.createElement(o.default,{type:"primary",htmlType:"submit",loading:t},(0,y.formatMessage)({id:"organization.edit.formItem.button.sumbit",defaultMessage:"\u63d0\u4ea4"})),E.default.createElement(o.default,{style:{marginLeft:8},onClick:this.onCancel},(0,y.formatMessage)({id:"organization.edit.formItem.button.goBack",defaultMessage:"\u8fd4\u56de"}))))))}}]),a}(E.Component),I=v))||I)||I)||I)||I),q=N;a.default=q}}]);