(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[93],{"1sJy":function(e,t,a){e.exports={tableList:"antd-pro\\pages\\-business\\-package\\-customer-package\\index-tableList",tableListOperator:"antd-pro\\pages\\-business\\-package\\-customer-package\\index-tableListOperator",tableListForm:"antd-pro\\pages\\-business\\-package\\-customer-package\\index-tableListForm",submitButtons:"antd-pro\\pages\\-business\\-package\\-customer-package\\index-submitButtons",editableRow:"antd-pro\\pages\\-business\\-package\\-customer-package\\index-editableRow","ant-form-explain":"antd-pro\\pages\\-business\\-package\\-customer-package\\index-ant-form-explain"}},"sw+P":function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var d=l(a("bx4M")),r=l(a("pVnL"));a("Pwec");var u=l(a("CtXQ"));a("14J3");var i=l(a("BMrR"));a("jCWc");var o=l(a("kPKH"));a("5NDa");var p=l(a("5rEg"));a("+L6B");var c=l(a("2/Rp"));a("+BJd");var s=l(a("mr32"));a("miYZ");var f=l(a("tsqr")),m=l(a("MVZn"));a("/zsF");var g=l(a("PArb"));a("Awhp");var y=l(a("KrTs")),h=l(a("lwsE")),v=l(a("W8MJ")),b=l(a("a1gu")),E=l(a("Nsbk")),k=l(a("7W2i")),T=l(a("PJYZ"));a("Znn+");var C=l(a("ZTPi"));a("y8nQ");var S=l(a("Vl3Y"));a("2qtc");var x,V,z,D,I=l(a("kLXV")),w=n(a("q1tI")),M=a("MuoO"),P=l(a("ZhIB")),L=l(a("HZnN")),F=l(a("8WVO")),N=l(a("ufQ4")),R=l(a("zHco")),A=l(a("1sJy")),J=l(a("oVyD")),B=I.default.confirm,Z=S.default.Item,O=C.default.TabPane,U=(x=(0,M.connect)(function(e){var t=e.entConfig,a=e.customerpackagecfg,l=e.loading;return{entConfigData:t.entConfigData,pageData:a.pageData,delData:a.delData,entCode:a.entCode,pageLoading:l.effects["customerpackagecfg/page"],delLoading:l.effects["customerpackagecfg/del"]}}),V=S.default.create(),z=L.default.Secured("/business/package/customerpackage"),x(D=(0,N.default)(D=V(D=z(D=function(e){function t(){var e,a;(0,h.default)(this,t);for(var l=arguments.length,n=new Array(l),d=0;d<l;d++)n[d]=arguments[d];return a=(0,b.default)(this,(e=(0,E.default)(t)).call.apply(e,[this].concat(n))),a.state={pageIndex:1,pageSize:10,updateModalVisible:!1,formValues:{},price:0,uType:2,pType:1},a.columns=[{title:"\u5957\u9910\u540d\u79f0",dataIndex:"pName"},{title:"\u5957\u9910\u7c7b\u578b",dataIndex:"pTypeName"},{title:"\u6388\u6743",dataIndex:"id",render:function(e){return w.default.createElement("span",null,w.default.createElement(y.default,{status:e>0?"success":"error"}),e>0?"\u5df2\u6388\u6743":"\u672a\u6388\u6743")}},{title:"\u6807\u51c6\u8d44\u8d39",dataIndex:"guidingPrice",render:function(e){return w.default.createElement("span",{style:{color:"blue"}},"\xa5 ".concat((0,P.default)(e).format("0,0.00")))}},{title:"\u5957\u9910\u4ef7\u683c",dataIndex:"price",render:function(e){return w.default.createElement("span",{style:{color:"red"}},"\xa5 ".concat((0,P.default)(e).format("0,0.00")))}},{title:"\u5c5e\u6027",dataIndex:"oTypeTxt"},{title:"\u64cd\u4f5c",render:function(e,t){var l=a.props.location.pathname;return w.default.createElement("div",null,w.default.createElement(L.default,{authority:[l,"edit"]},w.default.createElement("a",{onClick:function(){return a.handleUpdateModalVisible("edit",t)}},t.id>0?"\u4fee\u6539\u5b9a\u4ef7":"\u5b9a\u4ef7\u6388\u6743")),t.id>0?w.default.createElement(w.Fragment,null,w.default.createElement(g.default,{type:"vertical"}),w.default.createElement(L.default,{authority:[l,"edit"]},w.default.createElement("a",{onClick:function(){return a.delPkg(t)}},"\u53d6\u6d88\u6388\u6743"))):null)}}],a.delPkg=function(e){var t=(0,T.default)((0,T.default)(a)),l=a.props.dispatch;B({okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",title:"\u786e\u5b9a\u53d6\u6d88\u6388\u6743\u5e76\u5220\u9664\u5957\u9910\u3010".concat(e.pName,"\u3011\u4ef7\u683c\u914d\u7f6e?"),onOk:function(){l({type:"customerpackagecfg/delPkg",payload:e.id}).then(function(){var e={current:1,pageSize:10};t.handleStandardTableChange(e)})}})},a.handleStandardTableChange=function(e){a.setState({pageIndex:e.current}),a.setState({pageSize:e.pageSize});var t=a.state,l=t.uType,n=t.pType,d={pageIndex:e.current,pageSize:e.pageSize,uType:l,pType:n};a.loadData(d)},a.handleModalVisible=function(e){a.setState({updateModalVisible:!!e})},a.handleUpdateModalVisible=function(e,t){a.setState({updateModalVisible:!!e,formValues:t||{},price:t.price||0,guidingPrice:t.guidingPrice||0})},a.handleAdd=function(e){var t=a.props,l=t.dispatch,n=t.currentUser,d=a.state,r=d.formValues,u=d.pType;if(e){var i=(0,m.default)({},r,{price:e.price,uType:2,entCode:n.entCode,pType:u});l({type:"customerpackagecfg/post",payload:i}).then(function(){var e=a.state,t=e.pageIndex,l=e.pageSize,n=e.uType;a.loadData({pageIndex:t,pageSize:l,uType:n,pType:u})})}a.handleModalVisible()},a.toCopy=function(){var e=a.props.entConfigData,t=document.createElement("textarea");t.value="".concat(null===e||void 0===e?void 0:e.mobileUrl),t.setAttribute("readonly",""),t.style={position:"absolute",left:"-9999px"},document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),f.default.info("\u5df2\u7ecf\u6210\u529f\u590d\u5236")},a.handleFormReset=function(){var e=a.props.form;e.resetFields(),a.setState({formValues:{}});var t=a.state,l=t.uType,n=t.pageSize,d=t.entCode,r=t.pType;a.loadData({pageIndex:0,pageSize:n,uType:l,entCode:d,pType:r})},a.handleSearch=function(e){e.preventDefault();var t=a.props.form,l=a.state,n=l.uType,d=l.pageSize,r=l.entCode,u=l.pType;t.validateFields(function(e,t){if(!e){var l=(0,m.default)({},t,{pageIndex:0,pageSize:d,uType:n,entCode:r,pType:u});a.setState({formValues:t}),a.loadData(l)}})},a.onChange=function(e){a.setState({pType:e});var t=a.props.form;t.resetFields(),a.setState({formValues:{}});var l=a.state,n=l.uType,d=l.pageSize,r=l.entCode;a.loadData({pageIndex:0,pageSize:d,uType:n,entCode:r,pType:e})},a.loadData=function(e){var t=a.props.dispatch;t({type:"customerpackagecfg/page",payload:e})},a}return(0,k.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){var e=this.state,t=e.pageIndex,a=e.pageSize,l=e.uType,n=e.pType;this.loadData({pageIndex:t,pageSize:a,uType:l,pType:n})}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e({type:"customerpackagecfg/clearRenew"})}},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.entConfigData;return w.default.createElement("div",null,w.default.createElement("div",null,w.default.createElement("p",{style:{marginRight:12,display:"inline",fontWeight:"bolder"}},"C\u7aef\u5ba2\u6237\u516c\u4f17\u53f7 -> \u7eed\u8d39\u5730\u5740:"),w.default.createElement(s.default,{color:"magenta"},null===a||void 0===a?void 0:a.mobileUrl),w.default.createElement(c.default,{type:"danger",size:"small",ghost:!0,onClick:this.toCopy},"\u590d\u5236"),w.default.createElement("p",{style:{paddingTop:10}},w.default.createElement(s.default,{color:"blue"},"\u3010\u5f53\u524d\u4f01\u4e1a\u5ba2\u6237\u3011\u7ed9\u5176\u4e0b\u3010\u7ec8\u7aef\u5ba2\u6237\u3011\u914d\u7f6e\u3010\u5957\u9910\u7eed\u8d39\u3011\u4ef7\u683c\u3002\u3010\u6ce8\u610f\uff1a\u6b64\u4ef7\u683c\u4e0d\u5f97\u4f4e\u4e8e\u4ee3\u7406\u4ef7\u683c\uff0c\u5efa\u8bae\u53c2\u8003\u6307\u5bfc\u4ef7\u3011"))),w.default.createElement("div",{style:{paddingTop:20}},w.default.createElement(S.default,{onSubmit:this.handleSearch,layout:"inline"},w.default.createElement(i.default,{gutter:{md:8,lg:24,xl:48}},w.default.createElement(o.default,{md:8,sm:24},w.default.createElement(Z,{label:"\u5957\u9910\u540d\u79f0"},t("pName")(w.default.createElement(p.default,{placeholder:"\u8bf7\u8f93\u5165\u5957\u9910\u540d\u79f0",allowClear:!0})))),w.default.createElement(o.default,{md:16,sm:24},w.default.createElement("span",{className:A.default.submitButtons},w.default.createElement(c.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),w.default.createElement(c.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))))}},{key:"render",value:function(){var e=this.props,t=e.pageData,a=e.pageLoading,l=this.state,n=l.updateModalVisible,i=l.price,o=l.guidingPrice,p={};t&&(p=t);var c={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible};return w.default.createElement(R.default,null,w.default.createElement(d.default,{bordered:!1},w.default.createElement("div",{className:A.default.tableList},w.default.createElement("div",{className:A.default.tableListForm},this.renderSimpleForm()),w.default.createElement(C.default,{defaultActiveKey:"1",onChange:this.onChange},w.default.createElement(O,{tab:w.default.createElement("span",null," ",w.default.createElement(u.default,{type:"fund"}),"\u57fa\u7840\u5305"),key:"1"},w.default.createElement(F.default,{scrollX:1e3,rowKey:"pkgNo",loading:a,data:p,columns:this.columns,size:"small",onChange:this.handleStandardTableChange})),w.default.createElement(O,{tab:w.default.createElement("span",null," ",w.default.createElement(u.default,{type:"rocket"}),"\u52a0\u6cb9\u5305"),key:"3"},w.default.createElement(F.default,{scrollX:1e3,rowKey:"pkgNo",loading:a,data:p,columns:this.columns,size:"small",onChange:this.handleStandardTableChange})))),w.default.createElement(J.default,(0,r.default)({},c,{price:i,guidingPrice:o,modalVisible:n}))))}}]),t}(w.PureComponent))||D)||D)||D)||D),W=U;t.default=W}}]);