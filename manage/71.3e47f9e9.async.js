(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[71],{"m6+R":function(e,t,a){e.exports={card:"antd-pro\\pages\\-config\\-tenant-config\\index-card",heading:"antd-pro\\pages\\-config\\-tenant-config\\index-heading",steps:"antd-pro\\pages\\-config\\-tenant-config\\index-steps",errorIcon:"antd-pro\\pages\\-config\\-tenant-config\\index-errorIcon",errorPopover:"antd-pro\\pages\\-config\\-tenant-config\\index-errorPopover",errorListItem:"antd-pro\\pages\\-config\\-tenant-config\\index-errorListItem",errorField:"antd-pro\\pages\\-config\\-tenant-config\\index-errorField",editable:"antd-pro\\pages\\-config\\-tenant-config\\index-editable",advancedForm:"antd-pro\\pages\\-config\\-tenant-config\\index-advancedForm",optional:"antd-pro\\pages\\-config\\-tenant-config\\index-optional",formHeight:"antd-pro\\pages\\-config\\-tenant-config\\index-formHeight"}},qeNj:function(e,t,a){"use strict";var n=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("J+/v");var r=n(a("MoRW"));a("IzEo");var i=n(a("bx4M"));a("T2oS");var o=n(a("W9HT"));a("7Kak");var f=n(a("9yH6"));a("iQDF");var d=n(a("+eQT"));a("giR+");var u=n(a("fyUT"));a("/zsF");var c=n(a("PArb")),s=n(a("pVnL"));a("+L6B");var p=n(a("2/Rp"));a("miYZ");var g=n(a("tsqr")),m=n(a("lwsE")),h=n(a("W8MJ")),y=n(a("a1gu")),E=n(a("Nsbk")),v=n(a("7W2i")),D=n(a("MVZn"));a("OaEy");var C=n(a("2fM7"));a("y8nQ");var x=n(a("Vl3Y"));a("2qtc");var b,M,Y,T,w=n(a("kLXV")),H=l(a("q1tI")),k=a("MuoO"),S=n(a("zHco")),O=n(a("ufQ4")),V=n(a("HZnN")),N=n(a("wd/R")),F=n(a("m6+R")),q=w.default.confirm,A=x.default.Item,L=C.default.Option,P=(b=x.default.create(),M=(0,k.connect)(function(e){var t=e.tenantConfig,a=e.loading;return(0,D.default)({},t,{submitting:a.effects["tenantConfig/update"],loading:a.effects["tenantConfig/get"],tenantLoading:a.effects["tenantConfig/getTenant"]})}),Y=V.default.Secured("/config/tenantconfig"),b(T=(0,O.default)(T=M(T=Y(T=function(e){function t(){var e,a;(0,m.default)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return a=(0,y.default)(this,(e=(0,E.default)(t)).call.apply(e,[this].concat(l))),a.state={enterprise:null},a.loadData=function(){var e=a.props.dispatch;e({type:"tenantConfig/getTenant"})},a.loadConfig=function(e){a.setState({enterprise:e});var t=a.props,n=t.dispatch,l=t.form;n({type:"tenantConfig/get",payload:{enterprise:e}}).then(function(){var e=a.props.data;l.setFieldsValue({capacity:e.capacity,beginDate:e.beginDate?(0,N.default)(e.beginDate,"YYYY-MM-DD"):null,endDate:e.beginDate?(0,N.default)(e.endDate,"YYYY-MM-DD"):null,expiryMonth:e.tenantConfig?e.tenantConfig.expiryMonth:0,expiryDay:e.tenantConfig?e.tenantConfig.expiryDay:0,expiryOrderTimeType:e.tenantConfig?e.tenantConfig.expiryOrderTimeType:0})})},a.handleSubmit=function(e){var t=a.props,n=t.dispatch,l=t.form,r=t.data;e.preventDefault(),l.validateFields(function(e,t){if(!e){if(!r||!r.id)return void g.default.error("\u8bf7\u9009\u62e9\u5ba2\u6237");var a=t.beginDate?"".concat(t.beginDate.format("YYYY-MM-DD")," 00:00:00"):null,l=t.endDate?"".concat(t.endDate.format("YYYY-MM-DD")," 00:00:00"):null,i={expiryMonth:t.expiryMonth,expiryDay:t.expiryDay,expiryOrderTimeType:t.expiryOrderTimeType,showOriginalStatus:t.showOriginalStatus,showPackageUpgrade:t.showPackageUpgrade};q({okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",title:"\u786e\u5b9a\u63d0\u4ea4?",onOk:function(){n({type:"tenantConfig/update",payload:(0,D.default)({},r,t,{beginDate:a,endDate:l,tenantConfig:i})})}})}})},a}return(0,v.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.currentUser,t=e&&e.entCode&&e.entCode.length<4;t?this.loadData():this.loadConfig(e.enterprise)}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e({type:"tenantConfig/clear"})}},{key:"render",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.currentUser,l=t.tenants,g=t.submitting,m=t.data,h=t.tenantLoading,y=t.loading,E=n&&n.entCode&&n.entCode.length<=4,v=n&&n.entCode&&n.entCode.length<4,D=this.state.enterprise,b={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},M={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};return H.default.createElement(S.default,null,E?H.default.createElement(i.default,null,H.default.createElement(p.default,{style:{marginLeft:8},icon:"reload",shape:"circle",onClick:function(){return e.loadConfig(D)}}),H.default.createElement(x.default,{onSubmit:this.handleSubmit,style:{marginTop:8}},v?H.default.createElement(A,(0,s.default)({},b,{label:"\u5ba2\u6237",className:F.default.formHeight}),H.default.createElement(C.default,{loading:h,placeholder:"\u8bf7\u9009\u62e9\u5ba2\u6237",onSelect:this.loadConfig,showSearch:!0,allowClear:!0},l.map(function(e){return H.default.createElement(L,{key:e.id,value:e.id},e.name)}))):null,H.default.createElement(o.default,{spinning:D&&y,tip:"\u6b63\u5728\u52a0\u8f7d..."},v?H.default.createElement(H.Fragment,null,H.default.createElement(c.default,{orientation:"left",style:{fontSize:12,color:"green"}},"\u5361\u5bb9\u91cf\u4e0e\u670d\u52a1\u671f\uff1a"),H.default.createElement(A,(0,s.default)({},b,{label:"\u5361\u5bb9\u91cf",className:F.default.formHeight}),a("capacity",{initialValue:m.capacity||0,rules:[{required:!0,message:"\u5361\u5bb9\u91cf\u5fc5\u586b"}]})(H.default.createElement(u.default,{min:0,max:1e7,step:5e4,style:{width:180},placeholder:"\u8bf7\u8f93\u5165\u5361\u5bb9\u91cf",formatter:function(e){return"".concat(e," \u5f20")}}))),H.default.createElement(A,(0,s.default)({},b,{label:"\u670d\u52a1\u5f00\u59cb",className:F.default.formHeight}),a("beginDate",{initialValue:m.beginDate?(0,N.default)(m.beginDate,"YYYY-MM-DD"):null,rules:[{required:!0,message:"\u670d\u52a1\u5f00\u59cb\u65e5\u671f\u5fc5\u586b"}]})(H.default.createElement(d.default,{placeholder:"\u8bf7\u9009\u62e9\u670d\u52a1\u5f00\u59cb\u65e5\u671f"}))),H.default.createElement(A,(0,s.default)({},b,{label:"\u670d\u52a1\u622a\u6b62",className:F.default.formHeight}),a("endDate",{initialValue:m.endDate?(0,N.default)(m.endDate,"YYYY-MM-DD"):null,rules:[{required:!0,message:"\u670d\u52a1\u622a\u6b62\u65e5\u671f\u5fc5\u586b"}]})(H.default.createElement(d.default,{placeholder:"\u8bf7\u9009\u62e9\u670d\u52a1\u622a\u6b62\u65e5\u671f"})))):null,H.default.createElement(c.default,{orientation:"left",style:{fontSize:12,color:"magenta"}},"\u5361\u7eed\u8d39\u622a\u6b62\u65e5\u671f=\u5361\u670d\u52a1\u622a\u6b62\u65e5\u671f + \u5ef6\u957f\u6708\u6570 + \u5ef6\u957f\u5929\u6570"),H.default.createElement(A,(0,s.default)({},b,{label:"\u5ef6\u957f\u6708\u6570",className:F.default.formHeight}),a("expiryMonth",{initialValue:m.tenantConfig?m.tenantConfig.expiryMonth:0})(H.default.createElement(u.default,{min:0,max:24,step:1,style:{width:180},placeholder:"\u8bf7\u8f93\u5165\u5ef6\u957f\u6708\u6570",formatter:function(e){return"".concat(e," \u4e2a\u6708")}}))),H.default.createElement(A,(0,s.default)({},b,{label:"\u5ef6\u957f\u5929\u6570",className:F.default.formHeight,extra:H.default.createElement("span",{style:{color:"red"}},"\u6ce8\u610f\uff1a\u3010\u5361\u5546\u7ba1\u7406\u5458\u3011\u64cd\u4f5c\u7eed\u8d39\u65e0\u7eed\u8d39\u622a\u6b62\u65e5\u671f\u9650\u5236")}),a("expiryDay",{initialValue:m.tenantConfig?m.tenantConfig.expiryDay:0})(H.default.createElement(u.default,{min:0,max:1e6,step:1,style:{width:180},placeholder:"\u8bf7\u8f93\u5165\u5ef6\u957f\u5929\u6570",formatter:function(e){return"".concat(e," \u5929")}}))),H.default.createElement(c.default,{orientation:"left",style:{fontSize:12,color:"blue"}},"\u5df2\u5931\u6548\u5361\u57fa\u7840\u5957\u9910\u7eed\u8d39\u540e\u670d\u52a1\u8d77\u59cb\u65e5\u671f\u8ba1\u65f6\u65b9\u5f0f"),H.default.createElement(A,(0,s.default)({},b,{label:"\u8ba1\u65f6\u65b9\u5f0f",className:F.default.formHeight}),a("expiryOrderTimeType",{initialValue:m.tenantConfig?m.tenantConfig.expiryOrderTimeType:0})(H.default.createElement(f.default.Group,null,H.default.createElement(f.default,{value:0},"\u6309\u5931\u6548\u65e5\u671f\u8ba1"),H.default.createElement(f.default,{value:1},"\u6309\u7eed\u8d39\u65e5\u671f\u8ba1"))),H.default.createElement("div",{style:{lineHeight:1,color:"red"}},H.default.createElement("p",null," "),H.default.createElement("p",{style:{lineHeight:1.5}},"(1)\u3001\u6309\u5931\u6548\u65e5\u671f\u8ba1\uff1a\u5df2\u5931\u6548\u5361\u57fa\u7840\u5957\u9910\u7eed\u8d39\u540e\u670d\u52a1\u8d77\u59cb\u65e5\u671f\u8ba1\u7b97\u65b9\u5f0f->\u4ece\u5931\u6548\u65e5\u671f\u7684\u4e0b\u4e2a\u65e5\u671f\u7b97\u8d77\u3002 \u4f8b\uff1a\u5361A\u57282020-10-31\u540e\u8fc7\u671f\uff0c2021-01-08\u7eed\u8d39\u57fa\u7840\u5957\u9910A\uff0c\u5219\u7eed\u8d39\u57fa\u7840\u5957\u9910A\u7684\u670d\u52a1\u8d77\u59cb\u65e5\u671f\u4ece2020-11-01\u8ba1\u7b97\u3002"),H.default.createElement("p",null,"(2)\u3001\u6309\u7eed\u8d39\u65e5\u671f\u8ba1\uff1a\u5df2\u5931\u6548\u5361\u57fa\u7840\u5957\u9910\u7eed\u8d39\u540e\u670d\u52a1\u8d77\u59cb\u65e5\u671f\u8ba1\u7b97\u65b9\u5f0f->\u4ece\u7eed\u8d39\u65e5\u671f\u7b97\u8d77\u3002 \u4f8b\uff1a\u5361A\u57282020-10-31\u540e\u8fc7\u671f\uff0c2021-01-08\u7eed\u8d39\u57fa\u7840\u5957\u9910A\uff0c\u5219\u7eed\u8d39\u57fa\u7840\u5957\u9910A\u7684\u670d\u52a1\u8d77\u59cb\u65e5\u671f\u4ece2021-01-08\u8ba1\u7b97\u3002"),H.default.createElement("p",null,"(3)\u3001\u6b64\u9600\u503c\u4fee\u6539\uff0c\u9884\u8ba11~10\u5206\u949f\u751f\u6548\uff0c\u4e14\u53ea\u5bf9\u4fee\u6539\u540e\u7684\u7eed\u8d39\u7ed3\u679c\u4ea7\u751f\u5f71\u54cd\u3002"))),H.default.createElement(c.default,{orientation:"left",style:{fontSize:12,color:"green"}},"\u5176\u4ed6"),H.default.createElement(A,(0,s.default)({},b,{label:"\u663e\u793a\u8fd0\u8425\u5546\u539f\u59cb\u3010\u5361\u72b6\u6001\u3011",className:F.default.formHeight}),a("showOriginalStatus",{initialValue:m.tenantConfig?m.tenantConfig.showOriginalStatus:0})(H.default.createElement(f.default.Group,null,H.default.createElement(f.default,{value:0},"\u5426"),H.default.createElement(f.default,{value:1},"\u662f")))),H.default.createElement(A,(0,s.default)({},b,{label:"\u5957\u9910\u5347\u7ea7",className:F.default.formHeight}),a("showPackageUpgrade",{initialValue:m.tenantConfig?m.tenantConfig.showPackageUpgrade:0})(H.default.createElement(f.default.Group,null,H.default.createElement(f.default,{value:0},"\u5173"),H.default.createElement(f.default,{value:1},"\u5f00")))),H.default.createElement(A,(0,s.default)({},M,{style:{marginTop:32}}),H.default.createElement(p.default,{type:"primary",htmlType:"submit",loading:g},"\u63d0\u4ea4"))))):H.default.createElement(r.default,{status:"403",title:"403",subTitle:"\u62b1\u6b49\uff0c\u975e\u5361\u5546\u7ba1\u7406\u5458\uff0c\u4f60\u65e0\u6743\u8bbf\u95ee\u8be5\u9875\u9762"}))}}]),t}(H.Component))||T)||T)||T)||T),U=P;t.default=U}}]);