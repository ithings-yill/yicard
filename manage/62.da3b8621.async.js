(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[62],{DMax:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("MVZn")),u=r(a("o0o1"));a("miYZ");var s=r(a("tsqr")),c=r(a("usdK")),p=a("weDr"),o={namespace:"purchaseorders",state:{pageData:[],submitting:!1,purchaseInfo:{},expressRouts:[],loadUpdateOrder:!1,address:[]},effects:{updateOrder:u.default.mark(function e(t,a){var r,n,c,o,l,d;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,c=a.put,e.next=4,c({type:"setUpdateOrder",payload:!0});case 4:return e.next=6,n(p.updateOrder,r);case 6:return o=e.sent,o?(l=o.result,d=o.code,l&&s.default.success("\u63d0\u4ea4\u6210\u529f"),1===d&&s.default.error(o.message?o.message:"\u63d0\u4ea4\u5931\u8d25")):s.default.error("\u63d0\u4ea4\u5931\u8d25"),e.next=10,c({type:"setUpdateOrder",payload:!1});case 10:case"end":return e.stop()}},e,this)}),post:u.default.mark(function e(t,a){var r,n,o,l,d;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,o=a.put,e.next=4,o({type:"setSubmitting",payload:!0});case 4:return e.next=6,n(p.post,r);case 6:return l=e.sent,l?(d=l.result,d?(s.default.success("\u63d0\u4ea4\u6210\u529f"),c.default.push("./orders")):s.default.error(l.message?l.message:"\u63d0\u4ea4\u5931\u8d25")):s.default.error("\u63d0\u4ea4\u5931\u8d25"),e.next=10,o({type:"setSubmitting",payload:!1});case 10:case"end":return e.stop()}},e,this)}),toChange:u.default.mark(function e(t,a){var r,n,o,l,d,i,f,h;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,o=a.put,e.next=4,o({type:"setSubmitting",payload:!0});case 4:return l=r.option,d=r.order,e.next=7,n(p.toChange,r);case 7:return i=e.sent,i?(f=i.result,h=i.code,f&&(2===l?c.default.push({pathname:"/business/bizsales/add",state:{order:d}}):(s.default.success("\u63d0\u4ea4\u6210\u529f"),c.default.push("./orders"))),1===h&&s.default.error(i.message?i.message:"\u63d0\u4ea4\u5931\u8d25")):s.default.error("\u63d0\u4ea4\u5931\u8d25"),e.next=11,o({type:"setSubmitting",payload:!1});case 11:case"end":return e.stop()}},e,this)}),page:u.default.mark(function e(t,a){var r,c,o,l,d,i,f,h,y;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,c=a.call,o=a.put,l=r.pageSize,d=r.downTask,i=(0,n.default)({},r,{pageIndex:r.pageIndex}),e.next=6,c(p.page,i);case 6:if(f=e.sent,!f){e.next=17;break}if(h=f.result,!h){e.next=17;break}if(!d||!h){e.next=14;break}s.default.info("\u63d0\u4ea4\u6210\u529f,\u8bf7\u5728\u3010\u4e0b\u8f7d\u4efb\u52a1\u3011\u4e2d\u67e5\u770b"),e.next=17;break;case 14:return y={list:h.data,pagination:{total:h.totalCount,pageSize:l,current:r.pageIndex+1}},e.next=17,o({type:"setList",payload:y});case 17:case"end":return e.stop()}},e,this)}),get:u.default.mark(function e(t,a){var r,n,s,c,o;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,s=a.put,e.next=4,n(p.get,r);case 4:if(c=e.sent,!c){e.next=10;break}if(o=c.result,!o){e.next=10;break}return e.next=10,s({type:"setPurchaseInfo",payload:o});case 10:case"end":return e.stop()}},e,this)}),searchRouts:u.default.mark(function e(t,a){var r,n,s,c,o;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,s=a.put,e.next=4,n(p.searchRouts,r);case 4:if(c=e.sent,!c){e.next=10;break}if(o=c.result,!o){e.next=10;break}return e.next=10,s({type:"setExpressRouts",payload:o});case 10:case"end":return e.stop()}},e,this)}),queryWaybill:u.default.mark(function e(t,a){var r,n,s,c,o;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,s=a.put,e.next=4,n(p.queryWaybill,r);case 4:if(c=e.sent,!c){e.next=10;break}if(o=c.result,!o){e.next=10;break}return e.next=10,s({type:"setWaybill",payload:o});case 10:case"end":return e.stop()}},e,this)}),queryAddress:u.default.mark(function e(t,a){var r,n,s,c,o;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,s=a.put,e.next=4,n(p.queryAddress,r);case 4:if(c=e.sent,!c){e.next=10;break}if(o=c.result,!o){e.next=10;break}return e.next=10,s({type:"setAddress",payload:o});case 10:case"end":return e.stop()}},e,this)})},reducers:{setAddress:function(e,t){return(0,n.default)({},e,{address:t.payload})},setWaybill:function(e,t){var a=e.pageData,r=a.list,u=t.payload,s=u.waybill,c=u.waybillno,p=r.find(function(e){return e.waybillno===c});return p.purchaseExpress.cost=s,(0,n.default)({},e,{pageData:(0,n.default)({},a,{list:r})})},UpdateOrder:function(e,t){return(0,n.default)({},e,{loadUpdateOrder:t.payload})},setExpressRouts:function(e,t){return(0,n.default)({},e,{expressRouts:t.payload})},clearExpressRouts:function(e){return(0,n.default)({},e,{expressRouts:[]})},clear:function(e){return(0,n.default)({},e,{purchaseInfo:{}})},setPurchaseInfo:function(e,t){return(0,n.default)({},e,{purchaseInfo:t.payload})},setList:function(e,t){return(0,n.default)({},e,{pageData:t.payload})},setSubmitting:function(e,t){return(0,n.default)({},e,{submitting:t.payload})}}};t.default=o},weDr:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.page=p,t.post=l,t.toChange=i,t.get=h,t.searchRouts=w,t.updateOrder=b,t.queryWaybill=v,t.queryAddress=k;var n=r(a("o0o1")),u=r(a("yXPU")),s=a("Qyje"),c=r(a("t3Un"));function p(e){return o.apply(this,arguments)}function o(){return o=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/purchaseorder/page?").concat((0,s.stringify)(t))));case 1:case"end":return e.stop()}},e,this)})),o.apply(this,arguments)}function l(e){return d.apply(this,arguments)}function d(){return d=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/purchaseorder"),{method:"POST",body:t},!1));case 1:case"end":return e.stop()}},e,this)})),d.apply(this,arguments)}function i(e){return f.apply(this,arguments)}function f(){return f=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/purchaseorder"),{method:"PUT",body:t},!1));case 1:case"end":return e.stop()}},e,this)})),f.apply(this,arguments)}function h(e){return y.apply(this,arguments)}function y(){return y=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/purchaseorder/").concat(t)));case 1:case"end":return e.stop()}},e,this)})),y.apply(this,arguments)}function w(e){return x.apply(this,arguments)}function x(){return x=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/express/").concat(t)));case 1:case"end":return e.stop()}},e,this)})),x.apply(this,arguments)}function b(e){return m.apply(this,arguments)}function m(){return m=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/express"),{method:"PUT",body:t},!1));case 1:case"end":return e.stop()}},e,this)})),m.apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return g=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/express/querywaybill/").concat(t)));case 1:case"end":return e.stop()}},e,this)})),g.apply(this,arguments)}function k(e){return O.apply(this,arguments)}function O(){return O=(0,u.default)(n.default.mark(function e(t){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/purchaseaddress/").concat(t)));case 1:case"end":return e.stop()}},e,this)})),O.apply(this,arguments)}}}]);