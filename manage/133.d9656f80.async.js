(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[133],{"0KCU":function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a("jehZ"));a("IzEo");var r=n(a("bx4M"));a("+BJd");var d=n(a("mr32"));a("+L6B");var i=n(a("2/Rp"));a("/zsF");var o=n(a("PArb")),u=n(a("2Taf")),c=n(a("vZ4D")),f=n(a("rlhR")),p=n(a("MhPg")),s=n(a("l4Ni")),m=n(a("ujKo"));a("y8nQ");var h=n(a("Vl3Y")),g=n(a("p0pE"));a("2qtc");var v,y,b,S,M=n(a("kLXV")),k=j(a("q1tI")),x=a("MuoO"),w=n(a("8WVO")),V=n(a("HZnN")),I=n(a("zHco")),z=n(a("ufQ4")),E=n(a("nrVT"));function O(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(O=function(e){return e?a:t})(e)}function j(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=O(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var d=l?Object.getOwnPropertyDescriptor(e,r):null;d&&(d.get||d.set)?Object.defineProperty(n,r,d):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}function C(e){var t=D();return function(){var a,n=(0,m.default)(e);if(t){var l=(0,m.default)(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}function D(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var P=M.default.confirm,T=(v=(0,x.connect)(function(e){var t=e.smtemplate,a=e.loading;return(0,g.default)({},t,{loading:a.effects["smtemplate/page"],delLoading:a.effects["smtemplate/del"]})}),y=V.default.Secured("/business/smtemplate"),b=h.default.create(),(0,z.default)(S=v(S=y(S=b(S=function(e){(0,p.default)(a,e);var t=C(a);function a(){var e;(0,u.default)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l)),e.state={data:{},formValues:{},pageIndex:1,pageSize:10,updateModalVisible:!1,edit:!1},e.columns=[{title:"\u7f16\u7801",dataIndex:"id",render:function(e){return k.default.createElement("span",null,e>0?"3".concat((Array(6).join(0)+e).slice(-6)):"--")}},{title:"\u540d\u79f0",dataIndex:"name"},{title:"\u5185\u5bb9",dataIndex:"template"},{title:"\u65f6\u95f4",dataIndex:"updateTime"},{title:"\u64cd\u4f5c",render:function(t,a){return k.default.createElement(k.Fragment,null,k.default.createElement("a",{onClick:function(){return e.handleUpdateModalVisible("edit",a)}},"\u7f16\u8f91"),k.default.createElement(o.default,{type:"vertical"}),k.default.createElement("a",{onClick:function(){return e.handleUpdateModalVisible("del",a)}},"\u5220\u9664"))}}],e.loadData=function(t){var a=e.props.dispatch;a({type:"smtemplate/page",payload:t})},e.deleteItem=function(t){var a=e.props,n=a.dispatch,l=a.pageData,r=e.state,d=r.pageSize,i=r.pageIndex,o=i,u=l.list.length;1===u&&i>1&&(o-=1),n({type:"smtemplate/del",payload:{id:t.id,pageIndex:o,pageSize:d}})},e.handleUpdateModalVisible=function(t,a){switch(t){case"del":M.default.confirm({title:"\u5220\u9664\u77ed\u4fe1\u6a21\u677f",content:"\u786e\u5b9a\u5220\u9664\u6b64\u77ed\u4fe1\u6a21\u677f\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){return e.deleteItem(a)}});break;case"edit":e.setState({data:a}),e.showModal(!0);break;default:break}},e.handleStandardTableChange=function(t,a,n){var l=e.props.dispatch,r=e.state.formValues;e.setState({pageIndex:t.current}),e.setState({pageSize:t.pageSize});var d=(0,g.default)({pageIndex:t.current,pageSize:t.pageSize},r);n.field&&(d.sorter="".concat(n.field,"_").concat(n.order)),l({type:"smtemplate/page",payload:d})},e.handleModalVisible=function(t){e.setState({updateModalVisible:!!t})},e.showModal=function(t){e.setState({updateModalVisible:!0,edit:t})},e.handleAdd=function(t){var a=(0,f.default)(e),n=e.state,l=n.pageSize,r=n.edit,d=n.data;if(t){var i=(0,g.default)({},d,t),o="".concat(r?"\u4fee\u6539\u77ed\u4fe1\u6a21\u677f":"\u65b0\u589e\u77ed\u4fe1\u6a21\u677f");P({okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",title:"\u786e\u5b9a".concat(o,"?"),onOk:function(){a.handleModalVisible();var e=a.props.dispatch;e({type:t.id?"smtemplate/update":"smtemplate/post",payload:i}).then(function(){a.setState({data:{}}),a.loadData({pageIndex:1,pageSize:l})})},onCancel:function(){a.setState({data:{}})}})}},e}return(0,c.default)(a,[{key:"componentDidMount",value:function(){var e=this.state,t=e.pageIndex,a=e.pageSize;this.loadData({pageIndex:t,pageSize:a})}},{key:"renderSimpleForm",value:function(){var e=this,t=this.state.pageSize;return k.default.createElement("div",{style:{marginLeft:10,paddingBottom:10}},k.default.createElement(i.default,{shape:"circle",icon:"reload",onClick:function(){return e.loadData({pageIndex:1,pageSize:t})}}),k.default.createElement(i.default,{style:{marginLeft:10},type:"primary",onClick:function(){return e.showModal(!1)}},"\u65b0\u589e\u6a21\u677f"),k.default.createElement(d.default,{style:{marginLeft:10},color:"magenta"},"\u77ed\u4fe1\u6a21\u677f\u6700\u591a\u652f\u6301100\u4e2a"))}},{key:"render",value:function(){var e=this.props,t=e.pageData,a=e.loading,n=this.state,d=n.updateModalVisible,i=n.edit,o=n.data,u={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible};return k.default.createElement(I.default,null,k.default.createElement(r.default,{bordered:!1},this.renderSimpleForm(),k.default.createElement(w.default,{scrollX:1e3,rowKey:"id",rowSelection:null,loading:a,data:t,columns:this.columns,onChange:this.handleStandardTableChange})),k.default.createElement(E.default,(0,l.default)({},u,{edit:i,data:o,modalVisible:d})))}}]),a}(k.PureComponent))||S)||S)||S)||S),R=T;t.default=R}}]);