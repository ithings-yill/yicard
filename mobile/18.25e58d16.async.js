(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{hFKe:function(e,t,a){"use strict";var n=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("R9oj");var o=n(a("ECub"));a("KklG");var i=n(a("Zrtv"));a("QE6f");var r=n(a("Xo8F"));a("5NDa");var d=n(a("5rEg"));a("Pwec");var c=n(a("CtXQ"));a("1Cgs");var f=n(a("zvbH"));a("Telt");var u=n(a("Tckk"));a("mw1O");var s=n(a("nJCp"));a("ufv1");var g=n(a("QYgq"));a("tLCQ");var m=n(a("XYLF"));a("+L6B");var h=n(a("2/Rp"));a("HVTF");var p=n(a("OT5E")),v=n(a("lwsE")),E=n(a("W8MJ")),w=n(a("a1gu")),y=n(a("Nsbk")),C=n(a("7W2i")),k=n(a("PJYZ")),S=n(a("MVZn"));a("e3Tq");var I,b,x=n(a("n+tp")),L=l(a("q1tI")),M=a("MuoO"),R=a("jYtE"),T=n(a("5+h1")),D="fjvoicephone",N=x.default.Item,V=(I=(0,M.connect)(function(e){var t=e.renewmodel,a=e.loading;return(0,S.default)({},t,{checking:a.effects["cardinfocfg/checkVoiceCard"],loading:a.effects["cardinfocfg/getVoiceCard"]})}),I(b=function(e){function t(e){var a;return(0,v.default)(this,t),a=(0,w.default)(this,(0,y.default)(t).call(this,e)),a.onChange=function(e){a.setState({value:e.target.value})},a.onQueryClick=function(e){window.location.href="/renew/".concat(e)},a.onWhiteListClick=function(e){window.location.href="/renew/voice/whitelist/".concat(e)},a.onClick=function(){var e=a.state.value;a.onSubmit(e)},a.onSubmit=function(e){if(!e||e.length<11)p.default.fail("\u8bf7\u8f93\u5165\u5361\u53f7",1,null,!1);else{var t=localStorage.getItem(D),n=a.props.dispatch,l=(0,k.default)((0,k.default)(a));p.default.loading("\u6570\u636e\u63d0\u4ea4\u4e2d..."),n({type:"renewmodel/checkVoiceCard",payload:{mobile:t,msisdn:e}}).then(function(){p.default.hide();var e=a.props.checkVoiceCardResult;e&&l.loadData(0,!0)})}},a.onRefresh=function(){var e=a.state,t=e.pages,n=e.pageIndex;n+1<t?(a.setState({refreshing:!0}),a.loadData(n+1,!1)):p.default.info("\u5df2\u52a0\u8f7d\u5168\u90e8\u6570\u636e!!!",1)},a.loadData=function(e,t){var n=localStorage.getItem(D),l=a.props.dispatch,o=a.state,i=o.pageSize,r=o.datas;p.default.loading("\u6570\u636e\u52a0\u8f7d\u4e2d..."),l({type:"renewmodel/getVoiceCard",payload:{mobile:n,pageIndex:e,pageSize:i}}).then(function(){var n=a.props.voiceCards;n&&(a.setState({pageIndex:e}),n.pagination&&n.pagination.total&&a.setState({pages:parseInt((n.pagination.total+i-1)/i,10)}),n.list&&(t||a.setState({refreshing:!1}),t?a.setState({datas:n.list}):a.setState({datas:r.concat(n.list)}))),p.default.hide()})},a.onScan=function(){(0,R.getQrCode)().then(function(e){e&&(a.setState({value:e}),a.onSubmit(e))})},a.handleMessage=function(e){if(!e)return null;var t=e.map(function(e){return L.default.createElement(s.default,{size:"lg",key:e.id},L.default.createElement(m.default,{className:T.default.voiceCard},L.default.createElement(m.default.Body,null,L.default.createElement("div",{style:{display:"flex",padding:"15px 0"}},L.default.createElement("img",{style:{backgroundColor:"#fff",borderRadius:50,height:"64px",marginRight:"15px"},src:"https://res.yi-ll.com/card/images/yd.png",alt:""}),L.default.createElement("div",{style:{lineHeight:1}},L.default.createElement("div",{className:T.default.msisdn,style:{marginBottom:"8px",color:"#ffffff",fontWeight:"bold"}},e.msisdn),L.default.createElement("div",null,L.default.createElement("span",{style:{fontSize:"30px"}},L.default.createElement(h.default,{type:"ghost",style:{color:"#ffffff"},onClick:function(){return a.onQueryClick(e.msisdn)},icon:"snippets"},"\u8be6\u60c5")),L.default.createElement(h.default,{type:"ghost",style:{color:"#ffffff",marginLeft:"30px"},onClick:function(){return a.onWhiteListClick(e.msisdn)},icon:"idcard"},"\u767d\u540d\u5355")))))),L.default.createElement(g.default,{size:"lg"}))});return t},a.state={value:null,refreshing:!1,down:!1,height:document.documentElement.clientHeight,datas:[],pageIndex:0,pages:1,pageSize:2},a}return(0,C.default)(t,e),(0,E.default)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0);var e=localStorage.getItem(D);e||(window.location.href="/renew/voice/signup");var t=window.location.href;(0,R.qrCodeLoader)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/getwxconfig?url=").concat(t)),this.loadData(0,!0)}},{key:"render",value:function(){var e=this,t=this.state,a=t.value,n=t.datas,l=t.height,s=t.down,g=t.refreshing,m=this.props.checking;return L.default.createElement("div",{className:T.default.renewbg},L.default.createElement(f.default,{mode:"dark",icon:L.default.createElement(u.default,{src:"https://res.yi-ll.com/card/favicon.png"})},"\u767d\u540d\u5355\u7ba1\u7406\u670d\u52a1"),L.default.createElement(N,{align:"middle",style:{marginTop:10,background:"#F5F5F9"}},L.default.createElement(r.default,null,L.default.createElement(r.default.Item,{className:T.default.felxVoiceBindImg},L.default.createElement(d.default,{maxLength:21,addonAfter:L.default.createElement(c.default,{onClick:this.onScan,type:"scan",style:{color:"green"}}),placeholder:"\u8bf7\u8f93\u5165SIM/ICCID",allowClear:!0,value:a,onChange:this.onChange}),L.default.createElement(h.default,{loading:m,onClick:this.onClick,style:{marginLeft:15},icon:"shop"},"\u7ed1\u5b9a")))),L.default.createElement("div",{className:T.default.voiceBindList},L.default.createElement("div",{style:{textAlign:"center",color:"gray",marginBottom:5}},"\u4e0a\u62c9\u53ef\u4ee5\u5237\u65b0"),n&&n.length>0?L.default.createElement(i.default,{damping:60,ref:function(t){return e.ptr=t},style:{height:l||1,overflow:"auto"},indicator:s?{deactivate:"\u4e0a\u62c9\u53ef\u4ee5\u5237\u65b0"}:{},direction:s?"down":"up",refreshing:g,onRefresh:this.onRefresh},this.handleMessage(n)):L.default.createElement(o.default,{image:o.default.PRESENTED_IMAGE_SIMPLE})))}}]),t}(L.Component))||b),z=V;t.default=z}}]);