(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[26],{S0jO:function(e,t,n){"use strict";var a=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("AcIj");var o=a(n("Vz9s"));n("ufv1");var c=a(n("QYgq"));n("QE6f");var l=a(n("Xo8F"));n("5NDa");var r=a(n("5rEg"));n("Pwec");var i=a(n("CtXQ"));n("1Cgs");var d=a(n("zvbH"));n("HVTF");var s=a(n("OT5E")),u=a(n("2Taf")),f=a(n("vZ4D")),p=a(n("MhPg")),m=a(n("l4Ni")),h=a(n("ujKo")),g=a(n("p0pE"));n("e3Tq");var w=a(n("n+tp"));n("puyI");var v,y,C=a(n("xZH1")),k=O(n("q1tI")),I=n("MuoO"),E=a(n("TSYQ")),S=n("jYtE"),b=a(n("5+h1"));function x(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var l=o?Object.getOwnPropertyDescriptor(e,c):null;l&&(l.get||l.set)?Object.defineProperty(a,c,l):a[c]=e[c]}return a.default=e,n&&n.set(e,a),a}function N(e){var t=_();return function(){var n,a=(0,h.default)(e);if(t){var o=(0,h.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,m.default)(this,n)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var R="queryCardNos",T=C.default.alert,D=w.default.Item,j=5,M=(v=(0,I.connect)(function(e){var t=e.renewmodel;return(0,g.default)({},t)}),v(y=function(e){(0,p.default)(n,e);var t=N(n);function n(e){var a;return(0,u.default)(this,n),a=t.call(this,e),a.onClear=function(){a.setState({value:"",showTag:"none"})},a.onClick=function(e){if("sms"===e){var t=a.state.value;if(t&&t.length>10){var n=a.props.dispatch;s.default.loading("\u6570\u636e\u52a0\u8f7d\u4e2d..."),n({type:"renewmodel/checkCard",payload:t}).then(function(){s.default.hide();var e=a.props.card;e?(a.addItem(t),window.location.href="../renew/sms/send/".concat(e.msisdn)):a.setState({showTag:""})})}else window.location.href="../renew/sms/list"}else{var o=a.state.value;if(!o||o.length<11)return void s.default.fail("\u8bf7\u8f93\u5165\u5361\u53f7",1,null,!1);var c=a.props.dispatch;s.default.loading("\u6570\u636e\u52a0\u8f7d\u4e2d..."),c({type:"renewmodel/checkCard",payload:o}).then(function(){s.default.hide();var t=a.props.card;if(t)switch(a.addItem(o),e){case"history":window.location.href="../renew/history/".concat(t.msisdn);break;case"sms":window.location.href="../renew/sms/send/".concat(t.msisdn);break;default:var n="m-wx.sihocar.com"===window.location.host||"m.sihocar.com"===window.location.host,l=a.state,r=l.openIdStore,i=l.appIdStore,d=a.getCookie(r),u=a.checkWechat();if(n&&!d&&u){var f=a.getCookie(i);if(f){var p="".concat(window.location.protocol,"//").concat(window.location.host,"/renew/").concat(t.msisdn),m="snsapi_userinfo";window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat(f,"&redirect_uri=").concat(encodeURIComponent(p),"&response_type=code&scope=").concat(m,"&state=").concat(t.msisdn).concat(encodeURIComponent("#wechat_redirect"))}else c({type:"renewmodel/getAppId",payload:{cNo:t.msisdn,url:encodeURIComponent(window.location.host)}}).then(function(){s.default.hide();var e=a.props.wechatAppid;if(e){var n="".concat(window.location.protocol,"//").concat(window.location.host,"/renew/").concat(t.msisdn),o="snsapi_userinfo";window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat(e,"&redirect_uri=").concat(encodeURIComponent(n),"&response_type=code&scope=").concat(o,"&state=").concat(t.msisdn).concat(encodeURIComponent("#wechat_redirect"))}else window.location.href="../renew/".concat(t.msisdn)})}else window.location.href="../renew/".concat(t.msisdn);break}else a.setState({showTag:""})})}},a.checkWechat=function(){var e=navigator.userAgent.toLowerCase(),t=-1!==e.indexOf("micromessenger");return!!t},a.setCookie=function(e,t,n){var a=new Date;a.setDate(a.getDate()+n),document.cookie="".concat(e,"=").concat(escape(t)).concat(null==n?"":";expires=".concat(a.toGMTString()))},a.getCookie=function(e){if(document.cookie.length>0){var t=document.cookie.indexOf("".concat(e,"="));if(-1!==t){t=t+e.length+1;var n=document.cookie.indexOf(";",t);return-1===n&&(n=document.cookie.length),unescape(document.cookie.substring(t,n))}}return null},a.onChange=function(e){a.setState({value:e.target.value}),e.target.value||a.setState({showTag:"none"})},a.loadData=function(){var e=JSON.parse(localStorage.getItem(R));a.setState({value:e&&e.length>0?e[0]:"",datas:e})},a.addItem=function(e){var t=JSON.parse(localStorage.getItem(R))||[],n=t.findIndex(function(t){return t===e});n<0&&(t.length>=j&&t.splice(t.length-1,1),t.unshift(e),a.setState({datas:t}),localStorage.setItem(R,JSON.stringify(t)))},a.deleteItem=function(e){T("","\u786e\u5b9a\u5220\u9664\u3010".concat(e,"\u3011?"),[{text:"\u53d6\u6d88"},{text:"\u786e\u8ba4",onPress:function(){var t=JSON.parse(localStorage.getItem(R))||[];t.splice(t.findIndex(function(t){return t===e}),1),localStorage.setItem(R,JSON.stringify(t)),a.setState({datas:t})}}])},a.selectClick=function(e){a.setState({value:e})},a.onScan=function(){(0,S.getQrCode)().then(function(e){e&&a.setState({value:e})})},a.state={value:"",showTag:"none",datas:[],openIdStore:"".concat(window.location.host,"_openid"),appIdStore:"".concat(window.location.host,"_appid")},a}return(0,f.default)(n,[{key:"componentDidMount",value:function(){this.setState({openIdStore:"".concat(window.location.host,"_openid")});var e=window.location.href;(0,S.qrCodeLoader)("".concat("https://api-prod.yi-ll.com/card/").concat("v1","/getwxconfig?url=").concat(e)),this.loadData()}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,a=t.showTag,s=t.datas;return k.default.createElement("div",{className:b.default.renewbg1},k.default.createElement(d.default,{mode:"dark",className:b.default.titleNew},"\u6d41\u91cf\u67e5\u8be2\u5145\u503c"),k.default.createElement(D,{align:"middle",style:{marginTop:"20px",background:"#F5F5F9"}},k.default.createElement(l.default,null,k.default.createElement(l.default.Item,{className:b.default.felxMainImg},k.default.createElement(r.default,{addonAfter:k.default.createElement(i.default,{onClick:this.onScan,type:"scan",style:{color:"green"}}),placeholder:"\u8bf7\u8f93\u5165SIM/ICCID",onChange:this.onChange,allowClear:!0,value:n})))),k.default.createElement(c.default,{size:"lg"}),k.default.createElement("div",{className:"sub-title",style:{display:a,marginLeft:25,marginRight:20,lineHeight:1,color:"red"}},k.default.createElement("p",null,"\u67e5\u4e0d\u5230\u5462\uff0c\u4eb2~"),k.default.createElement("p",null,"1\u3001\u8bf7\u786e\u8ba4\u8f93\u5165\u7684\u5361\u662f\u5426\u4e3a\u6211\u53f8\u7684\u7269\u8054\u7f51\u5361\uff1b"),k.default.createElement("p",null,"2\u3001\u5982\u679c\u60a8\u662f\u624b\u52a8\u8f93\u5165\uff0c\u8bf7\u68c0\u67e5\u8f93\u5165\u7684\u5185\u5bb9\u548c\u5361\u8eab\u53f7\u7801\u662f\u5426\u4e00\u81f4\uff1b"),k.default.createElement("p",null,"3\u3001\u5982\u679c\u60a8\u4f7f\u7528\u7535\u4fe1\u5361\u7684ICCID\u67e5\u8be2\uff0c\u8bf7\u5c06ICCID\u6700\u672b\u7aef\u7684\u5b57\u6bcd\u53bb\u6389\uff0c\u518d\u67e5\u8be2\uff1b")),k.default.createElement("div",{className:b.default.wrapper},k.default.createElement("div",{onClick:function(){return e.onClick("")},className:(0,E.default)(b.default.fancybutton,b.default.poponhover,b.default.bggradient1)},k.default.createElement("span",null,k.default.createElement("img",{alt:"",style:{maxWidth:18,marginRight:5,backgroundColor:"000000"},src:"https://res.yi-ll.com/card/renew/search.png"}),"\u67e5\u8be2")),k.default.createElement("div",{onClick:function(){return e.onClick("sms")},className:(0,E.default)(b.default.fancybutton,b.default.poponhover,b.default.bggradient2)},k.default.createElement("span",null,k.default.createElement("img",{alt:"",style:{maxWidth:18,marginRight:5},src:"https://res.yi-ll.com/card/renew/sms.png"}),"\u77ed\u4fe1")),k.default.createElement("div",{onClick:function(){return e.onClick("history")},className:(0,E.default)(b.default.fancybutton,b.default.poponhover,b.default.bggradient3)},k.default.createElement("span",null,k.default.createElement("img",{alt:"",style:{maxWidth:18,marginRight:5},src:"https://res.yi-ll.com/card/renew/history.png"}),"\u8fd17\u65e5\u5185\u8fde\u63a5\u8bb0\u5f55"))),k.default.createElement(c.default,{size:"lg"}),k.default.createElement(o.default,{style:{textAlign:"center"},icon:null},"\u6e29\u99a8\u63d0\u793a\uff1a\u5982\u4ecd\u65e0\u6cd5\u67e5\u8be2\uff0c\u8bf7\u8054\u7cfb\u5361\u4f9b\u5e94\u5546"),k.default.createElement("div",{className:b.default.historylist,style:{marginTop:0}},s&&s.length>0?k.default.createElement(w.default,{size:"small",renderHeader:function(){return"\u5386\u53f2\u8bb0\u5f55"}},s.map(function(t,n){return k.default.createElement(D,{style:{minHeight:20,fontSize:14},key:t,thumb:n+1,onClick:function(){return e.selectClick(t)},extra:k.default.createElement(i.default,{type:"cross-circle",size:"xxs",onClick:function(){return e.deleteItem(t)}})},k.default.createElement("span",{style:{minHeight:20,fontSize:12}},t))})):null))}}]),n}(k.Component))||y),z=M;t.default=z}}]);