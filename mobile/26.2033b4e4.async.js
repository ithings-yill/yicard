(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[26],{S0jO:function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("AcIj");var l=n(a("Vz9s"));a("ufv1");var r=n(a("QYgq"));a("QE6f");var o=n(a("Xo8F"));a("5NDa");var c=n(a("5rEg"));a("Pwec");var i=n(a("CtXQ"));a("1Cgs");var u=n(a("zvbH"));a("HVTF");var d=n(a("OT5E")),s=n(a("2Taf")),f=n(a("vZ4D")),p=n(a("MhPg")),m=n(a("l4Ni")),h=n(a("ujKo")),g=n(a("p0pE"));a("e3Tq");var v=n(a("n+tp"));a("puyI");var w,y,C=n(a("xZH1")),E=N(a("q1tI")),I=a("MuoO"),S=n(a("TSYQ")),k=a("jYtE"),b=n(a("5+h1"));function x(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(x=function(e){return e?a:t})(e)}function N(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=x(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}function O(e){var t=T();return function(){var a,n=(0,h.default)(e);if(t){var l=(0,h.default)(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return(0,m.default)(this,a)}}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var j="queryCardNos",R=C.default.alert,D=v.default.Item,M=5,P=(w=(0,I.connect)(function(e){var t=e.renewmodel;return(0,g.default)({},t)}),w(y=function(e){(0,p.default)(a,e);var t=O(a);function a(e){var n;return(0,s.default)(this,a),n=t.call(this,e),n.onClear=function(){n.setState({value:"",showTag:"none"})},n.onClick=function(e){if("sms"===e){var t=n.state.value;if(t&&t.length>10){var a=n.props.dispatch;d.default.loading("\u6570\u636e\u52a0\u8f7d\u4e2d..."),a({type:"renewmodel/checkCard",payload:t}).then(function(){d.default.hide();var e=n.props.card;e?(n.addItem(t),window.location.href="../renew/sms/send/".concat(e.msisdn)):n.setState({showTag:""})})}else window.location.href="../renew/sms/list"}else{var l=n.state.value;if(!l||l.length<11)return void d.default.fail("\u8bf7\u8f93\u5165\u5361\u53f7",1,null,!1);var r=n.props.dispatch;d.default.loading("\u6570\u636e\u52a0\u8f7d\u4e2d..."),r({type:"renewmodel/checkCard",payload:l}).then(function(){d.default.hide();var t=n.props.card;if(t)switch(n.addItem(l),e){case"history":window.location.href="../renew/history/".concat(t.msisdn);break;case"sms":window.location.href="../renew/sms/send/".concat(t.msisdn);break;default:var a="m-wx.sihocar.com"===window.location.host,o=n.state.openIdStore,c=localStorage.getItem(o),i=n.checkWechat();a&&!c&&i?r({type:"renewmodel/getAppId",payload:t.bNo}).then(function(){d.default.hide();var e=n.props.wechatAppid;if(e){var a="".concat(window.location.protocol,"//").concat(window.location.host,"/renew/").concat(t.msisdn),l="snsapi_userinfo";window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat(e,"&redirect_uri=").concat(encodeURIComponent(a),"&response_type=code&scope=").concat(l,"&state=").concat(t.msisdn).concat(encodeURIComponent("#wechat_redirect"))}else window.location.href="../renew/".concat(t.msisdn)}):window.location.href="../renew/".concat(t.msisdn);break}else n.setState({showTag:""})})}},n.checkWechat=function(){var e=navigator.userAgent.toLowerCase(),t=-1!==e.indexOf("micromessenger");return!!t},n.onChange=function(e){n.setState({value:e.target.value}),e.target.value||n.setState({showTag:"none"})},n.loadData=function(){var e=JSON.parse(localStorage.getItem(j));n.setState({value:e&&e.length>0?e[0]:"",datas:e})},n.addItem=function(e){var t=JSON.parse(localStorage.getItem(j))||[],a=t.findIndex(function(t){return t===e});a<0&&(t.length>=M&&t.splice(t.length-1,1),t.unshift(e),n.setState({datas:t}),localStorage.setItem(j,JSON.stringify(t)))},n.deleteItem=function(e){R("","\u786e\u5b9a\u5220\u9664\u3010".concat(e,"\u3011?"),[{text:"\u53d6\u6d88"},{text:"\u786e\u8ba4",onPress:function(){var t=JSON.parse(localStorage.getItem(j))||[];t.splice(t.findIndex(function(t){return t===e}),1),localStorage.setItem(j,JSON.stringify(t)),n.setState({datas:t})}}])},n.selectClick=function(e){n.setState({value:e})},n.onScan=function(){(0,k.getQrCode)().then(function(e){e&&n.setState({value:e})})},n.state={value:"",showTag:"none",datas:[],openIdStore:"".concat(window.location.host,"_openid")},n}return(0,f.default)(a,[{key:"componentDidMount",value:function(){this.setState({openIdStore:"".concat(window.location.host,"_openid")});var e=window.location.href;(0,k.qrCodeLoader)("".concat("http://api-prod.yi-ll.com/card/").concat("v1","/getwxconfig?url=").concat(e)),this.loadData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.value,n=t.showTag,d=t.datas;return E.default.createElement("div",{className:b.default.renewbg1},E.default.createElement(u.default,{mode:"dark",className:b.default.titleNew},"\u6d41\u91cf\u67e5\u8be2\u5145\u503c"),E.default.createElement(D,{align:"middle",style:{marginTop:"20px",background:"#F5F5F9"}},E.default.createElement(o.default,null,E.default.createElement(o.default.Item,{className:b.default.felxMainImg},E.default.createElement(c.default,{addonAfter:E.default.createElement(i.default,{onClick:this.onScan,type:"scan",style:{color:"green"}}),placeholder:"\u8bf7\u8f93\u5165SIM/ICCID",onChange:this.onChange,allowClear:!0,value:a})))),E.default.createElement(r.default,{size:"lg"}),E.default.createElement("div",{className:"sub-title",style:{display:n,marginLeft:25,marginRight:20,lineHeight:1,color:"red"}},E.default.createElement("p",null,"\u67e5\u4e0d\u5230\u5462\uff0c\u4eb2~"),E.default.createElement("p",null,"1\u3001\u8bf7\u786e\u8ba4\u8f93\u5165\u7684\u5361\u662f\u5426\u4e3a\u6211\u53f8\u7684\u7269\u8054\u7f51\u5361\uff1b"),E.default.createElement("p",null,"2\u3001\u5982\u679c\u60a8\u662f\u624b\u52a8\u8f93\u5165\uff0c\u8bf7\u68c0\u67e5\u8f93\u5165\u7684\u5185\u5bb9\u548c\u5361\u8eab\u53f7\u7801\u662f\u5426\u4e00\u81f4\uff1b"),E.default.createElement("p",null,"3\u3001\u5982\u679c\u60a8\u4f7f\u7528\u7535\u4fe1\u5361\u7684ICCID\u67e5\u8be2\uff0c\u8bf7\u5c06ICCID\u6700\u672b\u7aef\u7684\u5b57\u6bcd\u53bb\u6389\uff0c\u518d\u67e5\u8be2\uff1b")),E.default.createElement("div",{className:b.default.wrapper},E.default.createElement("div",{onClick:function(){return e.onClick("")},className:(0,S.default)(b.default.fancybutton,b.default.poponhover,b.default.bggradient1)},E.default.createElement("span",null,E.default.createElement("img",{alt:"",style:{maxWidth:18,marginRight:5,backgroundColor:"000000"},src:"https://res.yi-ll.com/card/renew/search.png"}),"\u67e5\u8be2")),E.default.createElement("div",{onClick:function(){return e.onClick("sms")},className:(0,S.default)(b.default.fancybutton,b.default.poponhover,b.default.bggradient2)},E.default.createElement("span",null,E.default.createElement("img",{alt:"",style:{maxWidth:18,marginRight:5},src:"https://res.yi-ll.com/card/renew/sms.png"}),"\u77ed\u4fe1")),E.default.createElement("div",{onClick:function(){return e.onClick("history")},className:(0,S.default)(b.default.fancybutton,b.default.poponhover,b.default.bggradient3)},E.default.createElement("span",null,E.default.createElement("img",{alt:"",style:{maxWidth:18,marginRight:5},src:"https://res.yi-ll.com/card/renew/history.png"}),"\u8fd17\u65e5\u5185\u8fde\u63a5\u8bb0\u5f55"))),E.default.createElement(r.default,{size:"lg"}),E.default.createElement(l.default,{style:{textAlign:"center"},icon:null},"\u6e29\u99a8\u63d0\u793a\uff1a\u5982\u4ecd\u65e0\u6cd5\u67e5\u8be2\uff0c\u8bf7\u8054\u7cfb\u5361\u4f9b\u5e94\u5546"),E.default.createElement("div",{className:b.default.historylist,style:{marginTop:0}},d&&d.length>0?E.default.createElement(v.default,{size:"small",renderHeader:function(){return"\u5386\u53f2\u8bb0\u5f55"}},d.map(function(t,a){return E.default.createElement(D,{style:{minHeight:20,fontSize:14},key:t,thumb:a+1,onClick:function(){return e.selectClick(t)},extra:E.default.createElement(i.default,{type:"cross-circle",size:"xxs",onClick:function(){return e.deleteItem(t)}})},E.default.createElement("span",{style:{minHeight:20,fontSize:12}},t))})):null))}}]),a}(E.Component))||y),_=P;t.default=_}}]);